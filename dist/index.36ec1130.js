!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,n)};
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/function n(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function u(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e};
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var d=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,v.prototype.create),o}return n(e,t),e}(Error),v=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?y(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new d(i,a,r);return u},t}();function y(t,e){return t.replace(m,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var m=/\{\$([^}]+)}/g;
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
function g(t,e){return Object.prototype.hasOwnProperty.call(t,e)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+f+s+n[r]&4294967295;f=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function b(t,e){var n=new w(t,e);return n.subscribe.bind(n)}var w=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function I(){}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var E=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),_="[DEFAULT]",T=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=_);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new f;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:_,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */(t))try{this.getOrInitializeService(_)}catch(t){}try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),a=o[0],u=o[1],c=this.normalizeInstanceIdentifier(a);try{var h=this.getOrInitializeService(c);u.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=_),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=_),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===_?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:_:t},t}();
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var A,N=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new T(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ******************************************************************************/function S(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var k,O,D=[];(O=k||(k={}))[O.DEBUG=0]="DEBUG",O[O.VERBOSE=1]="VERBOSE",O[O.INFO=2]="INFO",O[O.WARN=3]="WARN",O[O.ERROR=4]="ERROR",O[O.SILENT=5]="SILENT";var P,C={debug:k.DEBUG,verbose:k.VERBOSE,info:k.INFO,warn:k.WARN,error:k.ERROR,silent:k.SILENT},x=k.INFO,R=((A={})[k.DEBUG]="log",A[k.VERBOSE]="log",A[k.INFO]="info",A[k.WARN]="warn",A[k.ERROR]="error",A),L=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=R[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,S(["["+i+"]  "+t.name+":"],n))}},M=function(){function t(t){this.name=t,this._logLevel=x,this._logHandler=L,this._userLogHandler=null,D.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in k))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?C[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,k.DEBUG],t)),this._logHandler.apply(this,S([this,k.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,k.VERBOSE],t)),this._logHandler.apply(this,S([this,k.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,k.INFO],t)),this._logHandler.apply(this,S([this,k.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,k.WARN],t)),this._logHandler.apply(this,S([this,k.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,S([this,k.ERROR],t)),this._logHandler.apply(this,S([this,k.ERROR],t))},t}();function V(t){D.forEach((function(e){e.setLogLevel(t)}))}var j,U=((P={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",P["bad-app-name"]="Illegal App name: '{$appName}",P["duplicate-app"]="Firebase App named '{$appName}' already exists",P["app-deleted"]="Firebase App named '{$appName}' already deleted",P["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",P["invalid-log-argument"]="First argument to `onLog` must be null or a function.",P),F=new v("app","Firebase",U),q="@firebase/app",G="[DEFAULT]",B=((j={})["@firebase/app"]="fire-core",j["@firebase/analytics"]="fire-analytics",j["@firebase/auth"]="fire-auth",j["@firebase/database"]="fire-rtdb",j["@firebase/functions"]="fire-fn",j["@firebase/installations"]="fire-iid",j["@firebase/messaging"]="fire-fcm",j["@firebase/performance"]="fire-perf",j["@firebase/remote-config"]="fire-rc",j["@firebase/storage"]="fire-gcs",j["@firebase/firestore"]="fire-fst",j["fire-js"]="fire-js",j["firebase-wrapper"]="fire-js-all",j),z=new M("@firebase/app"),H=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=h(void 0,t),this.container=new N(e.name),this._addComponent(new E("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=G),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=G),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){z.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw F.create("app-deleted",{appName:this.name_})},t}();H.prototype.name&&H.prototype.options||H.prototype.delete||console.log("dc");
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
function K(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=G);var s=o.name;if("string"!=typeof s||!s)throw F.create("bad-app-name",{appName:String(s)});if(g(e,s))throw F.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=B[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void z.warn(u.join(" "))}o(new E(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:V,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw F.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=C[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:k[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=D;r<i.length;r++)n(i[r])}
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!g(e,t=t||G))throw F.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return z.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw F.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&h(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var f=c[u];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var X=function t(){var e=K(H);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){h(e,t)},createSubscribe:b,ErrorFactory:v,deepExtend:h}),e}(),Y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var W=self.firebase.SDK_VERSION;W&&W.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Q=X.initializeApp;X.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p()&&z.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Q.apply(void 0,t)};var J,$,Z=X;(J=Z).INTERNAL.registerComponent(new E("platform-logger",(function(t){return new Y(t)}),"PRIVATE")),J.registerVersion(q,"0.6.15",$),J.registerVersion("fire-js","");
/**
  * @license
  * Copyright 2018 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
Z.registerVersion("firebase","8.2.10","app"),function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=r.setTimeout;n.prototype.c=function(t){s(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Qa(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function f(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==l(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++g)}var m="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var _=Date.now;function T(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function A(t){return t}function N(t,e,n){this.code=O+t,this.message=e||D[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new N(e.substring(O.length),t.message,t.serverResponse):null}T(N,Error),N.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},N.prototype.toJSON=function(){return this.w()};var k,O="auth/",D={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function V(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}k=C("__EID__")?"__EID__":void 0,T(R,Error),R.prototype.name="CustomError",T(L,R),L.prototype.name="AssertionError",V.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new V((function(){return new G}),(function(t){t.reset()}));function q(){var t=Ie,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},X=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=B(t,e)}function W(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function J(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var ft=a.navigator;if(ft){var lt=ft.userAgent;if(lt){tt=lt;break t}}tt=""}function pt(t){return ct(tt,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function yt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===Tt&&e||"",this.b=_t}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===_t?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,_t={},Tt={};function At(){if(void 0===Et){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:A,createScript:A,createScriptURL:A})}catch(t){a.console&&a.console.error(t.message)}Et=t}else Et=t}return Et}function Nt(t,e){this.a=e===Pt?t:""}function St(t){return t instanceof Nt&&t.constructor===Nt?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Dt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=At();return new Nt(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(Ot,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,Dt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Ct(t,e){this.a=e===Ut?t:""}function xt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Vt(t){if(t instanceof Ct)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Ct(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Rt.test(e[1])?new Ct(t,Ut):null}return t}function jt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Ut))}var Ut={},Ft=new Ct("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Gt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Gt={};function Bt(t,e,n,r){return t=t instanceof Ct?t:jt(t),e=e||a,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=f;var Xt,Yt,Wt=pt("Opera"),Qt=pt("Trident")||pt("MSIE"),Jt=pt("Edge"),$t=Jt||Qt,Zt=pt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!pt("Edge"))&&!(pt("Trident")||pt("MSIE"))&&!pt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!pt("Edge");function ee(){var t=a.document;return t?t.documentMode:void 0}t:{var ne="",re=(Yt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Yt):Jt?/Edge\/([\d\.]+)/.exec(Yt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yt):te?/WebKit\/(\S+)/.exec(Yt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Yt):void 0);if(re&&(ne=re?re[1]:""),Qt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Xt=String(ie);break t}}Xt=ne}var oe,se={};function ae(t){return function(t,e){var n=se;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Xt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(a.document&&Qt){var ue=ee();oe=ue||(parseInt(Xt,10)||void 0)}else oe=void 0;var ce=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Yt){}var he=!Qt||9<=Number(ce);function fe(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ve.hasOwnProperty(n)?t.setAttribute(ve[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var pe,de,ve={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ye(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}z(s?$(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout((function(){throw t}),0)}function be(t,e){de||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);de=function(){t.then(Ee)}}else de=function(){var t=Ee;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!pt("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(pe||(pe=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!pt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!pt("Trident")&&!pt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),pe(t)):a.setImmediate(t)}}(),we||(de(),we=!0),Ie.add(t,e)}var we=!1,Ie=new U;function Ee(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){ge(t)}j(F,t)}we=!1}function _e(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Ve(n,Ae,t)}),(function(t){if(!(t instanceof ze))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ve(n,Ne,t)}))}catch(t){Ve(this,Ne,t)}}var Te=0,Ae=2,Ne=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new V((function(){return new Se}),(function(t){t.reset()}));function Oe(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof _e)return t;var e=new _e(f);return Ve(e,Ae,t),e}function Pe(t){return new _e((function(e,n){n(t)}))}function Ce(t,e,n){je(t,e,n,null)||be(E(e,t))}function xe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function Re(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Te&&1==r?Re(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Fe(n),qe(n,i,Ne,e)))}t.c=null}else Ve(t,Ne,e)}function Le(t,e){t.b||t.a!=Ae&&t.a!=Ne||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Me(t,e,n,r){var i=Oe(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ze?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Le(t,i),i.a}function Ve(t,e,n){t.a==Te&&(t===n&&(e=Ne,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=Ne||n instanceof ze||function(t,e){t.g=!0,be((function(){t.g&&Be.call(null,e)}))}(t,n)))}function je(t,e,n,r){if(t instanceof _e)return Le(t,Oe(e||f,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,be(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ne&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ge(e,n,r);else try{e.c?e.g.call(e.f):Ge(e,n,r)}catch(t){Be.call(null,t)}j(ke,e)}function Ge(t,e,n){e==Ae?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Me(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(e=_e.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,Le(this,t),this},e.o=function(t,e){return Me(this,null,t,e)},e.cancel=function(t){if(this.a==Te){var e=new ze(t);be((function(){Re(this,e)}),this)}},e.$c=function(t){this.a=Te,Ve(this,Ae,t)},e.ad=function(t){this.a=Te,Ve(this,Ne,t)},e.gc=function(){for(var t;t=Fe(this);)qe(this,t,this.a,this.i);this.h=!1};var Be=ge;function ze(t){R.call(this,t)}function He(){0!=Ke&&(Xe[y(this)]=this),this.xa=this.xa,this.pa=this.pa}T(ze,R),ze.prototype.name="cancel";var Ke=0,Xe={};function Ye(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ke)){var e=y(t);if(0!=Ke&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Xe[e]}}He.prototype.xa=!1,He.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Qe=!Qt||9<=Number(ce),Je=Qt&&!ae("9"),$e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",f,e),a.removeEventListener("test",f,e)}catch(t){}return t}();function Ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function tn(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:en[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ze.prototype.preventDefault=function(){this.defaultPrevented=!0},T(tn,Ze);var en=We({2:"touch",3:"pen",4:"mouse"});tn.prototype.preventDefault=function(){tn.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Je)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},tn.prototype.g=function(){return this.a};var nn="closure_listenable_"+(1e6*Math.random()|0),rn=0;function on(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++rn,this.va=this.Pa=!1}function sn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function un(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(sn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function cn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=cn(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new on(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var hn="closure_lm_"+(1e6*Math.random()|0),fn={};function ln(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=_n(n),t&&t[nn]?An(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!1,r,i)}function pn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=In(t);if(a||(t[hn]=a=new an(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=wn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)$e||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=_n(n),t&&t[nn]?Nn(t,e,n,v(r)?!!r.capture:!!r,i):pn(t,e,n,!0,r,i)}function vn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=_n(n),t&&t[nn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=cn(o=t.a[e],n,r,i))&&(sn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=In(t))&&(e=t.a[e.toString()],t=-1,e&&(t=cn(e,n,r,i)),(n=-1<t?e[t]:null)&&yn(n))}function yn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[nn])un(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=In(e))?(un(n,t),0==n.b&&(n.src=null,e[hn]=null)):sn(t)}}}function mn(t){return t in fn?fn[t]:fn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=In(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=bn(o,r),i=i&&!1!==o)}return i}function bn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&yn(t),n.call(r,e)}function wn(t,e){if(t.va)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new tn(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return bn(t,new tn(e,this))}function In(t){return(t=t[hn])instanceof an?t:null}var En="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return d(t)?t:(t[En]||(t[En]=function(e){return t.handleEvent(e)}),t[En])}function Tn(){He.call(this),this.v=new an(this),this.ac=this,this.gb=null}function An(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Nn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&un(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(d(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function On(t){var e=null;return new _e((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Pn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function xn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(Tn,He),Tn.prototype[nn]=!0,Tn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){vn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new Ze(t,n);else if(t instanceof Ze)t.target=t.target||n;else{var i=t;gt(t=new Ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Sn(s,r,!0,t)&&i}if(i=Sn(s=t.b=n,r,!0,t)&&i,i=Sn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(s=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)sn(n[r]);delete e.a[t],e.b--}}this.gb=null},(e=Cn.prototype).W=function(){xn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.Y=function(){return xn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},e.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ln=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Mn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Mn?(this.i=void 0!==e?e:t.i,Vn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Un(this,ir(t.b)),this.h=t.h):t&&(n=String(t).match(Ln))?(this.i=!!e,Vn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),jn(this,n[4]),this.f=zn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!e,this.b=new $n(null,this.i))}function Vn(t,e,n){t.c=n?zn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof $n?(t.b=e,function(t,e){e&&!t.f&&(Zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(er(this,e),rr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Hn(e,Qn)),t.b=new $n(e,t.i))}function Fn(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Gn(t){return t instanceof Mn?new Mn(t):new Mn(t,void 0)}function Bn(t,e,n,r){var i=new Mn(null,void 0);return t&&Vn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Hn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Kn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Mn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Hn(e,Xn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Hn(e,Xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Hn(n,"/"==n.charAt(0)?Wn:Yn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Hn(n,Jn)),t.join("")},Mn.prototype.resolve=function(t){var e=new Mn(this),n=!!t.c;n?Vn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,ir(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Xn=/[#\/\?@]/g,Yn=/[#\?:]/g,Wn=/[#\?]/g,Qn=/[#\?@]/g,Jn=/#/g;function $n(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tr(t){var e=Pn(t);if(void 0===e)throw Error("Keys are undefined");var n=new $n(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?rr(n,i,o):n.add(i,o)}return n}function er(t,e){Zn(t),e=or(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&xn(t)))}function nr(t,e){return Zn(t),e=or(t,e),Rn(t.a.b,e)}function rr(t,e,n){er(t,e),0<n.length&&(t.c=null,t.a.set(or(t,e),$(n)),t.b+=n.length)}function ir(t){var e=new $n;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function or(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function sr(t){var e=[];return ur(new ar,t,e),e.join("")}function ar(){}function ur(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ur(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),fr(r,n),n.push(":"),ur(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":fr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(e=$n.prototype).add=function(t,e){Zn(this),this.c=null,t=or(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Zn(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.Y=function(){Zn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.W=function(t){Zn(this);var e=[];if("string"==typeof t)nr(this,t)&&(e=J(e,this.a.get(or(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},e.set=function(t,e){return Zn(this),this.c=null,nr(this,t=or(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var cr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},hr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function fr(t,e){e.push('"',t.replace(hr,(function(t){var e=cr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),cr[t]=e),e})),'"')}function lr(){var t=Cr();return Qt&&!!ce&&11==ce||/Edge\/\d+/.test(t)}function pr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||a.window;var n="about:blank";t&&(n=xt(Vt(t)||Ft)),e.location.href=n}function vr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<vr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function yr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||a.window;try{t.close()}catch(t){}}function gr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Or(Cr())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Vt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((pt("iPhone")&&!pt("iPod")&&!pt("iPad")||pt("iPad")||pt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:jt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=xt(e),s&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=At())?r.createHTML(t):t,null,Gt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wr=/^[^@]+@[^@]+$/;function Ir(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw vn(window,"load",t),e}))}function Er(t){return t=t||Cr(),!("file:"!==Vr()&&"ionic:"!==Vr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Ar(){return Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Z.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Nr(){var t=Ar();return"ReactNative"===t||"Node"===t}var Sr="Firefox",kr="Chrome";function Or(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Sr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Ar())?r=Or(i=Cr()):"Worker"===r&&(r=Or(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function xr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Rr(){try{var t=a.localStorage,e=Gr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!a.indexedDB}catch(t){return Tr()&&!!a.indexedDB}return!1}function Lr(){return(Mr()||"chrome-extension:"===Vr()||Er())&&!Nr()&&Rr()&&!Tr()}function Mr(){return"http:"===Vr()||"https:"===Vr()}function Vr(){return a.location&&a.location.protocol||null}function jr(t){return!yr(t=t||Cr())&&Or(t)!=Sr}function Ur(t){return void 0===t?null:sr(t)}function Fr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function qr(t){if(null!==t)return JSON.parse(t)}function Gr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Or(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Hr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=Ar(),this.b=yr(t)||"ReactNative"===e}function Kr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Yr(){return!(!xr("fireauth.oauthhelper",a)&&!xr("fireauth.iframe",a))}Hr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Mr()&&"chrome-extension:"!==Vr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Qr={};function Jr(t){Qr[t]||(Qr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var $r={};Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty($r,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==$r.abcd}catch(Yt){Wr=!1}function Zr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function ti(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Zr(t,n,e[n])}function ei(t){var e={};return ti(e,t),e}function ni(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Zr(e,n,ni(t[n]));return e}function ri(t){var e=t&&(t[ui]?"phone":null);if(!(e&&t&&t[ai]))throw new N("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",t[ai]),Zr(this,"displayName",t[oi]||null);var n=null;t[si]&&(n=new Date(t[si]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",e)}function ii(t){try{var e=new ci(t)}catch(t){e=null}return e}ri.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var oi="displayName",si="enrolledAt",ai="mfaEnrollmentId",ui="phoneInfo";function ci(t){ri.call(this,t),Zr(this,"phoneNumber",t[ui])}function hi(t){var e={},n=t[di],r=t[yi],i=t[mi];if(t=ii(t[vi]),!i||i!=li&&i!=pi&&!n||i==pi&&!r||i==fi&&!t)throw Error("Invalid checkActionCode response!");i==pi?(e[bi]=n||null,e[Ii]=n||null,e[gi]=r):(e[bi]=r||null,e[Ii]=r||null,e[gi]=n||null),e[wi]=t||null,Zr(this,_i,i),Zr(this,Ei,ni(e))}T(ci,ri),ci.prototype.w=function(){var t=ci.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var fi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",pi="VERIFY_AND_CHANGE_EMAIL",di="email",vi="mfaInfo",yi="newEmail",mi="requestType",gi="email",bi="fromEmail",wi="multiFactorInfo",Ii="previousEmail",Ei="data",_i="operation";function Ti(t){var e=qn(t=Gn(t),Ai)||null,n=qn(t,Ni)||null,r=qn(t,Oi)||null;if(r=r&&Pi[r]||null,!e||!n||!r)throw new N("argument-error",Ai+", "+Ni+"and "+Oi+" are required in a valid action code URL.");ti(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Si)||null,languageCode:qn(t,ki)||null,tenantId:qn(t,Di)||null})}var Ai="apiKey",Ni="oobCode",Si="continueUrl",ki="languageCode",Oi="mode",Di="tenantId",Pi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:fi,signIn:li,verifyAndChangeEmail:pi,verifyEmail:"VERIFY_EMAIL"};function Ci(t){try{return new Ti(t)}catch(t){return null}}function xi(t){var e=t[ji];if(void 0===e)throw new N("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new N("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ri];if(n&&"object"==typeof n){e=n[qi];var r=n[Ui];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new N("argument-error",Ui+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new N("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new N("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new N("missing-android-pkg-name")}}else if(void 0!==n)throw new N("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(e=t[Vi])&&"object"==typeof e){if("string"==typeof(e=e[Gi])&&e.length)this.f=e;else if(void 0!==e)throw new N("argument-error",Gi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new N("argument-error",Vi+" property must be a non null object when specified.");if(void 0!==(e=t[Mi])&&"boolean"!=typeof e)throw new N("argument-error",Mi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Li])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new N("argument-error",Li+" property must be a non empty string when specified.");this.i=t||null}var Ri="android",Li="dynamicLinkDomain",Mi="handleCodeInApp",Vi="iOS",ji="url",Ui="installApp",Fi="minimumVersion",qi="packageName",Gi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var zi=null;function Hi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=zi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!zi){zi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===zi[o]&&(zi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Ki(t){var e=Yi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Xi(t){try{return new Ki(t)}catch(t){return null}}function Yi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Hi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Ji={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function $i(t){for(var e in Ji)if(Ji[e].fa==t)return Ji[e];return null}function Zi(t){var e={};e["facebook.com"]=io,e["google.com"]=so,e["github.com"]=oo,e["twitter.com"]=ao;var n=t&&t[eo];try{if(n)return e[n]?new e[n](t):new ro(t);if(void 0!==t[to])return new no(t)}catch(t){}return null}var to="idToken",eo="providerId";function no(t){var e=t[eo];if(!e&&t[to]){var n=Xi(t[to]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Zr(this,"providerId",e),Zr(this,"isNewUser",n)}function ro(t){no.call(this,t),Zr(this,"profile",ni((t=qr(t.rawUserInfo||"{}"))||{}))}function io(t){if(ro.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(ro.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function so(t){if(ro.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(ro.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",t.screenName||null)}function uo(t){var e=Gn(t),n=qn(e,"link"),r=qn(Gn(n),"link");return e=qn(e,"deep_link_id"),qn(Gn(e),"link")||e||r||n||t}function co(t,e){if(!t&&!e)throw new N("internal-error","Internal assert: no raw session string available");if(t&&e)throw new N("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ho:fo}T(ro,no),T(io,ro),T(oo,ro),T(so,ro),T(ao,ro);var ho="enroll",fo="signin";function lo(){}function po(t,e){return t.then((function(t){if(t[na]){var n=Xi(t[na]);if(!n||e!=n.i)throw new N("user-mismatch");return t}throw new N("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==O+"user-not-found"?new N("user-mismatch"):t}))}function vo(t,e){if(!e)throw new N("internal-error","failed to construct a credential");this.a=e,Zr(this,"providerId",t),Zr(this,"signInMethod",t)}function yo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function mo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new vo(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Zr(this,"idToken",e.idToken),e.accessToken&&Zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new N("internal-error","failed to construct a credential");Zr(this,"accessToken",e.oauthToken),Zr(this,"secret",e.oauthTokenSecret)}Zr(this,"providerId",t),Zr(this,"signInMethod",n)}function bo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:tr(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function wo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function Io(t,e){this.Qc=e||[],ti(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=($i(t)||{}).Ja||null,this.ob=null}function Eo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new N("argument-error",'SAML provider IDs must be prefixed with "saml."');Io.call(this,t,[])}function _o(t){Io.call(this,t,Qi),this.a=[]}function To(){_o.call(this,"facebook.com")}function Ao(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function No(){_o.call(this,"github.com")}function So(t){if(!t)throw new N("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new No).credential({accessToken:e})}function ko(){_o.call(this,"google.com"),this.Ca("profile")}function Oo(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new ko).credential({idToken:n,accessToken:e})}function Do(){Io.call(this,"twitter.com",Wi)}function Po(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new N("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Ro(){ti(this,{providerId:"password",isOAuthProvider:!1})}function Lo(t,e){if(!(e=Mo(e)))throw new N("argument-error","Invalid email link!");return new Co(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Mo(t){return(t=Ci(t=uo(t)))&&t.operation===li?t:null}function Vo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new N("internal-error");this.a=t,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Vo(e)}return null}function Uo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Fo(t){try{this.a=t||Z.auth()}catch(t){throw new N("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}ti(this,{providerId:"phone",isOAuthProvider:!1})}function qo(t,e){if(!t)throw new N("missing-verification-id");if(!e)throw new N("missing-verification-code");return new Vo({eb:t,cb:e})}function Go(t){if(t.temporaryProof&&t.phoneNumber)return new Vo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Oo(o,n);case"facebook.com":return Ao(n);case"github.com":return So(n);case"twitter.com":return Po(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new vo(e,s):new go(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Bo(t){if(!t.isOAuthProvider)throw new N("invalid-oauth-provider")}function zo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new N("invalid-auth-event");if(this.g&&this.a)throw new N("invalid-auth-event");if(this.g&&!this.f)throw new N("invalid-auth-event")}function Ho(t){return(t=t||{}).type?new zo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Ko(){this.b=null,this.a=[]}co.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},co.prototype.w=function(){return this.type==ho?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},vo.prototype.ka=function(t){return Ta(t,yo(this))},vo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Aa(t,n)},vo.prototype.c=function(t,e){return po(Na(t,yo(this)),e)},vo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(t){return Ta(t,bo(this))},go.prototype.b=function(t,e){var n=bo(this);return n.idToken=e,Aa(t,n)},go.prototype.c=function(t,e){return po(Na(t,bo(this)),e)},go.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Io.prototype.Ka=function(t){return this.Ib=yt(t),this},T(Eo,Io),T(_o,Io),_o.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},_o.prototype.Qb=function(){return $(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new N("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},T(To,_o),Zr(To,"PROVIDER_ID","facebook.com"),Zr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(No,_o),Zr(No,"PROVIDER_ID","github.com"),Zr(No,"GITHUB_SIGN_IN_METHOD","github.com"),T(ko,_o),Zr(ko,"PROVIDER_ID","google.com"),Zr(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Do,Io),Zr(Do,"PROVIDER_ID","twitter.com"),Zr(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?au(t,Ra,{email:this.a,oobCode:this.f}):au(t,nu,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?au(t,La,{idToken:e,email:this.a,oobCode:this.f}):au(t,Ya,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return po(this.ka(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},ti(Ro,{PROVIDER_ID:"password"}),ti(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),ti(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Vo.prototype.ka=function(t){return t.fb(Uo(this))},Vo.prototype.b=function(t,e){var n=Uo(this);return n.idToken=e,au(t,iu,n)},Vo.prototype.c=function(t,e){var n=Uo(this);return n.operation="REAUTH",po(t=au(t,ou,n),e)},Vo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Fo.prototype.fb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new N("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==ho?i.Ha().then((function(t){return function(t,e){return au(t,Qa,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==fo?i.Ha().then((function(e){return function(t,e){return au(t,Ja,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return au(t,Ka,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new N("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},ti(Fo,{PROVIDER_ID:"phone"}),ti(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},zo.prototype.T=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Xo,Yo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=Gn(t);t=r.a,"chrome-extension"==(r=r.c)?n=zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",N.call(this,e,n)}function Qo(t,e,n){N.call(this,t,n),(t=e||{}).Jb&&Zr(this,"email",t.Jb),t.ea&&Zr(this,"phoneNumber",t.ea),t.credential&&Zr(this,"credential",t.credential),t.Zb&&Zr(this,"tenantId",t.Zb)}function Jo(t){if(t.code){var e=t.code||"";0==e.indexOf(O)&&(e=e.substring(O.length));var n={credential:Go(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new N(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function $o(){}function Zo(t){return t.c||(t.c=t.b())}function ts(){}function es(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ns(){}function rs(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function is(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function os(t,e,n){this.reset(t,e,n,void 0,void 0)}T(Wo,N),T(Qo,N),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,T(ts,$o),ts.prototype.a=function(){var t=es(this);return t?new ActiveXObject(t):new XMLHttpRequest},ts.prototype.b=function(){var t={};return es(this)&&(t[0]=!0,t[1]=!0),t},Xo=new ts,T(ns,$o),ns.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new rs;throw Error("Unsupported browser")},ns.prototype.b=function(){return{}},(e=rs.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,is(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",is(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,is(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},os.prototype.a=null;function ss(t){this.f=t,this.b=this.c=this.a=null}function as(t,e){this.name=t,this.value=e}os.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||_(),delete this.a},as.prototype.toString=function(){return this.name};var us=new as("SEVERE",1e3),cs=new as("WARNING",900),hs=new as("CONFIG",700),fs=new as("FINE",500);function ls(t){return t.c?t.c:t.a?ls(t.a):(M("Root logger has no level set."),null)}ss.prototype.log=function(t,e,n){if(t.value>=ls(this).value)for(d(e)&&(e=e()),t=new os(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ps={},ds=null;function vs(t){var e;if(ds||(ds=new ss(""),ps[""]=ds,ds.c=hs),!(e=ps[t])){e=new ss(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=vs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ps[t]=e}return e}function ys(t,e){t&&t.log(fs,e,void 0)}function ms(t){this.f=t}function gs(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=vs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}T(ms,$o),ms.prototype.a=function(){return new gs(this.f)},ms.prototype.b=function(t){return function(){return t}}({}),T(gs,Tn);var bs=0;function ws(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function Is(t){t.readyState=4,t.g=null,t.c=null,t.m=null,Es(t)}function Es(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function _s(t){Tn.call(this),this.headers=new Cn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ts,this.u=this.S=!1}(e=gs.prototype).open=function(t,e){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,Es(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Is(this)),this.readyState=bs},e.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Es(this)),this.a&&(this.readyState=3,Es(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ws(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},e.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Is(this):Es(this),3==this.readyState&&ws(this)}},e.tc=function(t){this.a&&(this.response=this.responseText=t,Is(this))},e.sc=function(t){this.a&&(this.response=t,Is(this))},e.Ua=function(t){var e=this.i;e&&e.log(cs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&Is(this)},e.setRequestHeader=function(t,e){this.l.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(cs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(cs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(gs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),T(_s,Tn);var Ts="";_s.prototype.b=vs("goog.net.XhrIo");var As=/^https?$/i,Ns=["POST","PUT"];function Ss(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Xo.a(),t.C=t.D?Zo(t.D):Zo(Xo),t.a.onreadystatechange=I(t.Vb,t);try{ys(t.b,Ms(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return ys(t.b,Ms(t,"Error opening Xhr: "+e.message)),void Os(t,e)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)z(t,e,void 0);else for(var n=Pn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ks,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Y(Ns,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{xs(t),0<t.g&&(t.u=function(t){return Qt&&ae(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ys(t.b,Ms(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),ys(t.b,Ms(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ys(t.b,Ms(t,"Send error: "+e.message)),Os(t,e)}}function ks(t){return"content-type"==t.toLowerCase()}function Os(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ds(t),Cs(t)}function Ds(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ps(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Rs(t)&&2==Ls(t))ys(t.b,Ms(t,"Local request error detected and ignored"));else if(t.i&&4==Rs(t))kn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Rs(t)){ys(t.b,Ms(t,"Request complete")),t.c=!1;try{var e,n=Ls(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Ln)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!As.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Rs(t)?t.a.statusText:""}catch(e){ys(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ls(t)+"]",Ds(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){xs(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(us,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function xs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Rs(t){return t.a?t.a.readyState:0}function Ls(t){try{return 2<Rs(t)?t.a.status:-1}catch(t){return-1}}function Ms(t,e){return e+" ["+t.R+" "+t.l+" "+Ls(t)+"]"}function Vs(t){var e=Ys;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function js(t,e,n){t.a=!0,t.c=n,t.f=!e,Gs(t)}function Us(t){if(t.a){if(!t.v)throw new Bs(t);t.v=!1}}function Fs(t,e,n,r){t.g.push([e,n,r]),t.a&&Gs(t)}function qs(t){return X(t.g,(function(t){return d(t[1])}))}function Gs(t){if(t.h&&t.a&&qs(t)){var e=t.h,n=Ks[e];n&&(a.clearTimeout(n.a),delete Ks[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,qs(t)||(n=!0)}}t.c=e,r&&(u=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Vs?(Fs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Hs(e),Ks[e.a]=e,t.h=e.a)}function Bs(){R.call(this)}function zs(){R.call(this)}function Hs(t){this.a=a.setTimeout(I(this.c,this),0),this.b=t}(e=_s.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ys(this.b,Ms(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ys(this.b,Ms(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),_s.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?Ps(this):this.Jc())},e.Jc=function(){Ps(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ts:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(us,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ys(this.b,"Can not get response: "+t.message),null}},Vs.prototype.cancel=function(t){if(this.a)this.c instanceof Vs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new zs(this),Us(this),js(this,!1,t))}},Vs.prototype.m=function(t,e){this.i=!1,js(this,t,e)},Vs.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Fs(this,r,(function(t){t instanceof zs?o.cancel():i(t)})),o.then(t,e,n)},Vs.prototype.$goog_Thenable=!0,T(Bs,R),Bs.prototype.message="Deferred has already fired",Bs.prototype.name="AlreadyCalledError",T(zs,R),zs.prototype.message="Deferred was canceled",zs.prototype.name="CanceledError",Hs.prototype.c=function(){throw delete Ks[this.a],this.b};var Ks={};function Xs(t){var e={},n=e.document||document,r=St(t).toString(),i=me(document,"SCRIPT"),o={Wb:i,Ma:void 0},s=new Vs(o),u=null,f=null!=e.timeout?e.timeout:5e3;return 0<f&&(u=window.setTimeout((function(){Ws(i,!0);var t=new $s(Js,"Timeout reached for loading script "+r);Us(s),js(s,!1,t)}),f),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ws(i,e.xd||!1,u),Us(s),js(s,!0,null))},i.onerror=function(){Ws(i,!0,u);var t=new $s(Qs,"Error while loading script "+r);Us(s),js(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=St(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=h(e.document):(null===c&&(c=h(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ys(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Ws(t,!0,this.Ma)}}function Ws(t,e,n){null!=n&&a.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Qs=0,Js=1;function $s(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Zs(t){this.f=t}function ta(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ra,this.g=yt(t.secureTokenHeaders||ia),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||oa,this.a=yt(t.firebaseHeaders||sa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Ar(),!(n=a.XMLHttpRequest||n&&Z.INTERNAL.node&&Z.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new N("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new ms(self):Nr()?this.f=new Zs(n):this.f=new ns,this.b=null}T($s,R),T(Zs,$o),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Hr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Hr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ua(t,e){e&&(t.l=ca("https://securetoken.googleapis.com/v1/token",e),t.h=ca("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ca("https://identitytoolkit.googleapis.com/v2/",e))}function ca(t,e){return t=Gn(t),e=Gn(e.url),t.f=t.a+t.f,Vn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function ha(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function fa(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t=Or(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&ce&&!(9<ce))})()||Tr()?t=I(t.u,t):(ea||(ea=new _e((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{a[pa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fs(t,null,e,void 0)}(Xs(kt(la,{onload:pa})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,s)}ta.prototype.T=function(){return this.b},ta.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new N("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new _s(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}An(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ys(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Nn(s,"ready",(function(){u&&clearTimeout(u),Ye(this)})),Nn(s,"timeout",(function(){u&&clearTimeout(u),Ye(this),e&&e(null)})),Ss(s,t,n,r,i)};var la=new wt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),pa="__fcb"+Math.floor(1e6*Math.random()).toString();function da(t,e,n,r,i,o,s){var a=Gn(e+n);Fn(a,"key",t.c),s&&Fn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Fn(a,c,i[c]);return new _e((function(e,n){fa(t,a.toString(),(function(t){t?t.error?n(cu(t,o||{})):e(t):n(new N("network-request-failed"))}),r,u?void 0:sr(Fr(i)),t.a,t.v.get())}))}function va(t){if("string"!=typeof(t=t.email)||!wr.test(t))throw new N("invalid-email")}function ya(t){"email"in t&&va(t)}function ma(t){if(!t[na]){if(t.mfaPendingCredential)throw new N("multi-factor-auth-required",null,yt(t));throw new N("internal-error")}}function ga(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new N("internal-error")}else{if(!t.sessionInfo)throw new N("missing-verification-id");if(!t.code)throw new N("missing-verification-code")}}ta.prototype.s=function(t,e,n,r,i){var o=this;ea.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.zb=function(){return au(this,Wa,{})},ta.prototype.Bb=function(t,e){return au(this,Xa,{idToken:t,email:e})},ta.prototype.Cb=function(t,e){return au(this,Ya,{idToken:t,password:e})};var ba={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function wa(t){if(!t.phoneVerificationInfo)throw new N("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new N("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new N("missing-verification-code")}function Ia(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new N("internal-error")}function Ea(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(nr(t=new $n(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function _a(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Jo(t)):t.errorMessage&&(e=uu(t.errorMessage)),e)throw e;ma(t)}function Ta(t,e){return e.returnIdpCredential=!0,au(t,$a,e)}function Aa(t,e){return e.returnIdpCredential=!0,au(t,tu,e)}function Na(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,au(t,Za,e)}function Sa(t){if(!t.oobCode)throw new N("invalid-action-code")}(e=ta.prototype).Db=function(t,e){var n={idToken:t},r=[];return dt(ba,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,Xa,n)},e.vb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),au(this,Ga,t)},e.wb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),au(this,Ua,t)},e.ub=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),au(this,Fa,t)},e.Eb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),au(this,qa,t)},e.fb=function(t){return au(this,ru,t)},e.nb=function(t,e){return au(this,Ha,{oobCode:t,newPassword:e})},e.Ra=function(t){return au(this,Oa,{oobCode:t})},e.jb=function(t){return au(this,ka,{oobCode:t})};var ka={endpoint:"setAccountInfo",A:Sa,Z:"email",B:!0},Oa={endpoint:"resetPassword",A:Sa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new N("internal-error")},B:!0},Da={endpoint:"signupNewUser",A:function(t){if(va(t),!t.password)throw new N("weak-password")},G:ma,V:!0,B:!0},Pa={endpoint:"createAuthUri",B:!0},Ca={endpoint:"deleteAccount",N:["idToken"]},xa={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new N("internal-error")}},Ra={endpoint:"emailLinkSignin",N:["email","oobCode"],A:va,G:ma,V:!0,B:!0},La={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:va,G:ma,V:!0},Ma={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:wa,G:ma,B:!0,Na:!0},Va={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:wa,G:ma,B:!0,Na:!0},ja={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new N("internal-error");va(t)},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},qa={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new N("internal-error")},Z:"email",B:!0},Ga={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new N("internal-error");va(t)},Z:"email",B:!0},Ba={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},za={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new N("internal-error")}},Ha={endpoint:"resetPassword",A:Sa,Z:"email",B:!0},Ka={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Xa={endpoint:"setAccountInfo",N:["idToken"],A:ya,V:!0},Ya={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ya(t),!t.password)throw new N("weak-password")},G:ma,V:!0},Wa={endpoint:"signupNewUser",G:ma,V:!0,B:!0},Qa={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new N("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new N("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},Ja={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new N("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new N("internal-error")},B:!0,Na:!0},$a={endpoint:"verifyAssertion",A:Ia,Ya:Ea,G:_a,V:!0,B:!0},Za={endpoint:"verifyAssertion",A:Ia,Ya:Ea,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new N("user-not-found");if(t.errorMessage)throw uu(t.errorMessage);ma(t)},V:!0,B:!0},tu={endpoint:"verifyAssertion",A:function(t){if(Ia(t),!t.idToken)throw new N("internal-error")},Ya:Ea,G:_a,V:!0},eu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new N("invalid-custom-token")},G:ma,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(t){if(va(t),!t.password)throw new N("wrong-password")},G:ma,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:ga,G:ma,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new N("internal-error");ga(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Jo(t);ma(t)}},ou={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ga,G:ma,B:!0},su={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[na]^!!t.refreshToken)throw new N("internal-error")},B:!0,Na:!0};function au(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Pe(new N("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),da(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new N("internal-error");return r[e.Z]}))}function uu(t){return cu({error:{errors:[{message:t}],code:400,message:t}})}function cu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new N(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new N(r[i],e);return!e&&t&&(e=Ur(t)),new N("internal-error",e)}function hu(t){this.b=t,this.a=null,this.rb=function(t){return(du||(du=new _e((function(t,e){function n(){zr(),xr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){zr(),e(Error("Network Error"))},timeout:lu.get()})}if(xr("gapi.iframes.Iframe"))t();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){xr("gapi.load")?n():e(Error("Network Error"))},De(Xs(r=kt(fu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw du=null,t})))).then((function(){return new _e((function(e,n){xr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),pu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var fu=new wt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),lu=new Hr(3e4,6e4),pu=new Hr(5e3,15e3),du=null;function vu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Bn((t=Gn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Fn(this.a,"apiKey",this.h),Fn(this.a,"appName",this.i),this.b=null,this.c=[]}function yu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function mu(t){try{return Z.app(t).auth().Ga()}catch(t){return[]}}function gu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(t){var e=pr();return function(t){return au(t,Ba,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Gn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Gn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:br.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Wo(pr())}))}function wu(t){return t.m||(t.m=Ir().then((function(){if(!t.u){var e=t.c,n=t.i,r=mu(t.b),i=new vu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new hu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ho(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function Iu(t){return t.l||(t.C=t.c?Pr(t.c,mu(t.b)):null,t.l=new ta(t.g,C(t.i),t.C),t.f&&ua(t.l,t.f)),t.l}function Eu(t,e,n,r,i,o,s,a,u,c,h,f){return(t=new yu(t,e,n,r,i,f)).l=o,t.g=s,t.i=a,t.b=yt(u||null),t.f=c,t.yb(h).toString()}function _u(t){if(this.a=t||Z.INTERNAL.reactNative&&Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new N("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Tu(t){this.b=t,this.a={},this.f=I(this.c,this)}vu.prototype.toString=function(){return this.f?Fn(this.a,"v",this.f):er(this.a.b,"v"),this.b?Fn(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Fn(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},yu.prototype.yb=function(t){return this.h=t,this},yu.prototype.toString=function(){if(this.v){var t=Gn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Fn(t,"apiKey",this.s),Fn(t,"appName",this.c),Fn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Z.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Fn(t,"providerId",this.a.providerId),e=Fr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=yt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Fn(t,"customParameters",Ur(e))}if("function"==typeof this.a.Qb&&((n=this.a.Qb()).length&&Fn(t,"scopes",n.join(","))),this.l?Fn(t,"redirectUrl",this.l):er(t.b,"redirectUrl"),this.g?Fn(t,"eventId",this.g):er(t.b,"eventId"),this.i?Fn(t,"v",this.i):er(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!qn(t,s)&&Fn(t,s,this.b[s]);return this.h?Fn(t,"tid",this.h):er(t.b,"tid"),this.f?Fn(t,"eid",this.f):er(t.b,"eid"),(s=mu(this.c)).length&&Fn(t,"fw",s.join(",")),t.toString()},(e=gu.prototype).Ob=function(t,e,n){var r=new N("popup-closed-by-user"),i=new N("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return wu(t).then((function(){return function(t,e){return t.rb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){On(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return On(n).then((function(){e(r)}))}))},e.Xb=function(){var t=Cr();return!jr(t)&&!Br(t)},e.Tb=function(){return!1},e.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Pe(new N("popup-blocked"));if(s&&!jr())return this.ma().o((function(e){mr(t),i(e)})),r(),De();this.a||(this.a=bu(Iu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){(Bo(n),s)||dr(Eu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Nb=function(t,e,n,r){this.a||(this.a=bu(Iu(this)));var i=this;return this.a.then((function(){Bo(e),dr(Eu(i.s,i.g,i.b,t,e,pr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ma=function(){var t=this;return wu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new N("network-request-failed")}))},e.$b=function(){return!0},e.Ea=function(t){this.h.push(t)},e.Sa=function(t){Q(this.h,(function(e){return e==t}))},(e=_u.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&qr(t)}))},e.set=function(t,e){return De(this.a.setItem(t,Ur(e)))},e.U=function(t){return De(this.a.removeItem(t))},e.ca=function(){},e.ia=function(){};var Au,Nu=[];function Su(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ku(t){this.a=t}function Ou(t){this.c=t,this.b=!1,this.a=[]}function Du(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Pe(Error("connection_unavailable"));var h=r?800:50,f="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){f?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),f.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:f,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),f.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[f.port2])):r(Error("connection_unavailable"))})).then((function(e){return Pu(t,c),e})).o((function(e){throw Pu(t,c),e}))}function Pu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function Cu(){if(!Mu())throw new N("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(z(Nu,(function(n){n.b==t&&(e=n)})),!e){var e=new Tu(t);Nu.push(e)}return e}(),Su(this.v,"keyChanged",(function(e,n){return qu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Su(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new Ou(new ku(e)),Du(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function xu(t){return new _e((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return xu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ru(t){return t.i||(t.i=xu(t)),t.i}function Lu(t,e){var n=0;return new _e((function r(i,o){Ru(t).then(e).then(i).o((function(e){if(!(3<++n))return Ru(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Mu(){try{return!!a.indexedDB}catch(t){return!1}}function Vu(t){return t.objectStore("firebaseLocalStorage")}function ju(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Uu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Fu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Du(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function qu(t){return Ru(t).then((function(t){var e=Vu(ju(t,!1));return e.getAll?Uu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=vr(t.c,n),t.c=n}return r}))}function Gu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Mu()){var t=Gr(),r="__sak"+t;return Au||(Au=new Cu),(n=Au).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function zu(){this.a={},this.type="inMemory"}function Hu(){if(!function(){var t="Node"==Ar();if(!(t=Ku()||t&&Z.INTERNAL.node&&Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ar())throw new N("internal-error","The LocalStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Ku()||Z.INTERNAL.node.localStorage,this.type="localStorage"}function Ku(){try{var t=a.localStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Xu(){this.type="nullStorage"}function Yu(){if(!function(){var t="Node"==Ar();if(!(t=Wu()||t&&Z.INTERNAL.node&&Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Ar())throw new N("internal-error","The SessionStorage compatibility library was not found.");throw new N("web-storage-unsupported")}this.a=Wu()||Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var t=a.sessionStorage,e=Gr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Qu(){var t={};t.Browser=Zu,t.Node=tc,t.ReactNative=ec,t.Worker=nc,this.a=t[Ar()]}Tu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},ku.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Ou.prototype.close=function(){for(;0<this.a.length;)Pu(this,this.a[0]);this.b=!0},(e=Cu.prototype).set=function(t,e){var n=this,r=!1;return Lu(this,(function(e){return Uu((e=Vu(ju(e,!0))).get(t))})).then((function(i){return Lu(n,(function(o){if(o=Vu(ju(o,!0)),i)return i.value=e,Uu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Uu(o.add(s))}))})).then((function(){return n.c[t]=e,Fu(n,t)})).oa((function(){r&&n.b--}))},e.get=function(t){return Lu(this,(function(e){return Uu(Vu(ju(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.U=function(t){var e=this,n=!1;return Lu(this,(function(r){return n=!0,e.b++,Uu(Vu(ju(r,!0)).delete(t))})).then((function(){return delete e.c[t],Fu(e,t)})).oa((function(){n&&e.b--}))},e.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=qu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Gu(t),e()}(this),this.a.push(t)},e.ia=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Gu(this)},(e=Bu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.U=function(t){return this.b.then((function(e){return e.U(t)}))},e.ca=function(t){this.a.push(t)},e.ia=function(t){Q(this.a,(function(e){return e==t}))},(e=zu.prototype).get=function(t){return De(this.a[t])},e.set=function(t,e){return this.a[t]=e,De()},e.U=function(t){return delete this.a[t],De()},e.ca=function(){},e.ia=function(){},(e=Hu.prototype).get=function(t){var e=this;return De().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ca=function(t){a.window&&ln(a.window,"storage",t)},e.ia=function(t){a.window&&vn(a.window,"storage",t)},(e=Xu.prototype).get=function(){return De(null)},e.set=function(){return De()},e.U=function(){return De()},e.ca=function(){},e.ia=function(){},(e=Yu.prototype).get=function(t){var e=this;return De().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},e.ca=function(){},e.ia=function(){};var Ju,$u,Zu={F:Hu,bb:Yu},tc={F:Hu,bb:Yu},ec={F:_u,bb:Xu},nc={F:Hu,bb:Xu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var t=!(Br(Cr())||!_r()),e=jr(),n=Rr();this.m=t,this.h=e,this.l=n,this.a={},Ju||(Ju=new Qu),t=Ju;try{this.g=!lr()&&Yr()||!a.indexedDB?new t.a.F:new Bu(Tr()?new zu:new t.a.F)}catch(t){this.g=new zu,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new zu}this.v=new zu,this.f=I(this.Yb,this),this.b={}}function oc(){return $u||($u=new ic),$u}function sc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ac(t,e){return"firebase:"+t.name+(e?":"+e:"")}function uc(t,e,n){return n=ac(e,n),"local"==e.F&&(t.b[n]=null),sc(t,e.F).U(n)}function cc(t){t.c&&(clearInterval(t.c),t.c=null)}function hc(t){this.a=t,this.b=oc()}(e=ic.prototype).get=function(t,e){return sc(this,t.F).get(ac(t,e))},e.set=function(t,e,n){var r=ac(t,n),i=this,o=sc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=ac(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),vt(this.a)&&(sc(this,"local").ca(this.f),this.h||(lr()||!Yr())&&a.indexedDB||!this.l||function(t){cc(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new tn({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=ac(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(sc(this,"local").ia(this.f),cc(this))},e.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?sc(this,"local").ia(this.f):cc(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Qt&&ce&&10==ce&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,I(this.mb,this))},e.mb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var fc,lc={name:"authEvent",F:"local"};function pc(){this.a=oc()}function dc(t,e){this.b=vc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===fc&&(fc=a.Int32Array?new Int32Array(Ec):Ec),this.reset()}T(dc,(function(){this.b=-1}));for(var vc=64,yc=vc-1,mc=[],gc=0;gc<yc;gc++)mc[gc]=0;var bc=J(128,mc);function wc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],f=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var l=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&f)+(0|fc[e])|0)+(0|n[e])|0)|0,o=f,f=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+l|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+f|0,t.a[7]=t.a[7]+o|0}function Ic(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(wc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(wc(t),i=0)}}t.c=i,t.g+=n}dc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):$(this.h)};var Ec=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _c(){dc.call(this,8,Tc)}T(_c,dc);var Tc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ac(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new pc,this.g=new hc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Nc(t){return new N("invalid-cordova-configuration",t)}function Sc(t){var e=new _c;Ic(e,t),t=[];var n=8*e.g;56>e.c?Ic(e,bc,56-e.c):Ic(e,bc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(wc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function kc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Oc(t){return t.f||(t.f=t.ma().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Dc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=uo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=qr(qn(o=Gn(i),"firebaseError")||null))?S(o):null)?new zo(r.c,r.b,null,null,o,null,r.T()):new zo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kc(t,i)}))}var n=new zo("unknown",null,null,null,new N("no-auth-event")),r=!1,i=On(500).then((function(){return Dc(t).then((function(){r||kc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Yo||(Yo=new Ko),function(t){var e=Yo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=xr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Dc(t){var e=null;return function(t){return t.b.get(lc,t.a).then((function(t){return Ho(t)}))}(t.g).then((function(n){return e=n,uc((n=t.g).b,lc,n.a)})).then((function(){return e}))}function Pc(t){this.a=t,this.b=oc()}(e=Ac.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Er(void 0)?Ir().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Pe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof xr("universalLinks.subscribe",a))throw Nc("cordova-universal-links-plugin-fix is not installed");if(void 0===xr("BuildInfo.packageName",a))throw Nc("cordova-plugin-buildinfo is not installed");if("function"!=typeof xr("cordova.plugins.browsertab.openUrl",a))throw Nc("cordova-plugin-browsertab is not installed");if("function"!=typeof xr("cordova.InAppBrowser.open",a))throw Nc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new N("cordova-not-ready")}))},e.Ob=function(t,e){return e(new N("operation-not-supported-in-this-environment")),De()},e.Mb=function(){return Pe(new N("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(t,e,n,r){if(this.c)return Pe(new N("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=De().then((function(){return Bo(e),Oc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new zo(e,r,null,o,new N("no-auth-event"),null,i),u=xr("BuildInfo.packageName",a);if("string"!=typeof u)throw new N("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",a),h={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Pe(new N("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Sc(o),h.sessionId=o;var f=Eu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(lc,s.w(),e)})).then((function(){var e=xr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new N("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=xr("cordova.plugins.browsertab.openUrl",a)))throw new N("invalid-cordova-configuration");n(f)}else{if("function"!=typeof(n=xr("cordova.InAppBrowser.open",a)))throw new N("invalid-cordova-configuration");e=Cr(),t.a=n(f,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=xr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=On(2e3).then((function(){e(new N("redirect-cancelled-by-user"))})))},h=function(){Kr()&&c()},o.addEventListener("resume",c,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Dc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},e.Ea=function(t){this.b.push(t),Oc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new zo("unknown",null,null,null,new N("no-auth-event")),t(e))}))},e.Sa=function(t){Q(this.b,(function(e){return e==t}))};var Cc={name:"pendingRedirect",F:"session"};function xc(t){return uc(t.b,Cc,t.a)}function Rc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Wc,this.C=new th,this.g=new Pc(Xc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Lc(this.D,this.v,this.m,k,this.J)}function Lc(t,e,n,r,i){var o=Z.SDK_VERSION||null;return Er()?new Ac(t,e,n,o,r,i):new gu(t,e,n,o,r,i)}function Mc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Vc(t){t.a.Xb()&&Mc(t).o((function(e){var n=new zo("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)})),t.a.Tb()||Qc(t.b)}function jc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Cc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?xc(t.g).then((function(){Mc(t).o((function(e){var n=new zo("unknown",null,null,null,new N("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)}))})):Vc(t)})).o((function(){Vc(t)}))}function Uc(t,e){Q(t.h,(function(t){return t==e}))}Rc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Lc(this.D,this.v,this.m,null,this.J),this.i={}},Rc.prototype.s=function(t){if(!t)throw new N("invalid-auth-event");if(6e5<=_()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=_())),e=!0;break}}return Qc(this.b),e};var Fc=new Hr(2e3,1e4),qc=new Hr(3e4,6e4);function Gc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Bc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function zc(t,e,n,r,i){var o;return function(t){return t.b.set(Cc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Bc(e))throw new N("operation-not-supported-in-this-environment");return o=e,xc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new _e((function(){})):xc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Hc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Fc.get())}Rc.prototype.qa=function(){return this.b.qa()};var Kc={};function Xc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Yc(t,e,n,r){var i=Xc(e,n,r);return Kc[i]||(Kc[i]=new Rc(t,e,n,r)),Kc[i]}function Wc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Qc(t){t.g||(t.g=!0,Zc(t,!1,null,null))}function Jc(t){t.g&&!t.i&&Zc(t,!1,null,null)}function $c(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Pe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):$c(t,n):$c(t,{user:null}),t.f=[],t.c=[]}function th(){}function eh(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function nh(t,e){this.a=e,Zr(this,"verificationId",t)}function rh(t,e,n,r){return new Fo(t).fb(e,n).then((function(t){return new nh(t,r)}))}function ih(t){var e=Yi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new N("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");ti(this,{token:t,expirationTime:Xr(1e3*e.exp),authTime:Xr(1e3*e.auth_time),issuedAtTime:Xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function oh(t,e,n){var r=e&&e[ah];if(!r)throw new N("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=yt(e),this.g=n,this.c=new co(null,r),this.b=[];var i=this;z(e[sh]||[],(function(t){(t=ii(t))&&i.b.push(t)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Wc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Zc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Zc(t,a,e,null)})).o((function(e){Zc(t,a,null,e)}))}(this,t,e):Pe(new N("invalid-auth-event")):(Zc(this,!1,null,null),De())}else Pe(new N("invalid-auth-event"))},Wc.prototype.qa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new N("timeout");t.a&&t.a.cancel(),t.a=On(qc.get()).then((function(){t.b||(t.g=!0,Zc(t,!0,null,e))}))}(t))}))},th.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Pe(new N("invalid-auth-event"))}else Pe(new N("invalid-auth-event"))},nh.prototype.confirm=function(t){return t=qo(this.verificationId,t),this.a(t)};var sh="mfaInfo",ah="mfaPendingCredential";function uh(t,e,n,r){N.call(this,"multi-factor-auth-required",r,e),this.b=new oh(t,e,n),Zr(this,"resolver",this.b)}function ch(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new uh(e,t.serverResponse,n,t.message)}catch(t){}return null}function hh(){}function fh(t){Zr(this,"factorId",t.fa),this.a=t}function lh(t){if(fh.call(this,t),this.a.fa!=Fo.PROVIDER_ID)throw new N("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ph(t,e){for(var n in Ze.call(this,t),e)this[n]=e[n]}function dh(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[oi]=t.displayName),t.enrollmentTime&&(r[si]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ui]=t.phoneNumber);try{e=new ci(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),vh(this,n)}function vh(t,e){t.b=e,Zr(t,"enrolledFactors",e)}function yh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function mh(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Kr()||!t?De():new _e((function(n){e=function(){Kr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){mh(t,!0)})).o((function(e){t.i(e)&&mh(t,!1)}))}function gh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function bh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function wh(t,e){t.b=Xi(e[na]||""),t.a=e.refreshToken,bh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function Ih(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?fa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(cu(t)):t.access_token&&t.refresh_token?n(t):r(new N("internal-error")):r(new N("network-request-failed"))}),"POST",tr(e).toString(),t.g,t.m.get()):r(new N("internal-error"))}))}(t.f,e).then((function(e){return t.b=Xi(e.access_token),t.a=e.refresh_token,bh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function Eh(t,e){this.a=t||null,this.b=e||null,ti(this,{lastSignInTime:Xr(e||null),creationTime:Xr(t||null)})}function _h(t,e,n,r,i,o){ti(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Th(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Z.SDK_VERSION?Pr(Z.SDK_VERSION):null;this.a=new ta(this.l,C(k),r),t.emulatorConfig&&ua(this.a,t.emulatorConfig),this.b=new gh(this.a),Ch(this,e[na]),wh(this.b,e),Zr(this,"refreshToken",this.b.a),Lh(this,n||{}),Tn.call(this),this.R=!1,this.s&&Lr()&&(this.i=Yc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new yh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ua(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Sh(i,t.f)},this.ba=null,this.O=new dh(this,n),Zr(this,"multiFactor",this.O)}function Ah(t,e){t.ja&&vn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function Nh(t,e){t.X&&vn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function Sh(t,e){t.$=e,ha(t.a,Z.SDK_VERSION?Pr(Z.SDK_VERSION,t.$):null)}function kh(t,e){t.ba&&vn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function Oh(t){try{return Z.app(t.m).auth()}catch(e){throw new N("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Dh(t){t.D||t.u.b||(t.u.start(),vn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function Ph(t){vn(t,"tokenChanged",t.aa),t.u.stop()}function Ch(t,e){t.za=e,Zr(t,"_lat",e)}function xh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return xe(e).then((function(){return t}))}function Rh(t){t.i&&!t.R&&(t.R=!0,jc(t.i,t))}function Lh(t,e){ti(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Eh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Mh(){}function Vh(t){return De().then((function(){if(t.D)throw new N("app-deleted")}))}function jh(t){return K(t.providerData,(function(t){return t.providerId}))}function Uh(t,e){e&&(Fh(t,e.providerId),t.providerData.push(e))}function Fh(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function qh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Zr(t,e,n)}function Gh(t,e){t!=e&&(ti(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Zr(t,"metadata",function(t){return new Eh(t.a,t.b)}(e.metadata)):Zr(t,"metadata",new Eh),z(e.providerData,(function(e){Uh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Zr(t,"refreshToken",t.b.a),vh(t.O,e.O.b))}function Bh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return au(t.a,ja,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||qh(t,"isAnonymous",!1),e}))}))}function zh(t,e){e[na]&&t.za!=e[na]&&(wh(t.b,e),t.dispatchEvent(new ph("tokenChanged")),Ch(t,e[na]),qh(t,"refreshToken",t.b.a))}function Hh(t,e){return Bh(t).then((function(){if(Y(jh(t),e))return xh(t).then((function(){throw new N("provider-already-linked")}))}))}function Kh(t,e,n){return ei({user:t,credential:Go(e),additionalUserInfo:e=Zi(e),operationType:n})}function Xh(t,e){return zh(t,e),t.reload().then((function(){return t}))}function Yh(t,e,n,r,i){if(!Lr())return Pe(new N("operation-not-supported-in-this-environment"));if(t.h&&!i)return Pe(t.h);var o=$i(n.providerId),s=Gr(t.uid+":::"),a=null;(!jr()||_r())&&t.s&&n.isOAuthProvider&&(a=Eu(t.s,t.l,t.m,e,n,null,s,Z.SDK_VERSION||null,null,null,t.tenantId));var u=gr(a,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Qh(t),!i)return t.I().then((function(){}))})).then((function(){return Gc(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new _e((function(n,r){t.na(e,null,new N("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Hc(t.i,t,e,u,s)}))})).then((function(t){return u&&mr(u),t?ei(t):null})).o((function(t){throw u&&mr(u),t})),Jh(t,r,i)}function Wh(t,e,n,r,i){if(!Lr())return Pe(new N("operation-not-supported-in-this-environment"));if(t.h&&!i)return Pe(t.h);var o=null,s=Gr(t.uid+":::");return r=r().then((function(){if(Qh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,xh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(tf,t.w(),e.a)),e})).then((function(){return zc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return ef(t.ha);throw o})).then((function(){if(o)throw o})),Jh(t,r,i)}function Qh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new N("internal-error");throw new N("auth-domain-config-required")}}function Jh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Pe(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new ph("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){W(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),Oh(t),I(t.jc,t))),n||e}))}function $h(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[na]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Th(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Uh(i,ei(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Zh(t){this.a=t,this.b=oc()}oh.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=yt(e.f);return delete n[sh],delete n[ah],gt(n,t),e.g(n)}))},T(uh,N),hh.prototype.sb=function(t,e,n){return e.type==ho?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Uo(t.a)}),au(e,Ma,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Uo(t.a)}),au(e,Va,n)}))}(this,t,e)},T(fh,hh),T(lh,fh),T(ph,Ze),(e=dh.prototype).yc=function(t){vh(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=ii(t))&&e.push(t)})),e}(t.hd))},e.Rb=function(){return this.a.I().then((function(t){return new co(t,null)}))},e.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return zh(n.a,t),n.a.reload()}))},e.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return au(r,su,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return vh(e,r),zh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},yh.prototype.start=function(){this.a=this.c,mh(this,!0)},yh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},gh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},gh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Pe(new N("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?Ih(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},Eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Th,Tn),Th.prototype.wa=function(t){this.ya=t,aa(this.a,t)},Th.prototype.la=function(){return this.ya},Th.prototype.Ga=function(){return $(this.$)},Th.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Zr(Th.prototype,"providerId","firebase"),(e=Th.prototype).reload=function(){var t=this;return Jh(this,Vh(this).then((function(){return Bh(t).then((function(){return xh(t)})).then(Mh)})))},e.oc=function(t){return this.I(t).then((function(t){return new ih(t)}))},e.I=function(t){var e=this;return Jh(this,Vh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new N("internal-error");return t.accessToken!=e.za&&(Ch(e,t.accessToken),e.dispatchEvent(new ph("tokenChanged"))),qh(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Kc=function(t){if(!(t=t.users)||!t.length)throw new N("internal-error");Lh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new _h(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Uh(this,e[n]);qh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ph("userReloaded",{hd:t}))},e.Lc=function(t){return Jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},e.tb=function(t){var e=this,n=null;return Jh(this,t.c(this.a,this.uid).then((function(t){return zh(e,t),n=Kh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.Cc=function(t){return Jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},e.qb=function(t){var e=this,n=null;return Jh(this,Hh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kh(e,t,"link"),Xh(e,t)})).then((function(){return n})))},e.Dc=function(t,e){var n=this;return Jh(this,Hh(this,"phone").then((function(){return rh(Oh(n),t,e,I(n.qb,n))})))},e.Mc=function(t,e){var n=this;return Jh(this,De().then((function(){return rh(Oh(n),t,e,I(n.tb,n))})),!0)},e.Bb=function(t){var e=this;return Jh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return zh(e,t),e.reload()})))},e.ed=function(t){var e=this;return Jh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return zh(e,t),e.reload()})))},e.Cb=function(t){var e=this;return Jh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return zh(e,t),e.reload()})))},e.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Vh(this);var e=this;return Jh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return zh(e,t),qh(e,"displayName",t.displayName||null),qh(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(Zr(t,"displayName",e.displayName),Zr(t,"photoURL",e.photoURL))})),xh(e)})).then(Mh))},e.cd=function(t){var e=this;return Jh(this,Bh(this).then((function(n){return Y(jh(e),t)?function(t,e,n){return au(t,xa,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(jh(e),(function(t){n[t]||Fh(e,t)})),n[Fo.PROVIDER_ID]||Zr(e,"phoneNumber",null),xh(e)})):xh(e).then((function(){throw new N("no-such-provider")}))})))},e.delete=function(){var t=this;return Jh(this,this.I().then((function(e){return au(t.a,Ca,{idToken:e})})).then((function(){t.dispatchEvent(new ph("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");Ah(t,null),Nh(t,null),kh(t,null),t.J=[],t.D=!0,Ph(t),Zr(t,"refreshToken",null),t.i&&Uc(t.i,t)}))},e.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},e.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},e.Ec=function(t){var e=this;return Yh(this,"linkViaPopup",t,(function(){return Hh(e,t.providerId).then((function(){return xh(e)}))}),!1)},e.Nc=function(t){return Yh(this,"reauthViaPopup",t,(function(){return De()}),!0)},e.Fc=function(t){var e=this;return Wh(this,"linkViaRedirect",t,(function(){return Hh(e,t.providerId)}),!1)},e.Oc=function(t){return Wh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},e.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jh(this,this.I().then((function(n){return Aa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kh(i,t,"link"),Xh(i,t)})).then((function(){return o})))},e.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jh(this,De().then((function(){return po(Na(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kh(i,t,"reauthenticate"),zh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},e.ub=function(t){var e=this,n=null;return Jh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new xi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Eb=function(t,e){var n=this,r=null;return Jh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new xi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.jc=function(t){var e=null,n=this;return Jh(this,t=po(De(t),n.uid).then((function(t){return e=Kh(n,t,"reauthenticate"),zh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.O.w()),t};var tf={name:"redirectUser",F:"session"};function ef(t){return uc(t.b,tf,t.a)}function nf(t){this.a=t,this.b=oc(),this.c=null,this.f=function(t){var e=sf("local"),n=sf("session"),r=sf("none");return function(t,e,n){var r=ac(e,n),i=sc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=qr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(of,t.a).then((function(t){return t?sf(t):e}))}))}))})).then((function(e){return t.c=e,rf(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(sf("local"),this.a,I(this.g,this))}function rf(t,e){var n,r=[];for(n in rc)rc[n]!==e&&r.push(uc(t.b,sf(rc[n]),t.a));return r.push(uc(t.b,of,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ce(t[a],E(o,a),s);else e(i)}))}(r)}nf.prototype.g=function(){var t=this,e=sf("local");hf(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return rf(t,"local").then((function(){t.c=e}))}))}))};var of={name:"persistence",F:"session"};function sf(t){return{name:"authUser",F:t}}function af(t,e){return hf(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function uf(t){return hf(t,(function(){return uc(t.b,t.c,t.a)}))}function cf(t,e,n){return hf(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),$h(t||{})}))}))}function hf(t,e){return t.f=t.f.then(e,e),t.f}function ff(t){if(this.l=!1,Zr(this,"settings",new eh),Zr(this,"app",t),!wf(this).options||!wf(this).options.apiKey)throw new N("invalid-api-key");t=Z.SDK_VERSION?Pr(Z.SDK_VERSION):null,this.a=new ta(wf(this).options&&wf(this).options.apiKey,C(k),t),this.R=[],this.s=[],this.O=[],this.hb=Z.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=Z.INTERNAL.createSubscribe(I(this.Ac,this)),gf(this,null),this.i=new nf(wf(this).options.apiKey+":"+wf(this).name),this.D=new Zh(wf(this).options.apiKey+":"+wf(this).name),this.$=Tf(this,function(t){var e=wf(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(tf,t.a).then((function(t){return t&&e&&(t.authDomain=e),$h(t||{})}))}(t.D,wf(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),ef(t.D)}));return Tf(t,e)}(t).then((function(){return cf(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return af(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:uf(t.i)}))):null})).then((function(e){gf(t,e||null)}));return Tf(t,n)}(this)),this.h=Tf(this,function(t){return t.$.then((function(){return yf(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(sf("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=wf(t).options.authDomain,n=wf(t).options.apiKey;e&&Lr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Yc(e,n,wf(t).name,t.P),jc(t.b,t),If(t)&&Rh(If(t)),t.m){Rh(t.m);var r=t.m;r.wa(t.la()),Ah(r,t),Sh(r=t.m,t.J),kh(r,t),ua((r=t.m).a,t.P),Nh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Gn(this.P.url);t=ei({protocol:t.c,host:t.a,port:t.g,options:ei({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function lf(t){Ze.call(this,"languageCodeChanged"),this.h=t}function pf(t){Ze.call(this,"emulatorConfigChanged"),this.c=t}function df(t){Ze.call(this,"frameworkChanged"),this.f=t}function vf(t){return t.Oa||Pe(new N("auth-domain-config-required"))}function yf(t){if(!Lr())return Pe(new N("operation-not-supported-in-this-environment"));var e=vf(t).then((function(){return t.b.qa()})).then((function(t){return t?ei(t):null}));return Tf(t,e)}function mf(t,e){var n={};return n.apiKey=wf(t).options.apiKey,n.authDomain=wf(t).options.authDomain,n.appName=wf(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new Th(t,e);return n&&(i.ha=n),r&&Sh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return If(t)&&e.uid==If(t).uid?(Gh(If(t),e),t.da(e)):(gf(t,e),Rh(e),t.da(e))})).then((function(){_f(t)}))}function gf(t,e){If(t)&&(function(t,e){Q(t.S,(function(t){return t==e}))}(If(t),t.Ba),vn(If(t),"tokenChanged",t.ya),vn(If(t),"userDeleted",t.za),vn(If(t),"userInvalidated",t.Aa),Ph(If(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Dh(e)),Zr(t,"currentUser",e),e&&(e.wa(t.la()),Ah(e,t),Sh(e,t.J),kh(e,t),ua(e.a,t.P),Nh(e,t))}function bf(t,e){var n=null,r=null;return Tf(t,e.then((function(e){return n=Go(e),r=Zi(e),mf(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ei({user:If(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function wf(t){return t.app}function If(t){return t.currentUser}function Ef(t){return If(t)&&If(t)._lat||null}function _f(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](Ef(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Ef(t))}}function Tf(t,e){return t.R.push(e),e.oa((function(){W(t.R,e)})),e}function Af(){}function Nf(){this.a={},this.b=1e12}nf.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new N("invalid-persistence-type"),n=new N("unsupported-persistence-type");t:{for(r in rc)if(rc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Ar()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Mu()&&"none"!==t)throw n;break;default:if(!Rr()&&"none"!==t)throw n}}(t),hf(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,rf(n,t)})).then((function(){if(n.c=sf(t),e)return n.b.set(n.c,e,n.a)})):De()}))},T(ff,Tn),T(lf,Ze),T(pf,Ze),T(df,Ze),(e=ff.prototype).xb=function(t){return Tf(this,t=this.i.xb(t))},e.wa=function(t){this.aa===t||this.l||(this.aa=t,aa(this.a,this.aa),this.dispatchEvent(new lf(this.la())))},e.la=function(){return this.aa},e.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new N("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&Ir().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ua(this.a,this.P),this.dispatchEvent(new pf(this.P))}},e.Gc=function(t){this.J.push(t),ha(this.a,Z.SDK_VERSION?Pr(Z.SDK_VERSION,this.J):null),this.dispatchEvent(new df(this.J))},e.Ga=function(){return $(this.J)},e.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:wf(this).options.apiKey,authDomain:wf(this).options.authDomain,appName:wf(this).name,currentUser:If(this)&&If(this).w()}},e.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},e.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return bf(i,Ta(i.a,o))}))},e.Xc=function(t){if(!Lr())return Pe(new N("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),r=Gr(),i=null;(!jr()||_r())&&wf(this).options.authDomain&&t.isOAuthProvider&&(i=Eu(wf(this).options.authDomain,wf(this).options.apiKey,wf(this).name,"signInViaPopup",t,null,r,Z.SDK_VERSION||null,null,null,this.T(),this.P));var o=gr(i,n&&n.ua,n&&n.ta);return Tf(this,n=vf(this).then((function(n){return Gc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new _e((function(t,n){e.na("signInViaPopup",null,new N("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Hc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&mr(o),t?ei(t):null})).o((function(t){throw o&&mr(o),t})))},e.Yc=function(t){if(!Lr())return Pe(new N("operation-not-supported-in-this-environment"));var e=this;return Tf(this,vf(this).then((function(){return function(t){return hf(t,(function(){return t.b.set(of,t.c.F,t.a)}))}(e.i)})).then((function(){return zc(e.b,"signInViaRedirect",t,void 0,e.T())})))},e.qa=function(){var t=this;return yf(this).then((function(e){return t.b&&Jc(t.b.b),e})).o((function(e){throw t.b&&Jc(t.b.b),e}))},e.dd=function(t){if(!t)return Pe(new N("null-user"));if(this.S!=t.tenantId)return Pe(new N("tenant-id-mismatch"));var e=this,n={};n.apiKey=wf(this).options.apiKey,n.authDomain=wf(this).options.authDomain,n.appName=wf(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[na]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Th(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Sh(e,r),Gh(e,t),e}(t,n,e.D,e.Ga());return Tf(this,this.h.then((function(){if(wf(e).options.apiKey!=t.l)return r.reload()})).then((function(){return If(e)&&t.uid==If(e).uid?(Gh(If(e),t),e.da(t)):(gf(e,r),Rh(r),e.da(r))})).then((function(){_f(e)})))},e.Ab=function(){var t=this;return Tf(this,this.h.then((function(){return t.b&&Jc(t.b.b),If(t)?(gf(t,null),uf(t.i).then((function(){_f(t)}))):De()})))},e.Zc=function(){var t=this;return cf(this.i,wf(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=If(t)&&e){n=If(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Gh(If(t),e),If(t).I();(If(t)||e)&&(gf(t,e),e&&(Rh(e),e.ha=t.D),t.b&&jc(t.b,t),_f(t))}}))},e.da=function(t){return af(this.i,t)},e.mc=function(){_f(this),this.da(If(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()},e.kc=function(t){var e=this;return this.h.then((function(){return bf(e,De(t))}))},e.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(If(e))}))},e.Ac=function(t){var e=this;!function(t,e){t.O.push(e),Tf(t,t.h.then((function(){!t.l&&Y(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(Ef(t)))})))}(this,(function(){t.next(If(e))}))},e.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(If(r)):"function"==typeof t.next&&t.next(If(r))})),this.hb(t,e,n)},e.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(If(r)):"function"==typeof t.next&&t.next(If(r))})),this.bc(t,e,n)},e.nc=function(t){var e=this;return Tf(this,this.h.then((function(){return If(e)?If(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Tc=function(t){var e=this;return this.h.then((function(){return bf(e,au(e.a,eu,{token:t}))})).then((function(t){var n=t.user;return qh(n,"isAnonymous",!1),e.da(n),t}))},e.Uc=function(t,e){var n=this;return this.h.then((function(){return bf(n,au(n.a,nu,{email:t,password:e}))}))},e.dc=function(t,e){var n=this;return this.h.then((function(){return bf(n,au(n.a,Da,{email:t,password:e}))}))},e.$a=function(t){var e=this;return this.h.then((function(){return bf(e,t.ka(e.a))}))},e.Sc=function(t){return Jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},e.zb=function(){var t=this;return this.h.then((function(){var e=If(t);if(e&&e.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return bf(t,t.a.zb()).then((function(e){var n=e.user;return qh(n,"isAnonymous",!0),t.da(n),e}))}))},e.getUid=function(){return If(this)&&If(this).uid||null},e.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&If(this)&&Dh(If(this))},e.Pc=function(t){var e=this;z(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&If(this)&&Ph(If(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.s.push(t),Tf(this,this.h.then((function(){e.l||Y(e.s,t)&&t(Ef(e))})))},e.removeAuthTokenListener=function(t){Q(this.s,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(sf("local"),t.a,this.ja),this.b&&(Uc(this.b,this),Jc(this.b.b)),Promise.resolve()},e.hc=function(t){return Tf(this,function(t,e){return au(t,Pa,{identifier:e,continueUri:Mr()?pr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},e.Bc=function(t){return!!Mo(t)},e.wb=function(t,e){var n=this;return Tf(this,De().then((function(){var t=new xi(e);if(!t.c)throw new N("argument-error",Mi+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},e.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},e.nb=function(t,e){return Tf(this,this.a.nb(t,e).then((function(){})))},e.Ra=function(t){return Tf(this,this.a.Ra(t).then((function(t){return new hi(t)})))},e.jb=function(t){return Tf(this,this.a.jb(t).then((function(){})))},e.vb=function(t,e){var n=this;return Tf(this,De().then((function(){return void 0===e||vt(e)?{}:Bi(new xi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},e.Wc=function(t,e){return Tf(this,rh(this,t,e,I(this.$a,this)))},e.Vc=function(t,e){var n=this;return Tf(this,De().then((function(){var r=e||pr(),i=Lo(t,r);if(!(r=Mo(r)))throw new N("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new N("tenant-id-mismatch");return n.$a(i)})))},Af.prototype.render=function(){},Af.prototype.reset=function(){},Af.prototype.getResponse=function(){},Af.prototype.execute=function(){};var Sf=null;function kf(t,e){return(e=Of(e))&&t.a[e]||null}function Of(t){return(t=void 0===t?1e12:t)?t.toString():null}function Df(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=fe(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Pf(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Cf(){}function xf(){}Nf.prototype.render=function(t,e){return this.a[this.b.toString()]=new Df(t,e),this.b++},Nf.prototype.reset=function(t){var e=kf(this,t);t=Of(t),e&&t&&(e.delete(),delete this.a[t])},Nf.prototype.getResponse=function(t){return(t=kf(this,t))?t.getResponse():null},Nf.prototype.execute=function(t){(t=kf(this,t))&&t.execute()},Df.prototype.getResponse=function(){return Pf(this),this.b},Df.prototype.execute=function(){Pf(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Df.prototype.delete=function(){Pf(this),this.g=!0,clearTimeout(this.a),this.a=null,vn(this.f,"click",this.i)},Zr(Cf,"FACTOR_ID","phone"),xf.prototype.g=function(){return Sf||(Sf=new Nf),De(Sf)},xf.prototype.c=function(){};var Rf=null;function Lf(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Mf=new wt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Vf=new Hr(3e4,6e4);Lf.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new N("network-request-failed"))}),Vf.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new N("internal-error"));delete a[e.a]},De(Xs(kt(Mf,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new N("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},Lf.prototype.c=function(){this.b--};var jf=null;function Uf(t,e,n,r,i,o,s){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s?(Rf||(Rf=new xf),s=Rf):(jf||(jf=new Lf),s=jf),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Gf])throw new N("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bf],!a.document)throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!fe(e)||!this.i&&fe(e).hasChildNodes())throw new N("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ff];this.a[Ff]=function(t){if(zf(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=xr(c,a);"function"==typeof e&&e(t)}};var h=this.a[qf];this.a[qf]=function(){if(zf(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=xr(h,a);"function"==typeof t&&t()}}}var Ff="callback",qf="expired-callback",Gf="sitekey",Bf="size";function zf(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Hf(t,e){return t.h.push(e),e.oa((function(){W(t.h,e)})),e}function Kf(t){if(t.D)throw new N("internal-error","RecaptchaVerifier instance has been destroyed.")}function Xf(t,e,n){var r=!1;try{this.b=n||Z.app()}catch(t){throw new N("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new N("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Z.SDK_VERSION?Pr(Z.SDK_VERSION,o):null,Uf.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,C(k),r)}function Yf(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new N("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Wf.length)throw new N("internal-error","Argument validator received an unsupported number of arguments.");n=Wf[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new N("argument-error",t+" failed: "+r)}(e=Uf.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Hf(this,De().then((function(){if(Mr()&&!Tr())return Ir();throw new N("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,au(t.s,za,{})})).then((function(e){t.a[Gf]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Kf(this);var t=this;return Hf(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=fe(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!he&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=me(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):le(o,s)),2<r.length&&ye(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Kf(this);var t=this;return Hf(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Kf(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Kf(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=fe(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Xf,Uf);var Wf="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Qf(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Jf(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function $f(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Zf(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function tl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function el(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function nl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function rl(t){return v(t)&&"string"==typeof t.uid}function il(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ol(t,e){for(var n in e){var r=e[n].name;t[r]=ul(r,t[n],e[n].j)}}function sl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){Yf(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function al(t,e,n,r){t[e]=ul(e,n,r)}function ul(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Yf(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ol(ff.prototype,{jb:{name:"applyActionCode",j:[Qf("code")]},Ra:{name:"checkActionCode",j:[Qf("code")]},nb:{name:"confirmPasswordReset",j:[Qf("code"),Qf("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Qf("email"),Qf("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Qf("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Qf("emailLink")]},Hc:{name:"onAuthStateChanged",j:[il($f(),Zf(),"nextOrObserver"),Zf("opt_error",!0),Zf("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[il($f(),Zf(),"nextOrObserver"),Zf("opt_error",!0),Zf("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Qf("email"),il($f("opt_actionCodeSettings",!0),tl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Qf("email"),$f("actionCodeSettings")]},xb:{name:"setPersistence",j:[Qf("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[el()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[el()]},Tc:{name:"signInWithCustomToken",j:[Qf("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Qf("email"),Qf("password")]},Vc:{name:"signInWithEmailLink",j:[Qf("email"),Qf("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Qf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[il({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Th)}},tl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Qf(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Qf("url"),$f("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Qf("code")]}}),sl(ff.prototype,{lc:{name:"languageCode",kb:il(Qf(),tl(),"languageCode")},ti:{name:"tenantId",kb:il(Qf(),tl(),"tenantId")}}),ff.Persistence=rc,ff.Persistence.LOCAL="local",ff.Persistence.SESSION="session",ff.Persistence.NONE="none",ol(Th.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Jf("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Jf("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[el()]},qb:{name:"linkWithCredential",j:[el()]},Dc:{name:"linkWithPhoneNumber",j:[Qf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[el()]},tb:{name:"reauthenticateWithCredential",j:[el()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Qf("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[il($f("opt_actionCodeSettings",!0),tl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Qf(null,!0)]},cd:{name:"unlink",j:[Qf("provider")]},Bb:{name:"updateEmail",j:[Qf("email")]},Cb:{name:"updatePassword",j:[Qf("password")]},ed:{name:"updatePhoneNumber",j:[el("phone")]},Db:{name:"updateProfile",j:[$f("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Qf("email"),il($f("opt_actionCodeSettings",!0),tl(null,!0),"opt_actionCodeSettings",!0)]}}),ol(Nf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ol(Af.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ol(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),sl(eh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Jf("appVerificationDisabledForTesting")}}),ol(nh.prototype,{confirm:{name:"confirm",j:[Qf("verificationCode")]}}),al(lo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[wo,xo,jo,mo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[il(Qf(),$f(),"json")]),al(Ro,"credential",(function(t,e){return new Co(t,e)}),[Qf("email"),Qf("password")]),ol(Co.prototype,{w:{name:"toJSON",j:[Qf(null,!0)]}}),ol(To.prototype,{Ca:{name:"addScope",j:[Qf("scope")]},Ka:{name:"setCustomParameters",j:[$f("customOAuthParameters")]}}),al(To,"credential",Ao,[il(Qf(),$f(),"token")]),al(Ro,"credentialWithLink",Lo,[Qf("email"),Qf("emailLink")]),ol(No.prototype,{Ca:{name:"addScope",j:[Qf("scope")]},Ka:{name:"setCustomParameters",j:[$f("customOAuthParameters")]}}),al(No,"credential",So,[il(Qf(),$f(),"token")]),ol(ko.prototype,{Ca:{name:"addScope",j:[Qf("scope")]},Ka:{name:"setCustomParameters",j:[$f("customOAuthParameters")]}}),al(ko,"credential",Oo,[il(Qf(),il($f(),tl()),"idToken"),il(Qf(),tl(),"accessToken",!0)]),ol(Do.prototype,{Ka:{name:"setCustomParameters",j:[$f("customOAuthParameters")]}}),al(Do,"credential",Po,[il(Qf(),$f(),"token"),Qf("secret",!0)]),ol(_o.prototype,{Ca:{name:"addScope",j:[Qf("scope")]},credential:{name:"credential",j:[il(Qf(),il($f(),tl()),"optionsOrIdToken"),il(Qf(),tl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[$f("customOAuthParameters")]}}),ol(go.prototype,{w:{name:"toJSON",j:[Qf(null,!0)]}}),ol(vo.prototype,{w:{name:"toJSON",j:[Qf(null,!0)]}}),al(Fo,"credential",qo,[Qf("verificationId"),Qf("verificationCode")]),ol(Fo.prototype,{fb:{name:"verifyPhoneNumber",j:[il(Qf(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?nl(t.session,ho)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?nl(t.session,fo)&&rl(t.multiFactorHint):t.session&&t.multiFactorUid?nl(t.session,fo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ol(Vo.prototype,{w:{name:"toJSON",j:[Qf(null,!0)]}}),ol(N.prototype,{toJSON:{name:"toJSON",j:[Qf(null,!0)]}}),ol(Qo.prototype,{toJSON:{name:"toJSON",j:[Qf(null,!0)]}}),ol(Wo.prototype,{toJSON:{name:"toJSON",j:[Qf(null,!0)]}}),ol(uh.prototype,{toJSON:{name:"toJSON",j:[Qf(null,!0)]}}),ol(oh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),ol(dh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Qf("displayName",!0)]},bd:{name:"unenroll",j:[il({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:rl},Qf(),"multiFactorInfoIdentifier")]}}),ol(Xf.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),al(Ti,"parseLink",Ci,[Qf("link")]),al(Cf,"assertion",(function(t){return new lh(t)}),[el("phone")]),function(){if(void 0===Z||!Z.INTERNAL||!Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:fi,VERIFY_AND_CHANGE_EMAIL:pi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ff,AuthCredential:lo,Error:N};al(t,"EmailAuthProvider",Ro,[]),al(t,"FacebookAuthProvider",To,[]),al(t,"GithubAuthProvider",No,[]),al(t,"GoogleAuthProvider",ko,[]),al(t,"TwitterAuthProvider",Do,[]),al(t,"OAuthProvider",_o,[Qf("providerId")]),al(t,"SAMLAuthProvider",Eo,[Qf("providerId")]),al(t,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ff)}}]),al(t,"RecaptchaVerifier",Xf,[il(Qf(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),$f("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Z.app.App)}}]),al(t,"ActionCodeURL",Ti,[]),al(t,"PhoneMultiFactorGenerator",Cf,[]),Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ff(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Z.registerVersion("@firebase/auth","0.16.4"),Z.INTERNAL.extendNamespace({User:Th})}()}.apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
var tt=function(t,e){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function et(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var nt,rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},it=it||{},ot=rt||self;function st(){}function at(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ut(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ct="closure_uid_"+(1e9*Math.random()>>>0),ht=0;function ft(t,e,n){return t.call.apply(t.bind,arguments)}function lt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function pt(t,e,n){return(pt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ft:lt).apply(null,arguments)}function dt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function vt(){return Date.now()}function yt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function mt(){this.j=this.j,this.i=this.i}mt.prototype.j=!1,mt.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,ct)&&t[ct]||(t[ct]=++ht)})(this)},mt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var gt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},bt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function wt(t){return Array.prototype.concat.apply([],arguments)}function It(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Et(t){return/^[\s\xa0]*$/.test(t)}var _t,Tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function At(t,e){return-1!=t.indexOf(e)}function Nt(t,e){return t<e?-1:t>e?1:0}t:{var St=ot.navigator;if(St){var kt=St.userAgent;if(kt){_t=kt;break t}}_t=""}function Ot(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Dt(t){var e={};for(var n in t)e[n]=t[n];return e}var Pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ct(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Pt.length;o++)n=Pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function xt(t){return xt[" "](t),t}xt[" "]=st;var Rt,Lt,Mt=At(_t,"Opera"),Vt=At(_t,"Trident")||At(_t,"MSIE"),jt=At(_t,"Edge"),Ut=jt||Vt,Ft=At(_t,"Gecko")&&!(At(_t.toLowerCase(),"webkit")&&!At(_t,"Edge"))&&!(At(_t,"Trident")||At(_t,"MSIE"))&&!At(_t,"Edge"),qt=At(_t.toLowerCase(),"webkit")&&!At(_t,"Edge");function Gt(){var t=ot.document;return t?t.documentMode:void 0}t:{var Bt="",zt=(Lt=_t,Ft?/rv:([^\);]+)(\)|;)/.exec(Lt):jt?/Edge\/([\d\.]+)/.exec(Lt):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Lt):qt?/WebKit\/(\S+)/.exec(Lt):Mt?/(?:Version)[ \/]?(\S+)/.exec(Lt):void 0);if(zt&&(Bt=zt?zt[1]:""),Vt){var Ht=Gt();if(null!=Ht&&Ht>parseFloat(Bt)){Rt=String(Ht);break t}}Rt=Bt}var Kt,Xt={};function Yt(t){return function(t,e){var n=Xt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Tt(String(Rt)).split("."),r=Tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Nt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Nt(0==s[2].length,0==a[2].length)||Nt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(ot.document&&Vt){var Wt=Gt();Kt=Wt||(parseInt(Rt,10)||void 0)}else Kt=void 0;var Qt=Kt,Jt=!Vt||9<=Number(Qt),$t=Vt&&!Yt("9"),Zt=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ot.addEventListener("test",st,e),ot.removeEventListener("test",st,e)}catch(t){}return t}();function te(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ee(t,e){if(te.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ft){t:{try{xt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ne[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}te.prototype.b=function(){this.defaultPrevented=!0},yt(ee,te);var ne={2:"touch",3:"pen",4:"mouse"};ee.prototype.b=function(){ee.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$t)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ie,this.Y=this.Z=!1}function se(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ae(t){this.src=t,this.a={},this.b=0}function ue(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=gt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(se(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ce(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ae.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ce(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new oe(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var he="closure_lm_"+(1e6*Math.random()|0),fe={};function le(t,e,n,r,i){if(r&&r.once)return de(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)le(t,e[o],n,r,i);return null}return n=Ee(n),t&&t[re]?t.va(e,n,ut(r)?!!r.capture:!!r,i):pe(t,e,n,!1,r,i)}function pe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ut(i)?!!i.capture:!!i;if(s&&!Jt)return null;var a=we(t);if(a||(t[he]=a=new ae(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=be,e=Jt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Zt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(me(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function de(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)de(t,e[o],n,r,i);return null}return n=Ee(n),t&&t[re]?t.wa(e,n,ut(r)?!!r.capture:!!r,i):pe(t,e,n,!0,r,i)}function ve(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ve(t,e[o],n,r,i);else r=ut(r)?!!r.capture:!!r,n=Ee(n),t&&t[re]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=ce(o=t.a[e],n,r,i))&&(se(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=we(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ce(e,n,r,i)),(n=-1<t?e[t]:null)&&ye(n))}function ye(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[re])ue(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(me(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=we(e))?(ue(n,t),0==n.b&&(n.src=null,e[he]=null)):se(t)}}}function me(t){return t in fe?fe[t]:fe[t]="on"+t}function ge(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ye(t),n.call(r,e)}function be(t,e){if(t.Y)return!0;if(!Jt){if(!e)t:{e=["window","event"];for(var n=ot,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ge(t,e=new ee(e,this))}return ge(t,new ee(e,this))}function we(t){return(t=t[he])instanceof ae?t:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ee(t){return"function"==typeof t?t:(t[Ie]||(t[Ie]=function(e){return t.handleEvent(e)}),t[Ie])}function _e(){mt.call(this),this.c=new ae(this),this.J=this,this.C=null}function Te(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new te(e,t);else if(e instanceof te)e.target=e.target||t;else{var i=e;Ct(e=new te(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ae(s,r,!0,e)&&i}if(i=Ae(s=e.a=t,r,!0,e)&&i,i=Ae(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ae(s=e.a=n[o],r,!1,e)&&i}function Ae(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ue(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}yt(_e,mt),_e.prototype[re]=!0,(nt=_e.prototype).addEventListener=function(t,e,n,r){le(this,t,e,n,r)},nt.removeEventListener=function(t,e,n,r){ve(this,t,e,n,r)},nt.G=function(){if(_e.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)se(n[r]);delete e.a[t],e.b--}}this.C=null},nt.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},nt.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ne=ot.JSON.stringify;function Se(){this.b=this.a=null}var ke,Oe=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Pe}),(function(t){t.reset()}));function De(){var t=Le,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pe(){this.next=this.b=this.a=null}function Ce(t){ot.setTimeout((function(){throw t}),0)}function xe(t,e){ke||function(){var t=ot.Promise.resolve(void 0);ke=function(){t.then(Me)}}(),Re||(ke(),Re=!0),Le.add(t,e)}Se.prototype.add=function(t,e){var n=Oe.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var Re=!1,Le=new Se;function Me(){for(var t;t=De();){try{t.a.call(t.b)}catch(t){Ce(t)}var e=Oe;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Re=!1}function Ve(t,e){_e.call(this),this.b=t||1,this.a=e||ot,this.f=pt(this.Za,this),this.g=vt()}function je(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ue(t,e,n){if("function"==typeof t)n&&(t=pt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=pt(t.handleEvent,t)}return 2147483647<Number(e)?-1:ot.setTimeout(t,e||0)}function Fe(t){t.a=Ue((function(){t.a=null,t.c&&(t.c=!1,Fe(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}yt(Ve,_e),(nt=Ve.prototype).aa=!1,nt.M=null,nt.Za=function(){if(this.aa){var t=vt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Te(this,"tick"),this.aa&&(je(this),this.start()))}},nt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vt())},nt.G=function(){Ve.X.G.call(this),je(this),delete this.a};var qe=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Fe(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ot.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(mt);function Ge(t){mt.call(this),this.b=t,this.a={}}yt(Ge,mt);var Be=[];function ze(t,e,n,r){Array.isArray(n)||(n&&(Be[0]=n.toString()),n=Be);for(var i=0;i<n.length;i++){var o=le(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function He(t){Ot(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ye(t)}),t),t.a={}}function Ke(){this.a=!0}function Xe(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ne(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Ge.prototype.G=function(){Ge.X.G.call(this),He(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ke.prototype.info=function(){};var Ye={},We=null;function Qe(){return We=We||new _e}function Je(t){te.call(this,Ye.Fa,t)}function $e(t){var e=Qe();Te(e,new Je(e,t))}function Ze(t,e){te.call(this,Ye.STAT_EVENT,t),this.stat=e}function tn(t){var e=Qe();Te(e,new Ze(e,t))}function en(t){te.call(this,Ye.Ga,t)}function nn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ot.setTimeout((function(){t()}),e)}Ye.Fa="serverreachability",yt(Je,te),Ye.STAT_EVENT="statevent",yt(Ze,te),Ye.Ga="timingevent",yt(en,te);var rn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},on={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function sn(){}function an(t){var e;return(e=t.a)||(e=t.a={}),e}function un(){}sn.prototype.a=null;var cn,hn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function fn(){te.call(this,"d")}function ln(){te.call(this,"c")}function pn(){}function dn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ge(this),this.P=vn,t=Ut?125:void 0,this.R=new Ve(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}yt(fn,te),yt(ln,te),yt(pn,sn),cn=new pn;var vn=45e3,yn={},mn={};function gn(t,e,n){t.H=1,t.i=Fn(Rn(e)),t.j=n,t.I=!0,bn(t,null)}function bn(t,e){t.u=vt(),En(t),t.l=Rn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Zn(n.b,"t",r),t.D=0,t.a=Xr(t.g,t.g.C?e:null),0<t.O&&(t.F=new qe(pt(t.Ca,t,t.a),t.O)),ze(t.J,t.a,"readystatechange",t.Xa),e=t.B?Dt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),$e(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function wn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=In(t,n);if(i==mn){4==e&&(t.h=4,tn(14),r=!1),Xe(t.c,t.f,null,"[Incomplete Response]");break}if(i==yn){t.h=4,tn(15),Xe(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Xe(t.c,t.f,i,null),Sn(t,i)}4==e&&0==n.length&&(t.h=1,tn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ur(e),e.F=!0,tn(11))):(Xe(t.c,t.f,n,"[Invalid Chunked Response]"),Nn(t),An(t))}function In(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?mn:(n=Number(e.substring(n,r)),isNaN(n)?yn:(r+=1)+n>e.length?mn:(e=e.substr(r,n),t.D=r+n,e))}function En(t){t.T=vt()+t.P,_n(t,t.P)}function _n(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=nn(pt(t.Va,t),e)}function Tn(t){t.o&&(ot.clearTimeout(t.o),t.o=null)}function An(t){0==t.g.v||t.A||Gr(t.g,t)}function Nn(t){Tn(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,je(t.R),He(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Sn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||sr(n.b,t)))if(n.I=t.N,!t.C&&sr(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;qr(n),Dr(n)}jr(n),tn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=nn(pt(n.Sa,n),6e3));if(1>=or(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else zr(n,11)}else if((t.C||n.a==t)&&qr(n),!Et(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=u.b;!f.a&&(At(h,"spdy")||At(h,"quic")||At(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(ar(f,f.b),f.b=null))}if(u.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(u.na=l,Un(u.B,u.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Kr(u,u.C?u.ga:null,u.fa),p.C){ur(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Tn(d),En(d)),u.a=p}else Vr(u);0<n.g.length&&xr(n)}else"stop"!=i[0]&&"close"!=i[0]||zr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?zr(n,7):Or(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);$e(4)}catch(t){}}function kn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(at(t)||"string"==typeof t)bt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(at(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(at(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Dn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(nt=dn.prototype).setTimeout=function(t){this.P=t},nt.Xa=function(t){t=t.target;var e=this.F;e&&3==Ar(t)?e.f():this.Ca(t)},nt.Ca=function(t){try{if(t==this.a)t:{var e=Ar(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ut&&!this.a.$())){this.A||4!=e||7==n||$e(8==n||0>=r?3:2),Tn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Et(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,tn(12),Nn(this),An(this);break t}Xe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Sn(this,u)}this.I?(wn(this,e,o),Ut&&this.b&&3==e&&(ze(this.J,this.R,"tick",this.Wa),this.R.start())):(Xe(this.c,this.f,o,null),Sn(this,o)),4==e&&Nn(this),this.b&&!this.A&&(4==e?Gr(this.g,this):(this.b=!1,En(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,tn(12)):(this.h=0,tn(13)),Nn(this),An(this)}}}catch(t){}},nt.Wa=function(){if(this.a){var t=Ar(this.a),e=this.a.$();this.D<e.length&&(Tn(this),wn(this,t,e),this.b&&4!=t&&En(this))}},nt.cancel=function(){this.A=!0,Nn(this)},nt.Va=function(){this.o=null;var t=vt();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&($e(3),tn(17)),Nn(this),this.h=2,An(this)):_n(this,this.T-t)},(nt=On.prototype).K=function(){Dn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},nt.L=function(){return Dn(this),this.a.concat()},nt.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},nt.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},nt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof xn){this.a=void 0!==e?e:t.a,Ln(this,t.f),this.j=t.j,Mn(this,t.c),Vn(this,t.h),this.g=t.g,e=t.b;var n=new Wn;n.c=e.c,e.a&&(n.a=new On(e.a),n.b=e.b),jn(this,n),this.i=t.i}else t&&(n=String(t).match(Cn))?(this.a=!!e,Ln(this,n[1]||"",!0),this.j=qn(n[2]||""),Mn(this,n[3]||"",!0),Vn(this,n[4]),this.g=qn(n[5]||"",!0),jn(this,n[6]||"",!0),this.i=qn(n[7]||"")):(this.a=!!e,this.b=new Wn(null,this.a))}function Rn(t){return new xn(t)}function Ln(t,e,n){t.f=n?qn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Mn(t,e,n){t.c=n?qn(e,!0):e}function Vn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function jn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Gn(e,Xn)),t.b=new Wn(e,t.a))}function Un(t,e,n){t.b.set(e,n)}function Fn(t){return Un(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vt()).toString(36)),t}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}xn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Gn(e,zn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Kn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Gn(n,Yn)),t.join("")};var zn=/[#\/\?@]/g,Hn=/[#\?:]/g,Kn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Jn(t,e){Qn(t),e=tr(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Dn(t)))}function $n(t,e){return Qn(t),e=tr(t,e),Pn(t.a.b,e)}function Zn(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(tr(t,e),It(n)),t.b+=n.length)}function tr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(nt=Wn.prototype).add=function(t,e){Qn(this),this.c=null,t=tr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},nt.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){bt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},nt.L=function(){Qn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},nt.K=function(t){Qn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=wt(e,this.a.get(tr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=wt(e,t[n])}return e},nt.set=function(t,e){return Qn(this),this.c=null,$n(this,t=tr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},nt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},nt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var er=function(t,e){this.b=t,this.a=e};function nr(t){this.g=t||rr,ot.PerformanceNavigationTiming?t=0<(t=ot.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ot.ia&&ot.ia.ya&&ot.ia.ya()&&ot.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var rr=10;function ir(t){return!!t.b||!!t.a&&t.a.size>=t.f}function or(t){return t.b?1:t.a?t.a.size:0}function sr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ar(t,e){t.a?t.a.add(e):t.b=e}function ur(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function cr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=et(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return It(t.c)}function hr(){}function fr(){this.a=new hr}function lr(t,e,n){var r=n||"";try{kn(t,(function(t,n){var i=t;ut(t)&&(i=Ne(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function pr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nr.prototype.cancel=function(){var t,e;if(this.c=cr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=et(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hr.prototype.stringify=function(t){return ot.JSON.stringify(t,void 0)},hr.prototype.parse=function(t){return ot.JSON.parse(t,void 0)};var dr=ot.JSON.parse;function vr(t){_e.call(this),this.headers=new On,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yr,this.D=this.F=!1}yt(vr,_e);var yr="",mr=/^https?$/i,gr=["POST","PUT"];function br(t){return"content-type"==t.toLowerCase()}function wr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ir(t),_r(t)}function Ir(t){t.u||(t.u=!0,Te(t,"complete"),Te(t,"error"))}function Er(t){if(t.b&&void 0!==it&&(!t.s[1]||4!=Ar(t)||2!=t.W()))if(t.l&&4==Ar(t))Ue(t.za,0,t);else if(Te(t,"readystatechange"),4==Ar(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Cn)[1]||null;if(!o&&ot.self&&ot.self.location){var s=ot.self.location.protocol;o=s.substr(0,s.length-1)}i=!mr.test(o?o.toLowerCase():"")}e=i}if(e)Te(t,"complete"),Te(t,"success");else{t.h=6;try{var a=2<Ar(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ir(t)}}finally{_r(t)}}}function _r(t,e){if(t.a){Tr(t);var n=t.a,r=t.s[0]?st:null;t.a=null,t.s=null,e||Te(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Tr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ot.clearTimeout(t.m),t.m=null)}function Ar(t){return t.a?t.a.readyState:0}function Nr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ot(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Un(t,e,n))}function Sr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function kr(t){this.pa=0,this.g=[],this.c=new Ke,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Sr("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Sr("baseRetryDelayMs",5e3,t),this.Ra=Sr("retryDelaySeedMs",1e4,t),this.Ma=Sr("forwardChannelMaxRetries",2,t),this.ma=Sr("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nr(t&&t.concurrentRequestLimit),this.ka=new fr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Or(t){if(Pr(t),3==t.v){var e=t.R++,n=Rn(t.B);Un(n,"SID",t.J),Un(n,"RID",e),Un(n,"TYPE","terminate"),Lr(t,n),(e=new dn(t,t.c,e,void 0)).H=2,e.i=Fn(Rn(n)),n=!1,ot.navigator&&ot.navigator.sendBeacon&&(n=ot.navigator.sendBeacon(e.i.toString(),"")),!n&&ot.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xr(e.g,null),e.a.ba(e.i)),e.u=vt(),En(e)}Hr(t)}function Dr(t){t.a&&(Ur(t),t.a.cancel(),t.a=null)}function Pr(t){Dr(t),t.j&&(ot.clearTimeout(t.j),t.j=null),qr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ot.clearTimeout(t.h),t.h=null)}function Cr(t,e){t.g.push(new er(t.Oa++,e)),3==t.v&&xr(t)}function xr(t){ir(t.b)||t.h||(t.h=!0,xe(t.Ba,t),t.u=0)}function Rr(t,e){var n;n=e?e.f:t.R++;var r=Rn(t.B);Un(r,"SID",t.J),Un(r,"RID",n),Un(r,"AID",t.P),Lr(t,r),t.i&&t.l&&Nr(r,t.i,t.l),n=new dn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ar(t.b,n),gn(n,r,e)}function Lr(t,e){t.f&&kn({},(function(t,n){Un(e,n,t)}))}function Mr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?pt(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{lr(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Vr(t){t.a||t.j||(t.T=1,xe(t.Aa,t),t.o=0)}function jr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=nn(pt(t.Aa,t),Br(t,t.o)),t.o++,!0)}function Ur(t){null!=t.s&&(ot.clearTimeout(t.s),t.s=null)}function Fr(t){t.a=new dn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Rn(t.la);Un(e,"RID","rpc"),Un(e,"SID",t.J),Un(e,"CI",t.H?"0":"1"),Un(e,"AID",t.P),Lr(t,e),Un(e,"TYPE","xmlhttp"),t.i&&t.l&&Nr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Fn(Rn(e)),n.j=null,n.I=!0,bn(n,t)}function qr(t){null!=t.m&&(ot.clearTimeout(t.m),t.m=null)}function Gr(t,e){var n=null;if(t.a==e){qr(t),Ur(t),t.a=null;var r=2}else{if(!sr(t.b,e))return;n=e.s,ur(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=vt()-e.u;var i=t.u;Te(r=Qe(),new en(r,n,e,i)),xr(t)}else Vr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(or(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=nn(pt(t.Ba,t,e),Br(t,t.u)),t.u++,0)))}(t,e)||2==r&&jr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:zr(t,5);break;case 4:zr(t,10);break;case 3:zr(t,6);break;default:zr(t,2)}}function Br(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function zr(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=pt(t.Ya,t);n||(n=new xn("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||Ln(n,"https"),Fn(n)),function(t,e){var n=new Ke;if(ot.Image){var r=new Image;r.onload=dt(pr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=dt(pr,n,r,"TestLoadImage: error",!1,e),r.onabort=dt(pr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=dt(pr,n,r,"TestLoadImage: timeout",!1,e),ot.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else tn(2);t.v=0,t.f&&t.f.ra(e),Hr(t),Pr(t)}function Hr(t){t.v=0,t.I=-1,t.f&&(0==cr(t.b).length&&0==t.g.length||(t.b.c.length=0,It(t.g),t.g.length=0),t.f.qa())}function Kr(t,e,n){var r=function(t){return t instanceof xn?Rn(t):new xn(t,void 0)}(n);if(""!=r.c)e&&Mn(r,e+"."+r.c),Vn(r,r.h);else{var i=ot.location;r=function(t,e,n,r){var i=new xn(null,void 0);return t&&Ln(i,t),e&&Mn(i,e),n&&Vn(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ot(t.V,(function(t,e){Un(r,e,t)})),e=t.A,n=t.na,e&&n&&Un(r,e,n),Un(r,"VER",t.ha),Lr(t,r),r}function Xr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t.Na)).F=t.C,e}function Yr(){}function Wr(){if(Vt&&!(10<=Number(Qt)))throw Error("Environmental error: no available transport.")}function Qr(t,e){_e.call(this),this.a=new kr(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Et(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Et(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Zr(this)}function Jr(t){fn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function $r(){ln.call(this),this.status=1}function Zr(t){this.a=t}(nt=vr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?an(this.H):an(cn),this.a.onreadystatechange=pt(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void wr(this,t)}t=n||"";var i=new On(this.headers);r&&kn(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=br,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ot.FormData&&t instanceof ot.FormData,!(0<=gt(gr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tr(this),0<this.o&&((this.D=function(t){return Vt&&Yt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=pt(this.xa,this)):this.m=Ue(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){wr(this,t)}},nt.xa=function(){void 0!==it&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Te(this,"timeout"),this.abort(8))},nt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Te(this,"complete"),Te(this,"abort"),_r(this))},nt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_r(this,!0)),vr.X.G.call(this)},nt.za=function(){this.j||(this.A||this.l||this.g?Er(this):this.Ua())},nt.Ua=function(){Er(this)},nt.W=function(){try{return 2<Ar(this)?this.a.status:-1}catch(t){return-1}},nt.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},nt.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dr(e)}},nt.ua=function(){return this.h},nt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(nt=kr.prototype).ha=8,nt.v=1,nt.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new dn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ct(r=Dt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mr(this,n,e),Un(i=Rn(this.B),"RID",t),Un(i,"CVER",22),this.A&&Un(i,"X-HTTP-Session-Id",this.A),Lr(this,i),this.i&&r&&Nr(i,this.i,r),ar(this.b,n),this.Ia&&Un(i,"TYPE","init"),this.da?(Un(i,"$req",e),Un(i,"SID","null"),n.U=!0,gn(n,i,null)):gn(n,i,e),this.v=2}}else 3==this.v&&(t?Rr(this,t):0==this.g.length||ir(this.b)||Rr(this))},nt.Aa=function(){if(this.j=null,Fr(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=nn(pt(this.Ta,this),t)}},nt.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,tn(10),Dr(this),Fr(this))},nt.Sa=function(){null!=this.m&&(this.m=null,Dr(this),jr(this),tn(19))},nt.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),tn(2)):(this.c.info("Failed to ping google.com"),tn(1))},(nt=Yr.prototype).ta=function(){},nt.sa=function(){},nt.ra=function(){},nt.qa=function(){},nt.Ja=function(){},Wr.prototype.a=function(t,e){return new Qr(t,e)},yt(Qr,_e),Qr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;tn(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Kr(t,null,t.fa),xr(t)},Qr.prototype.close=function(){Or(this.a)},Qr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Cr(this.a,e)}else this.l?((e={}).__data__=Ne(t),Cr(this.a,e)):Cr(this.a,t)},Qr.prototype.G=function(){this.a.f=null,delete this.f,Or(this.a),delete this.a,Qr.X.G.call(this)},yt(Jr,fn),yt($r,ln),yt(Zr,Yr),Zr.prototype.ta=function(){Te(this.a,"a")},Zr.prototype.sa=function(t){Te(this.a,new Jr(t))},Zr.prototype.ra=function(t){Te(this.a,new $r(t))},Zr.prototype.qa=function(){Te(this.a,"b")},Wr.prototype.createWebChannel=Wr.prototype.a,Qr.prototype.send=Qr.prototype.h,Qr.prototype.open=Qr.prototype.g,Qr.prototype.close=Qr.prototype.close,rn.NO_ERROR=0,rn.TIMEOUT=8,rn.HTTP_ERROR=6,on.COMPLETE="complete",un.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",_e.prototype.listen=_e.prototype.va,vr.prototype.listenOnce=vr.prototype.wa,vr.prototype.getLastError=vr.prototype.Qa,vr.prototype.getLastErrorCode=vr.prototype.ua,vr.prototype.getStatus=vr.prototype.W,vr.prototype.getResponseJson=vr.prototype.Pa,vr.prototype.getResponseText=vr.prototype.$,vr.prototype.send=vr.prototype.ba;var ti,ei,ni,ri=function(){return new Wr},ii=function(){return Qe()},oi=rn,si=on,ai=Ye,ui={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ci=un,hi=vr,fi=ti={};function li(){throw new Error("setTimeout has not been defined")}function pi(){throw new Error("clearTimeout has not been defined")}function di(t){if(ei===setTimeout)return setTimeout(t,0);if((ei===li||!ei)&&setTimeout)return ei=setTimeout,setTimeout(t,0);try{return ei(t,0)}catch(e){try{return ei.call(null,t,0)}catch(e){return ei.call(this,t,0)}}}!function(){try{ei="function"==typeof setTimeout?setTimeout:li}catch(t){ei=li}try{ni="function"==typeof clearTimeout?clearTimeout:pi}catch(t){ni=pi}}();var vi,yi=[],mi=!1,gi=-1;function bi(){mi&&vi&&(mi=!1,vi.length?yi=vi.concat(yi):gi=-1,yi.length&&wi())}function wi(){if(!mi){var t=di(bi);mi=!0;for(var e=yi.length;e;){for(vi=yi,yi=[];++gi<e;)vi&&vi[gi].run();gi=-1,e=yi.length}vi=null,mi=!1,function(t){if(ni===clearTimeout)return clearTimeout(t);if((ni===pi||!ni)&&clearTimeout)return ni=clearTimeout,clearTimeout(t);try{ni(t)}catch(e){try{return ni.call(null,t)}catch(e){return ni.call(this,t)}}}(t)}}function Ii(t,e){this.fun=t,this.array=e}function Ei(){}fi.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];yi.push(new Ii(t,e)),1!==yi.length||mi||di(wi)},Ii.prototype.run=function(){this.fun.apply(null,this.array)},fi.title="browser",fi.browser=!0,fi.env={},fi.argv=[],fi.version="",fi.versions={},fi.on=Ei,fi.addListener=Ei,fi.once=Ei,fi.off=Ei,fi.removeListener=Ei,fi.removeAllListeners=Ei,fi.emit=Ei,fi.prependListener=Ei,fi.prependOnceListener=Ei,fi.listeners=function(t){return[]},fi.binding=function(t){throw new Error("process.binding is not supported")},fi.cwd=function(){return"/"},fi.chdir=function(t){throw new Error("process.chdir is not supported")},fi.umask=function(){return 0};var _i=ti,Ti=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Ai=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Ni=new M("@firebase/firestore");
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Si(){return Ni.logLevel}function ki(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=k.DEBUG){var r=e.map(Pi);Ni.debug.apply(Ni,u(["Firestore (8.2.9): "+t],r))}}function Oi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=k.ERROR){var r=e.map(Pi);Ni.error.apply(Ni,u(["Firestore (8.2.9): "+t],r))}}function Di(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ni.logLevel<=k.WARN){var r=e.map(Pi);Ni.warn.apply(Ni,u(["Firestore (8.2.9): "+t],r))}}function Pi(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */var e}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Ci(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw Oi(e),new Error(e)}function xi(t,e){t||Ci()}function Ri(t,e){return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Li(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Mi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Li(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Vi(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ui(t){return t+"\0"}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Fi=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Vi(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Fi.T=new Fi("");var qi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return n(e,t),e}(Error),Bi=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Fi.fromBase64String(e))}catch(e){throw new Gi(qi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Fi.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),zi=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();zi.UNAUTHENTICATED=new zi(null),zi.R=new zi("google-credentials-uid"),zi.P=new zi("first-party-uid");
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var Hi=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Ki=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(zi.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Xi=function(){function t(t){var e=this;this.D=null,this.currentUser=zi.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(ki("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(xi("string"==typeof n.accessToken),new Hi(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return xi(null===t||"string"==typeof t),new zi(t)},t}(),Yi=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=zi.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Wi=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Yi(this.F,this.O))},t.prototype.v=function(t){t(zi.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Qi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Qi.q=-1;var Ji=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Gi(qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Gi(qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Gi(qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Gi(qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Vi(this.nanoseconds,t.nanoseconds):Vi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),$i=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Ji(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Zi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ci(),void 0===n?n=t.length-e:n>t.length-e&&Ci(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Gi(qi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Zi),eo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return eo.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Gi(qi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Gi(qi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Gi(qi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Gi(qi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Zi),ro=function(){function t(t){this.path=t}return t._t=function(e){return new t(to.ot(e))},t.ft=function(e){return new t(to.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===to.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return to.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new to(e.slice()))},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function io(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oo(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function so(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var ao=function(){function t(t){this.fields=t,t.sort(no.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return ji(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),uo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function co(t){if(xi(!!t),"string"==typeof t){var e=0,n=uo.exec(t);if(xi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ho(t.seconds),nanos:ho(t.nanos)}}function ho(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function fo(t){return"string"==typeof t?Fi.fromBase64String(t):Fi.fromUint8Array(t)}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function lo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function po(t){var e=t.mapValue.fields.__previous_value__;return lo(e)?po(e):e}function vo(t){var e=co(t.mapValue.fields.__local_write_time__.timestampValue);return new Ji(e.seconds,e.nanos)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function yo(t){return null==t}function mo(t){return 0===t&&1/t==-1/0}function go(t){return"number"==typeof t&&Number.isInteger(t)&&!mo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lo(t)?4:10:Ci()}function wo(t,e){var n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vo(t).isEqual(vo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=co(t.timestampValue),r=co(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return fo(t.bytesValue).isEqual(fo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ho(t.geoPointValue.latitude)===ho(e.geoPointValue.latitude)&&ho(t.geoPointValue.longitude)===ho(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ho(t.integerValue)===ho(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ho(t.doubleValue),r=ho(e.doubleValue);return n===r?mo(n)===mo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(io(n)!==io(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wo(n[i],r[i])))return!1;return!0}(t,e);default:return Ci()}}function Io(t,e){return void 0!==(t.values||[]).find((function(t){return wo(t,e)}))}function Eo(t,e){var n=bo(t),r=bo(e);if(n!==r)return Vi(n,r);switch(n){case 0:return 0;case 1:return Vi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ho(t.integerValue||t.doubleValue),r=ho(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return _o(t.timestampValue,e.timestampValue);case 4:return _o(vo(t),vo(e));case 5:return Vi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=fo(t),r=fo(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Vi(n[i],r[i]);if(0!==o)return o}return Vi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Vi(ho(t.latitude),ho(e.latitude));return 0!==n?n:Vi(ho(t.longitude),ho(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Eo(n[i],r[i]);if(o)return o}return Vi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Vi(r[s],o[s]);if(0!==a)return a;var u=Eo(n[r[s]],i[o[s]]);if(0!==u)return u}return Vi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ci()}}function _o(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Vi(t,e);var n=co(t),r=co(e),i=Vi(n.seconds,r.seconds);return 0!==i?i:Vi(n.nanos,r.nanos)}function To(t){return Ao(t)}function Ao(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=co(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?fo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ro.ft(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ao(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ao(t.fields[o])}return e+"}"}(t.mapValue):Ci();var e,n}function No(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function So(t){return!!t&&"integerValue"in t}function ko(t){return!!t&&"arrayValue"in t}function Oo(t){return!!t&&"nullValue"in t}function Do(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Po(t){return!!t&&"mapValue"in t}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Co=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Po(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return wo(this.proto,t.proto)},t}(),xo=function(){function t(t){void 0===t&&(t=Co.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===bo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(no.ct(),this.At);return null!=t?new Co(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Po(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Ro(t){var e=[];return oo(t.fields||{},(function(t,n){var r=new no([t]);if(Po(n)){var i=Ro(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new ao(e)}var Lo=function(t,e){this.key=t,this.version=e},Mo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return n(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Lo),Vo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return n(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Lo),jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Lo),Uo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Fo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Uo(t,e,n,r,i,o,s)}function qo(t){var e=Ri(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+To(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),yo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ts(e.startAt)),e.endAt&&(n+="|ub:",n+=ts(e.endAt)),e.vt=n}return e.vt}function Go(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ns(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!wo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!is(t.startAt,e.startAt)&&is(t.endAt,e.endAt)}function Bo(t){return ro.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var zo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return n(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Ho(t,n,r):"array-contains"===n?new Wo(t,r):"in"===n?new Qo(t,r):"not-in"===n?new Jo(t,r):"array-contains-any"===n?new $o(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Ko(t,n):new Xo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Eo(e,this.value)):null!==e&&bo(this.value)===bo(e)&&this.Dt(Eo(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ci()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ho=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ro.ft(r.referenceValue),i}return n(e,t),e.prototype.matches=function(t){var e=ro.H(t.key,this.key);return this.Dt(e)},e}(zo),Ko=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Yo("in",n),r}return n(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(zo),Xo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Yo("not-in",n),r}return n(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(zo);function Yo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ro.ft(t.referenceValue)}))}var Wo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return n(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ko(e)&&Io(e.arrayValue,this.value)},e}(zo),Qo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return n(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Io(this.value.arrayValue,e)},e}(zo),Jo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return n(e,t),e.prototype.matches=function(t){if(Io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Io(this.value.arrayValue,e)},e}(zo),$o=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return n(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ko(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Io(e.value.arrayValue,t)}))},e}(zo),Zo=function(t,e){this.position=t,this.before=e};function ts(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return To(t)})).join(",")}var es=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ns(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function rs(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?ro.H(ro.ft(s.referenceValue),n.key):Eo(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function is(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wo(t.position[n],e.position[n]))return!1;return!0}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var os=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function ss(t,e,n,r,i,o,s,a){return new os(t,e,n,r,i,o,s,a)}function as(t){return new os(t)}function us(t){return!yo(t.limit)&&"F"===t.limitType}function cs(t){return!yo(t.limit)&&"L"===t.limitType}function hs(t){return t.xt.length>0?t.xt[0].field:null}function fs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function ls(t){return null!==t.collectionGroup}function ps(t){var e=Ri(t);if(null===e.Nt){e.Nt=[];var n=fs(e),r=hs(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new es(n)),e.Nt.push(new es(no.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new es(no.ht(),u))}}}return e.Nt}function ds(t){var e=Ri(t);if(!e.$t)if("F"===e.limitType)e.$t=Fo(e.path,e.collectionGroup,ps(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ps(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new es(o.field,s))}var a=e.endAt?new Zo(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Zo(e.startAt.position,!e.startAt.before):null;e.$t=Fo(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.$t}function vs(t,e,n){return new os(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ys(t,e){return Go(ds(t),ds(e))&&t.limitType===e.limitType}function ms(t){return qo(ds(t))+"|lt:"+t.limitType}function gs(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+To(e.value);var e})).join(", ")+"]"),yo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ts(t.startAt)),t.endAt&&(e+=", endAt: "+ts(t.endAt)),"Target("+e+")"}(ds(t))+"; limitType="+t.limitType+")"}function bs(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):ro.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!rs(t.startAt,ps(t),e)||t.endAt&&rs(t.endAt,ps(t),e))}(t,e)}function ws(t){return function(e,n){for(var r=!1,i=0,o=ps(t);i<o.length;i++){var s=o[i],a=Is(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Is(t,e,n){var r=t.field.ut()?ro.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Eo(r,i):Ci()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ci()}}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Es=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=$i.min()),void 0===o&&(o=$i.min()),void 0===s&&(s=Fi.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function _s(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mo(e)?"-0":e}}function Ts(t){return{integerValue:""+t}}function As(t,e){return go(e)?Ts(e):_s(t,e)}
/**
  * @license
  * Copyright 2018 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Ns=function(){this.qt=void 0};function Ss(t,e,n){return t instanceof Ds?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ps?Cs(t,e):t instanceof xs?Rs(t,e):function(t,e){var n=Os(t,e),r=Ms(n)+Ms(t.Ut);return So(n)&&So(t.Ut)?Ts(r):_s(t.Qt,r)}(t,e)}function ks(t,e,n){return t instanceof Ps?Cs(t,e):t instanceof xs?Rs(t,e):n}function Os(t,e){return t instanceof Ls?So(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Ns),Ps=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return n(e,t),e}(Ns);function Cs(t,e){for(var n=Vs(e),r=function(t){n.some((function(e){return wo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var xs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return n(e,t),e}(Ns);function Rs(t,e){for(var n=Vs(e),r=function(t){n=n.filter((function(e){return!wo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ls=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return n(e,t),e}(Ns);function Ms(t){return ho(t.integerValue||t.doubleValue)}function Vs(t){return ko(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var js=function(t,e){this.field=t,this.transform=e},Us=function(t,e){this.version=t,this.transformResults=e},Fs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function qs(t,e){return void 0!==t.updateTime?e instanceof Mo&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Mo}var Gs=function(){};function Bs(t,e,n){return t instanceof Ys?function(t,e,n){var r=t.value;if(n.transformResults){var i=Js(t.fieldTransforms,e,n.transformResults);r=Zs(t.fieldTransforms,r,i)}return new Mo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ws?function(t,e,n){if(!qs(t.jt,e))return new jo(t.key,n.version);var r=Qs(t,e,n.transformResults?Js(t.fieldTransforms,e,n.transformResults):[]);return new Mo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Vo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function zs(t,e,n){return t instanceof Ys?function(t,e,n){if(!qs(t.jt,e))return e;var r=t.value,i=$s(t.fieldTransforms,n,e);r=Zs(t.fieldTransforms,r,i);var o=Xs(e);return new Mo(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Ws?function(t,e,n){if(!qs(t.jt,e))return e;var r=Xs(e),i=Qs(t,e,$s(t.fieldTransforms,n,e));return new Mo(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return qs(t.jt,e)?new Vo(t.key,$i.min()):e}(t,e)}function Hs(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Mo?e.field(o.field):void 0,a=Os(o.transform,s||null);null!=a&&(n=null==n?(new xo).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Ks(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ji(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ps&&e instanceof Ps||t instanceof xs&&e instanceof xs?ji(t.elements,e.elements,wo):t instanceof Ls&&e instanceof Ls?wo(t.Ut,e.Ut):t instanceof Ds&&e instanceof Ds}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Xs(t){return t instanceof Mo?t.version:$i.min()}var Ys=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return n(e,t),e}(Gs),Ws=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return n(e,t),e}(Gs);function Qs(t,e,n){var r;return r=function(t,e){var n=new xo(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof Mo?e.data():Co.empty()),Zs(t.fieldTransforms,r,n)}function Js(t,e,n){var r=[];xi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Mo&&(a=e.field(o.field)),r.push(ks(s,a,n[i]))}return r}function $s(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Mo&&(u=n.field(s.field)),r.push(Ss(a,u,e))}return r}function Zs(t,e,n){for(var r=new xo(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var ta,ea,na=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return n(e,t),e}(Gs),ra=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return n(e,t),e}(Gs),ia=function(t){this.count=t};function oa(t){switch(t){case qi.OK:return Ci();case qi.CANCELLED:case qi.UNKNOWN:case qi.DEADLINE_EXCEEDED:case qi.RESOURCE_EXHAUSTED:case qi.INTERNAL:case qi.UNAVAILABLE:case qi.UNAUTHENTICATED:return!1;case qi.INVALID_ARGUMENT:case qi.NOT_FOUND:case qi.ALREADY_EXISTS:case qi.PERMISSION_DENIED:case qi.FAILED_PRECONDITION:case qi.ABORTED:case qi.OUT_OF_RANGE:case qi.UNIMPLEMENTED:case qi.DATA_LOSS:return!0;default:return Ci()}}function sa(t){if(void 0===t)return Oi("GRPC error has no .code"),qi.UNKNOWN;switch(t){case ta.OK:return qi.OK;case ta.CANCELLED:return qi.CANCELLED;case ta.UNKNOWN:return qi.UNKNOWN;case ta.DEADLINE_EXCEEDED:return qi.DEADLINE_EXCEEDED;case ta.RESOURCE_EXHAUSTED:return qi.RESOURCE_EXHAUSTED;case ta.INTERNAL:return qi.INTERNAL;case ta.UNAVAILABLE:return qi.UNAVAILABLE;case ta.UNAUTHENTICATED:return qi.UNAUTHENTICATED;case ta.INVALID_ARGUMENT:return qi.INVALID_ARGUMENT;case ta.NOT_FOUND:return qi.NOT_FOUND;case ta.ALREADY_EXISTS:return qi.ALREADY_EXISTS;case ta.PERMISSION_DENIED:return qi.PERMISSION_DENIED;case ta.FAILED_PRECONDITION:return qi.FAILED_PRECONDITION;case ta.ABORTED:return qi.ABORTED;case ta.OUT_OF_RANGE:return qi.OUT_OF_RANGE;case ta.UNIMPLEMENTED:return qi.UNIMPLEMENTED;case ta.DATA_LOSS:return qi.DATA_LOSS;default:return Ci()}}(ea=ta||(ta={}))[ea.OK=0]="OK",ea[ea.CANCELLED=1]="CANCELLED",ea[ea.UNKNOWN=2]="UNKNOWN",ea[ea.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ea[ea.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ea[ea.NOT_FOUND=5]="NOT_FOUND",ea[ea.ALREADY_EXISTS=6]="ALREADY_EXISTS",ea[ea.PERMISSION_DENIED=7]="PERMISSION_DENIED",ea[ea.UNAUTHENTICATED=16]="UNAUTHENTICATED",ea[ea.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ea[ea.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ea[ea.ABORTED=10]="ABORTED",ea[ea.OUT_OF_RANGE=11]="OUT_OF_RANGE",ea[ea.UNIMPLEMENTED=12]="UNIMPLEMENTED",ea[ea.INTERNAL=13]="INTERNAL",ea[ea.UNAVAILABLE=14]="UNAVAILABLE",ea[ea.DATA_LOSS=15]="DATA_LOSS";
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var aa=function(){function t(t,e){this.H=t,this.root=e||ca.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,ca.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,ca.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new ua(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new ua(this.root,t,this.H,!1)},t.prototype.ne=function(){return new ua(this.root,null,this.H,!0)},t.prototype.se=function(t){return new ua(this.root,t,this.H,!0)},t}(),ua=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),ca=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Ci();if(this.right.le())throw Ci();var t=this.left.Ie();if(t!==this.right.Ie())throw Ci();return t+(this.le()?0:1)},t}();ca.EMPTY=null,ca.RED=!0,ca.Ht=!1,ca.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ci()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new ca(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var ha=function(){function t(t){this.H=t,this.data=new aa(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new fa(this.data.te())},t.prototype.ee=function(t){return new fa(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),fa=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),la=new aa(ro.H);function pa(){return la}function da(){return pa()}var va=new aa(ro.H);function ya(){return va}var ma=new aa(ro.H);function ga(){return ma}var ba=new ha(ro.H);function wa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ba,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ia=new ha(Vi);function Ea(){return Ia}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var _a=function(){function t(t){this.H=t?function(e,n){return t(e,n)||ro.H(e.key,n.key)}:function(t,e){return ro.H(t.key,e.key)},this.ge=ya(),this.Ve=new aa(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Ta=function(){function t(){this.be=new aa(ro.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Ci():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Aa=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,_a.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&ys(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Na=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,Sa.Le(e,n)),new t($i.min(),r,Ea(),pa(),wa())},t}(),Sa=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Fi.T,n,wa(),wa(),wa())},t}(),ka=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},Oa=function(t,e){this.targetId=t,this.je=e},Da=function(t,e,n,r){void 0===n&&(n=Fi.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Pa=function(){function t(){this.Ge=0,this.ze=Ra(),this.He=Fi.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=wa(),e=wa(),n=wa();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ci()}})),new Sa(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=Ra()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),Ca=function(){function t(t){this.un=t,this.hn=new Map,this.ln=pa(),this._n=xa(),this.fn=new ha(Vi)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Mo?this.wn(r,t.We):t.We instanceof Vo&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Ci()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Bo(i))if(0===n){var o=new ro(i.path);this.En(e,o,new Vo(o,$i.min()))}else xi(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Bo(o.target)){var s=new ro(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new Vo(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=wa();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Na(t,n,this.fn,this.ln,r);return this.ln=pa(),this._n=xa(),this.fn=new ha(Vi),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Pa,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new ha(Vi),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||ki("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Pa),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function xa(){return new aa(ro.H)}function Ra(){return new aa(ro.H)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var La={asc:"ASCENDING",desc:"DESCENDING"},Ma={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Va=function(t,e){this.t=t,this.Bt=e};function ja(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ua(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function Fa(t,e){return ja(t,e.j())}function qa(t){return xi(!!t),$i.K(function(t){var e=co(t);return new Ji(e.seconds,e.nanos)}(t))}function Ga(t,e){return function(t){return new to(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Ba(t){var e=to.ot(t);return xi(pu(e)),e}function za(t,e){return Ga(t.t,e.path)}function Ha(t,e){var n=Ba(e);if(n.get(1)!==t.t.projectId)throw new Gi(qi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Gi(qi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new ro(Wa(n))}function Ka(t,e){return Ga(t.t,e)}function Xa(t){var e=Ba(t);return 4===e.length?to.ct():Wa(e)}function Ya(t){return new to(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Wa(t){return xi(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Qa(t,e,n){return{name:za(t,e),fields:n.proto.mapValue.fields}}function Ja(t,e,n){var r=Ha(t,e.name),i=qa(e.updateTime),o=new Co({mapValue:{fields:e.fields}});return new Mo(r,i,o,{hasCommittedMutations:!!n})}function $a(t,e){var n;if(e instanceof Ys)n={update:Qa(t,e.key,e.value)};else if(e instanceof na)n={delete:za(t,e.key)};else if(e instanceof Ws)n={update:Qa(t,e.key,e.data),updateMask:lu(e.Gt)};else{if(!(e instanceof ra))return Ci();n={verify:za(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ds)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ps)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof xs)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Ls)return{fieldPath:e.field.rt(),increment:n.Ut};throw Ci()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Fa(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ci()}(t,e.jt)),n}function Za(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Fs.updateTime(qa(t.updateTime)):void 0!==t.exists?Fs.exists(t.exists):Fs.Kt()}(e.currentDocument):Fs.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)xi("REQUEST_TIME"===e.setToServerValue),n=new Ds;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Ps(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new xs(i)}else"increment"in e?n=new Ls(t,e.increment):Ci();var o=no.lt(e.fieldPath);return new js(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ha(t,e.update.name),o=new Co({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new ao(e.map((function(t){return no.lt(t)})))}(e.updateMask);return new Ws(i,o,s,n,r)}return new Ys(i,o,n,r)}if(e.delete){var a=Ha(t,e.delete);return new na(a,n)}if(e.verify){var u=Ha(t,e.verify);return new ra(u,n)}return Ci()}function tu(t,e){return{documents:[Ka(t,e.path)]}}function eu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ka(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ka(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Do(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NAN"}};if(Oo(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Do(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NAN"}};if(Oo(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uu(t.field),op:au(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:uu(t.field),direction:su(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||yo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=iu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=iu(e.endAt)),n}function nu(t){var e=Xa(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=ru(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new es(cu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return yo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=ou(n.startAt));var h=null;return n.endAt&&(h=ou(n.endAt)),ss(e,i,a,s,u,"F",c,h)}function ru(t){return t?void 0!==t.unaryFilter?[fu(t)]:void 0!==t.fieldFilter?[hu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ru(t)})).reduce((function(t,e){return t.concat(e)})):Ci():[]}function iu(t){return{before:t.before,values:t.position}}function ou(t){var e=!!t.before,n=t.values||[];return new Zo(n,e)}function su(t){return La[t]}function au(t){return Ma[t]}function uu(t){return{fieldPath:t.rt()}}function cu(t){return no.lt(t.fieldPath)}function hu(t){return zo.create(cu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ci()}}(t.fieldFilter.op),t.fieldFilter.value)}function fu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=cu(t.unaryFilter.field);return zo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=cu(t.unaryFilter.field);return zo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cu(t.unaryFilter.field);return zo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cu(t.unaryFilter.field);return zo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ci()}}function lu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function pu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var du=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},vu=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Ci(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),yu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new du,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new bu(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Tu(e.target.error);n.Bn.reject(new bu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new bu(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(ki("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Iu(e)},t}(),mu=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(l())&&Oi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ki("SimpleDb","Removing database:",t),Eu(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=l(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return void 0!==_i&&"YES"===(null===(t=_i.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ki("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new bu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Gi(qi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new bu(t,n))},i.onupgradeneeded=function(t){ki("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){ki("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c;return o(this,(function(h){switch(h.label){case 0:i="readonly"===e,s=0,a=function(){var e,a,c,h,f;return o(this,(function(o){switch(o.label){case 0:++s,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,u.Hn(t)];case 2:return u.db=o.sent(),e=yu.open(u.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),vu.reject(t)})).On(),c={},a.catch((function(){})),[4,e.qn];case 3:return[2,(c.value=(o.sent(),a),c)];case 4:return h=o.sent(),f="FirebaseError"!==h.name&&s<3,ki("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),gu=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Eu(this.Zn.delete())},t}(),bu=function(t){function e(e,n){var r=this;return(r=t.call(this,qi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return n(e,t),e}(Gi);
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function wu(t){return"IndexedDbTransactionError"===t.name}var Iu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ki("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ki("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Eu(n)},t.prototype.add=function(t){return ki("SimpleDb","ADD",this.store.name,t,t),Eu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Eu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ki("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ki("SimpleDb","DELETE",this.store.name,t),Eu(this.store.delete(t))},t.prototype.count=function(){return ki("SimpleDb","COUNT",this.store.name),Eu(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){ki("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new vu((function(n,r){e.onerror=function(t){var e=Tu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new vu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new gu(i),s=e(i.primaryKey,i.value,o);if(s instanceof vu){var a=s.catch((function(t){return o.done(),vu.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return vu.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Eu(t){return new vu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Tu(t.target.error);n(e)}}))}var _u=!1;function Tu(t){var e=mu.Qn(l());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Gi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return _u||(_u=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Au=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new du,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Gi(qi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Nu(t,e){if(Oi("AsyncQueue",e+": "+t),wu(t))return new Gi(qi.UNAVAILABLE,e+": "+t);throw t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Su="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ku=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Ou(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pu(e)),e=Du(t.get(n),e);return Pu(e)}function Du(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Pu(t){return t+""}function Cu(t){var e=t.length;if(xi(e>=2),2===e)return xi(""===t.charAt(0)&&""===t.charAt(1)),to.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Ci(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ci()}o=s+2}return new to(r)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var xu=function(t,e){this.seconds=t,this.nanoseconds=e},Ru=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ru.store="owner",Ru.key="owner";var Lu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Lu.store="mutationQueues",Lu.keyPath="userId";var Mu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Mu.store="mutations",Mu.keyPath="batchId",Mu.userMutationsIndex="userMutationsIndex",Mu.userMutationsKeyPath=["userId","batchId"];var Vu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Ou(e)]},t.key=function(t,e,n){return[t,Ou(e),n]},t}();Vu.store="documentMutations",Vu.PLACEHOLDER=new Vu;var ju=function(t,e){this.path=t,this.readTime=e},Uu=function(t,e){this.path=t,this.version=e},Fu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Fu.store="remoteDocuments",Fu.readTimeIndex="readTimeIndex",Fu.readTimeIndexPath="readTime",Fu.collectionReadTimeIndex="collectionReadTimeIndex",Fu.collectionReadTimeIndexPath=["parentPath","readTime"];var qu=function(t){this.byteSize=t};qu.store="remoteDocumentGlobal",qu.key="remoteDocumentGlobalKey";var Gu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Gu.store="targets",Gu.keyPath="targetId",Gu.queryTargetsIndexName="queryTargetsIndex",Gu.queryTargetsKeyPath=["canonicalId","targetId"];var Bu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Bu.store="targetDocuments",Bu.keyPath=["targetId","path"],Bu.documentTargetsIndex="documentTargetsIndex",Bu.documentTargetsKeyPath=["path","targetId"];var zu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};zu.key="targetGlobalKey",zu.store="targetGlobal";var Hu=function(t,e){this.collectionId=t,this.parent=e};Hu.store="collectionParents",Hu.keyPath=["collectionId","parent"];var Ku=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ku.store="clientMetadata",Ku.keyPath="clientId";var Xu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Xu.store="bundles",Xu.keyPath="bundleId";var Yu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Yu.store="namedQueries",Yu.keyPath="name";var Wu=u(u(u(u([Lu.store,Mu.store,Vu.store,Fu.store,Gu.store,Ru.store,zu.store,Bu.store],[Ku.store]),[qu.store]),[Hu.store]),[Xu.store,Yu.store]),Qu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return n(e,t),e}(ku);
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Ju(t,e){var n=Ri(t);return mu.zn(n.ps,e)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var $u=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Bs(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=zs(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=zs(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),wa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ji(this.mutations,t.mutations,(function(t,e){return Ks(t,e)}))&&ji(this.baseMutations,t.baseMutations,(function(t,e){return Ks(t,e)}))},t}(),Zu=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){xi(e.mutations.length===r.length);for(var i=ga(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),tc=function(t){this.Fs=t};function ec(t,e){if(e.document)return Ja(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ro.Et(e.noDocument.path),r=sc(e.noDocument.readTime);return new Vo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=ro.Et(e.unknownDocument.path);return r=sc(e.unknownDocument.version),new jo(i,r)}return Ci()}function nc(t,e,n){var r=rc(n),i=e.key.path.X().it();if(e instanceof Mo){var o=function(t,e){return{name:za(t,e.key),fields:e.bt().mapValue.fields,updateTime:ja(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Fu(null,null,o,s,r,i)}if(e instanceof Vo){var a=e.key.path.it(),u=oc(e.version);return s=e.hasCommittedMutations,new Fu(null,new ju(a,u),null,s,r,i)}if(e instanceof jo){var c=e.key.path.it(),h=oc(e.version);return new Fu(new Uu(c,h),null,null,!0,r,i)}return Ci()}function rc(t){var e=t.j();return[e.seconds,e.nanoseconds]}function ic(t){var e=new Ji(t[0],t[1]);return $i.K(e)}function oc(t){var e=t.j();return new xu(e.seconds,e.nanoseconds)}function sc(t){var e=new Ji(t.seconds,t.nanoseconds);return $i.K(e)}function ac(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Za(t.Fs,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Za(t.Fs,e)})),a=Ji.fromMillis(e.localWriteTimeMs);return new $u(e.batchId,a,n,s)}function uc(t){var e,n,r=sc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?sc(t.lastLimboFreeSnapshotVersion):$i.min();return void 0!==t.query.documents?(xi(1===(n=t.query).documents.length),e=ds(as(Xa(n.documents[0])))):e=function(t){return ds(nu(t))}(t.query),new Es(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Fi.fromBase64String(t.resumeToken))}function cc(t,e){var n,r=oc(e.Ot),i=oc(e.lastLimboFreeSnapshotVersion);n=Bo(e.target)?tu(t.Fs,e.target):eu(t.Fs,e.target);var o=e.resumeToken.toBase64();return new Gu(e.targetId,qo(e.target),r,o,e.sequenceNumber,i,n)}function hc(t){var e=nu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?vs(e,e.limit,"L"):e}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var fc=function(){function t(){}return t.prototype.Os=function(t,e){return lc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:sc(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return lc(t).put({bundleId:(n=e).id,createTime:oc(qa(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return pc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:hc(e.bundledQuery),readTime:sc(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return pc(t).put(function(t){return{name:t.name,readTime:oc(qa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function lc(t){return Ju(t,Xu.store)}function pc(t){return Ju(t,Yu.store)}
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var dc=function(){function t(){this.Bs=new vc}return t.prototype.qs=function(t,e){return this.Bs.add(e),vu.resolve()},t.prototype.Us=function(t,e){return vu.resolve(this.Bs.getEntries(e))},t}(),vc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new ha(to.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ha(to.H)).it()},t}(),yc=function(){function t(){this.Qs=new vc}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:Ou(i)};return mc(t).put(o)}return vu.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ui(e),""],!1,!0);return mc(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Cu(o.parent))}return n}))},t}();function mc(t){return Ju(t,Hu.store)}
/**
  * @license
  * Copyright 2018 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var gc={Ks:!1,Ws:0,js:0,Gs:0},bc=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function wc(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){if(t.code!==qi.FAILED_PRECONDITION||t.message!==Su)throw t;return ki("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */bc.Xs=10,bc.Zs=1e3,bc.ti=new bc(41943040,bc.Xs,bc.Zs),bc.ei=new bc(-1,0,0);var Ic=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.si(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){oo(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.et=function(){return so(this.ii)},t}(),Ec=function(){function t(){this.ri=new Ic((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:$i.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?vu.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function _c(t,e,n){var r=t.store(Mu.store),i=t.store(Vu.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){xi(1===a)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Vu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return vu.Mn(o).next((function(){return c}))}function Tc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ci();e=t.noDocument}return JSON.stringify(e).length}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Ac=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return xi(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sc(t).hs({index:Mu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=kc(t),s=Sc(t);return s.add({}).next((function(a){xi("number"==typeof a);for(var u=new $u(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return $a(t.Fs,e)})),i=n.mutations.map((function(e){return $a(t.Fs,e)}));return new Mu(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),h=[],f=new ha((function(t,e){return Vi(t.rt(),e.rt())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Vu.key(i.userId,d.key.path,a);f=f.add(d.key.path.X()),h.push(s.put(c)),h.push(o.put(v,Vu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),vu.Mn(h).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return Sc(t).get(e).next((function(t){return t?(xi(t.userId===n.userId),ac(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?vu.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Sc(t).hs({index:Mu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(xi(e.batchId>=r),o=ac(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Sc(t).hs({index:Mu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sc(t).rs(Mu.userMutationsIndex,n).next((function(t){return t.map((function(t){return ac(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=Vu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return kc(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Cu(u);if(a===n.userId&&e.path.isEqual(h))return Sc(t).get(c).next((function(t){if(!t)throw Ci();xi(t.userId===n.userId),o.push(ac(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new ha(Vi),i=[];return e.forEach((function(e){var o=Vu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=kc(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Cu(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),vu.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=Vu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ha(Vi);return kc(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Cu(u);s===n.userId&&r.nt(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Sc(t).get(e).next((function(t){if(null===t)throw Ci();xi(t.userId===n.userId),r.push(ac(n.Qt,t))})))})),vu.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return _c(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),vu.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return vu.resolve();var r=IDBKeyRange.lowerBound(Vu.prefixForUser(e.userId)),i=[];return kc(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Cu(t[1]);i.push(o)}else r.done()})).next((function(){xi(0===i.length)}))}))},t.prototype.Fi=function(t,e){return Nc(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return Oc(t).get(this.userId).next((function(t){return t||new Lu(e.userId,-1,"")}))},t}();function Nc(t,e,n){var r=Vu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return kc(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Sc(t){return Ju(t,Mu.store)}function kc(t){return Ju(t,Vu.store)}function Oc(t){return Ju(t,Lu.store)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Dc=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),Pc=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new Dc(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return $i.K(new Ji(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Cc(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return xi(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Cc(t).hs((function(s,a){var u=uc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return vu.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Cc(t).hs((function(t,n){var r=uc(n);e(r)}))},t.prototype.qi=function(t){return xc(t).get(zu.key).next((function(t){return xi(null!==t),t}))},t.prototype.Ui=function(t,e){return xc(t).put(zu.key,e)},t.prototype.Gi=function(t,e){return Cc(t).put(cc(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=qo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Cc(t).hs({range:r,index:Gu.queryTargetsIndexName},(function(t,n,r){var o=uc(n);Go(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=Rc(t);return e.forEach((function(e){var s=Ou(e.path);i.push(o.put(new Bu(n,s))),i.push(r.Ti.nr(t,n,e))})),vu.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=Rc(t);return vu.forEach(e,(function(e){var o=Ou(e.path);return vu.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=Rc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Rc(t),i=wa();return r.hs({range:n,us:!0},(function(t,e,n){var r=Cu(t[1]),o=new ro(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=Ou(e.path),r=IDBKeyRange.bound([n],[Ui(n)],!1,!0),i=0;return Rc(t).hs({index:Bu.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Cc(t).get(e).next((function(t){return t?uc(t):null}))},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Cc(t){return Ju(t,Gu.store)}function xc(t){return Ju(t,zu.store)}function Rc(t){return Ju(t,Bu.store)}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Lc(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Vi(n,i);return 0===s?Vi(r,o):s}var Mc=function(){function t(t){this.cr=t,this.buffer=new ha(Lc),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Lc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Vc=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;ki("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return wu(e=n.sent())?(ki("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,wc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),jc=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return vu.resolve(Qi.q);var r=new Mc(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(ki("LruGarbageCollector","Garbage collection skipped; disabled"),vu.resolve(gc)):this.pr(t).next((function(r){return r<n.params.zs?(ki("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),gc):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(ki("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),Si()<=k.DEBUG&&ki("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),vu.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),Uc=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new jc(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return Fc(t,n)},t.prototype.ir=function(t,e,n){return Fc(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return Fc(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return Oc(t).ls((function(r){return Nc(t,r,e).next((function(t){return t&&(n=!0),vu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),Rc(t).delete([0,Ou(s.path)])}))}));i.push(u)}})).next((function(){return vu.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return Fc(t,e)},t.prototype.Dr=function(t,e){var n,r=Rc(t),i=Qi.q;return r.hs({index:Bu.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Qi.q&&e(new ro(Cu(n)),i),i=a,n=s):i=Qi.q})).next((function(){i!==Qi.q&&e(new ro(Cu(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function Fc(t,e){return Rc(t).put(function(t,e){return new Bu(0,Ou(t.path),e)}(e,t.bs))}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var qc=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return zc(t).put(Hc(e),n)},t.prototype.li=function(t,e){var n=zc(t),r=Hc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return zc(t).get(Hc(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return zc(t).get(Hc(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Tc(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=da();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=da(),i=new aa(ro.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Tc(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return vu.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return zc(t).hs({range:r},(function(t,e,r){for(var s=ro.Et(t);o&&ro.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=ya(),o=e.path.length+1,s={};if(n.isEqual($i.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=rc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Fu.collectionReadTimeIndex}return zc(t).hs(s,(function(t,n,s){if(t.length===o){var a=ec(r.Qt,n);e.path.nt(a.key.path)?a instanceof Mo&&bs(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new Gc(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Bc(t).get(qu.key).next((function(t){return xi(!!t),t}))},t.prototype.kr=function(t,e){return Bc(t).put(qu.key,e)},t.prototype.Mr=function(t){if(t){var e=ec(this.Qt,t);return e instanceof Vo&&e.version.isEqual($i.min())?null:e}return null},t}(),Gc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Ic((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return n(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new ha((function(t,e){return Vi(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=nc(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Tc(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var h=nc(e.jr.Qt,new Vo(o,$i.min()),e.ci(o));n.push(e.jr.ai(t,o,h))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),vu.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Ec);function Bc(t){return Ju(t,qu.store)}function zc(t){return Ju(t,Fu.store)}function Hc(t){return t.path.it()}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Kc=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;xi(n<r&&n>=0&&r<=11);var o=new yu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ru.store)}(t),function(t){t.createObjectStore(Lu.store,{keyPath:Lu.keyPath}),t.createObjectStore(Mu.store,{keyPath:Mu.keyPath,autoIncrement:!0}).createIndex(Mu.userMutationsIndex,Mu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Vu.store)}(t),Xc(t),function(t){t.createObjectStore(Fu.store)}(t));var s=vu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Bu.store),t.deleteObjectStore(Gu.store),t.deleteObjectStore(zu.store)}(t),Xc(t)),s=s.next((function(){return function(t){var e=t.store(zu.store),n=new zu(0,0,$i.min().j(),0);return e.put(zu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Mu.store).rs().next((function(n){t.deleteObjectStore(Mu.store),t.createObjectStore(Mu.store,{keyPath:Mu.keyPath,autoIncrement:!0}).createIndex(Mu.userMutationsIndex,Mu.userMutationsKeyPath,{unique:!0});var r=e.store(Mu.store),i=n.map((function(t){return r.put(t)}));return vu.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ku.store,{keyPath:Ku.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(qu.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Fu.store);e.createIndex(Fu.readTimeIndex,Fu.readTimeIndexPath,{unique:!1}),e.createIndex(Fu.collectionReadTimeIndex,Fu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Xu.store,{keyPath:Xu.keyPath})}(t),function(t){t.createObjectStore(Yu.store,{keyPath:Yu.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(Fu.store).hs((function(t,n){e+=Tc(n)})).next((function(){var n=new qu(e);return t.store(qu.store).put(qu.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(Lu.store),r=t.store(Mu.store);return n.rs().next((function(n){return vu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Mu.userMutationsIndex,i).next((function(r){return vu.forEach(r,(function(r){xi(r.userId===n.userId);var i=ac(e.Qt,r);return _c(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Bu.store),n=t.store(Fu.store);return t.store(zu.store).get(zu.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new to(n),s=function(t){return[0,Ou(t)]}(o);r.push(e.get(s).next((function(n){return n?vu.resolve():function(n){return e.put(new Bu(0,Ou(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return vu.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath});var n=e.store(Hu.store),r=new vc,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Ou(i)})}};return e.store(Fu.store).hs({us:!0},(function(t,e){var n=new to(t);return i(n.X())})).next((function(){return e.store(Vu.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Cu(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(Gu.store);return n.hs((function(t,r){var i=uc(r),o=cc(e.Qt,i);return n.put(o)}))},t}();function Xc(t){t.createObjectStore(Bu.store,{keyPath:Bu.keyPath}).createIndex(Bu.documentTargetsIndex,Bu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Gu.store,{keyPath:Gu.keyPath}).createIndex(Gu.queryTargetsIndexName,Gu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zu.store)}var Yc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Wc=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=h,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Gi(qi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new Uc(this,i),this.ho=n+"main",this.Qt=new tc(u),this.lo=new mu(this.ho,11,new Kc(this.Qt)),this._o=new Pc(this.Ti,this.Qt),this.Ei=new yc,this.fo=function(t,e){return new qc(t,e)}(this.Qt,this.Ei),this.wo=new fc,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===h&&Oi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Gi(qi.FAILED_PRECONDITION,Yc);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Qi(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return i(e,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Jc(e).put(new Ku(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(wu(e))return ki("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ki("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Qc(t).get(Ru.key).next((function(t){return vu.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Jc(t).delete(this.clientId)},t.prototype.xo=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i=this;return o(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ju(t,Ku.store);return e.rs().next((function(t){var n=i.$o(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return vu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Fo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?vu.resolve(!0):Qc(t).get(Ru.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Gi(qi.FAILED_PRECONDITION,Yc);return!1}}return!(!e.networkEnabled||!e.inForeground)||Jc(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ki("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Ru.store,Ku.store],(function(e){var n=new Qu(e,Qi.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Jc(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Ac.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ki("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Wu,(function(o){return i=new Qu(o,r.so?r.so.next():Qi.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw Oi("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new Gi(qi.FAILED_PRECONDITION,Su);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Qc(t).get(Ru.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Gi(qi.FAILED_PRECONDITION,Yc)}))},t.prototype.So=function(t){var e=new Ru(this.clientId,this.allowTabSynchronization,Date.now());return Qc(t).put(Ru.key,e)},t.Kn=function(){return mu.Kn()},t.prototype.vo=function(t){var e=this,n=Qc(t);return n.get(Ru.key).next((function(t){return e.Do(t)?(ki("IndexedDbPersistence","Releasing primary lease."),n.delete(Ru.key)):vu.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Oi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return ki("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Oi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Oi("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Qc(t){return Ju(t,Ru.store)}function Jc(t){return Ju(t,Ku.store)}function $c(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zc=function(t,e){this.progress=t,this.Go=e},th=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=da();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=pa();return i.forEach((function(t,e){e||(e=new Vo(t,$i.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return ro.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):ls(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new ro(e)).next((function(t){var e=ya();return t instanceof Mo&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=ya();return this.Ei.Us(t,i).next((function(s){return vu.forEach(s,(function(s){var a=function(t,e){return new os(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=zs(u,r.get(c),o.vs);r=h instanceof Mo?r.zt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){bs(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=wa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ws&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Mo&&(c=c.zt(t,e))})),c}))},t}(),eh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=wa(),i=wa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),nh=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual($i.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(us(e)||cs(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Si()<=k.DEBUG&&ki("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gs(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new ha(ws(t));return e.forEach((function(e,r){r instanceof Mo&&bs(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Si()<=k.DEBUG&&ki("QueryEngine","Using full collection scan to execute query:",gs(e)),this.ac.Kr(t,e,$i.min())},t}(),rh=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new aa(Vi),this.dc=new Ic((function(t){return qo(t)}),Go),this.wc=$i.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new th(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function ih(t,e,n,r){return new rh(t,e,n,r)}function oh(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new th(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=wa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,m=v.mutations;y<m.length;y++){var g=m[y];s=s.add(g.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return s=o.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),s)]}}))}))}function sh(t,e){var n=Ri(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=vu.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);xi(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function ah(t){var e=Ri(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function uh(t,e){var n=Ri(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return xi(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=pa();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(ch(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual($i.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return vu.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function ch(t,e,n,r,i){var o=wa();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=pa();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Vo&&s.version.isEqual($i.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):ki("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function hh(t,e){var n=Ri(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function fh(t,e){var n=Ri(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,vu.resolve(r)):n._o.Bi(t).next((function(i){return r=new Es(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function lh(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=Ri(t),i=r.fc.get(e),s=n?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!wu(a=o.sent()))throw a;return ki("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function ph(t,e,n){var r=Ri(t),i=$i.min(),o=wa();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ri(t),i=r.dc.get(n);return void 0!==i?vu.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,ds(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:$i.min(),n?o:wa())})).next((function(t){return{documents:t,Rc:o}}))}))}function dh(t,e){var n=Ri(t),r=Ri(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function vh(t){var e=Ri(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ri(t),i=pa(),o=rc(n),s=zc(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Fu.readTimeIndex,range:a},(function(t,e){var n=ec(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:ic(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function yh(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,(e=Ri(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=zc(t),n=$i.min();return e.hs({index:Fu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ic(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function mh(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a,u,c,h,f,l,p,d;return o(this,(function(o){switch(o.label){case 0:for(i=Ri(t),s=wa(),a=pa(),u=ga(),c=0,h=n;c<h.length;c++)f=h[c],l=e.Pc(f.metadata.name),f.document&&(s=s.add(l)),a=a.zt(l,e.yc(f)),u=u.zt(l,e.gc(f.metadata.readTime));return p=i.Ec.Nr({Wr:!0}),[4,fh(i,function(t){return ds(as(to.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=o.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return ch(t,p,a,$i.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i._o.Yi(t,d.targetId).next((function(){return i._o.er(t,s,d.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function gh(t,e,n){return void 0===n&&(n=wa()),i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return[4,fh(t,ds(hc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ri(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=qa(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Fi.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var bh=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return vu.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:qa(n.createTime)}),vu.resolve()},t.prototype.Ms=function(t,e){return vu.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:hc(t.bundledQuery),readTime:qa(t.readTime)}}(e)),vu.resolve()},t}(),wh=function(){function t(){this.vc=new ha(Ih.Sc),this.Dc=new ha(Ih.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Ih(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Ih(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new ro(new to([])),r=new Ih(n,t),i=new Ih(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new ro(new to([])),n=new Ih(e,t),r=new Ih(e,t+1),i=wa();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Ih(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Ih=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return ro.H(t.key,e.key)||Vi(t.Mc,e.Mc)},t.Cc=function(t,e){return Vi(t.Mc,e.Mc)||ro.H(t.key,e.key)},t}(),Eh=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new ha(Ih.Sc)}return t.prototype.Ai=function(t){return vu.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new $u(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Ih(u.key,i)),this.Ei.qs(t,u.key.path.X())}return vu.resolve(o)},t.prototype.Pi=function(t,e){return vu.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return vu.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return vu.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return vu.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Ih(e,0),i=new Ih(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),vu.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new ha(Vi);return e.forEach((function(t){var e=new Ih(t,0),i=new Ih(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),vu.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;ro.wt(i)||(i=i.child(""));var o=new Ih(new ro(i),0),s=new ha(Vi);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),vu.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;xi(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return vu.forEach(e.mutations,(function(i){var o=new Ih(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Ih(e,0),r=this.Bc.Re(n);return vu.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return this.zo.length,vu.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),_h=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new aa(ro.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return vu.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=da();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),vu.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=ya(),i=new ro(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,c=u.hi,h=u.readTime;if(!e.path.nt(a.path))break;h._(n)<=0||c instanceof Mo&&bs(e,c)&&(r=r.zt(c.key,c))}return vu.resolve(r)},t.prototype.jc=function(t,e){return vu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Th(this)},t.prototype.Or=function(t){return vu.resolve(this.size)},t}(),Th=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return n(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),vu.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Ec),Ah=function(){function t(t){this.persistence=t,this.Gc=new Ic((function(t){return qo(t)}),Go),this.lastRemoteSnapshotVersion=$i.min(),this.highestTargetId=0,this.zc=0,this.Hc=new wh,this.targetCount=0,this.Jc=Dc.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),vu.resolve()},t.prototype.Qi=function(t){return vu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return vu.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),vu.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),vu.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new Dc(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,vu.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),vu.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,vu.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),vu.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return vu.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return vu.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),vu.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),vu.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),vu.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return vu.resolve(n)},t.prototype.Fi=function(t,e){return vu.resolve(this.Hc.Fi(e))},t}(),Nh=function(){function t(t,e){var n=this;this.Yc={},this.so=new Qi(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Ah(this),this.Ei=new dc,this.fo=function(t,e){return new _h(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new tc(e),this.wo=new bh(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Eh(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ki("MemoryPersistence","Starting transaction:",t);var i=new Sh(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return vu.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),Sh=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return n(e,t),e}(ku),kh=function(){function t(t){this.persistence=t,this.na=new wh,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Ci()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),vu.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),vu.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),vu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return vu.forEach(this.ra,(function(r){var i=ro._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return vu.Ln([function(){return vu.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Oh(t,e){return"firestore_clients_"+t+"_"+e}function Dh(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Ph(t,e){return"firestore_targets_"+t+"_"+e}var Ch=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Gi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Oi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xh=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Gi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Oi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rh=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ea(),s=0;i&&s<r.activeTargetIds.length;++s)i=go(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Oi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Lh=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Oi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Mh=function(){function t(){this.activeTargetIds=Ea()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Vh=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new aa(Vi),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Oh(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new Mh),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i,s,a,u,c,h,f,l=this;return o(this,(function(o){switch(o.label){case 0:return[4,this._a.Uo()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Oh(this.persistenceKey,r)))&&(s=Rh.ca(r,i))&&(this.Ea=this.Ea.zt(s.clientId,s));for(this.Va(),(a=this.storage.getItem(this.ya))&&(u=this.pa(a))&&this.ba(u),c=0,h=this.Ta;c<h.length;c++)f=h[c],this.wa(f);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Ph(this.persistenceKey,t));if(n){var r=xh.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(Ph(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ki("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ki("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ki("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ki("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Oi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return i(e,void 0,void 0,(function(){var t,e,r,i,s,a;return o(this,(function(o){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(s=this.pa(n.newValue)))return[2,this.ba(s)]}else if(n.key===this.ma)(a=function(t){var e=Qi.q;if(null!=t)try{var n=JSON.parse(t);xi("number"==typeof n),e=n}catch(t){Oi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Qi.q&&this.k(a);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new Ch(this.currentUser,t,e,n),i=Dh(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=Dh(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=Ph(this.persistenceKey,t),i=new xh(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return Rh.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ch.ca(new zi(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return xh.ca(r,e)},t.prototype.pa=function(t){return Lh.ca(t)},t.prototype.Ya=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(ki("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Ea();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),jh=function(){function t(){this.iu=new Mh,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Mh,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),Uh=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),Fh=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){ki("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){ki("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gh=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Bh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return n(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new hi;s.listenOnce(si.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case oi.NO_ERROR:var e=s.getResponseJson();ki("Connection","XHR received:",JSON.stringify(e)),i(e);break;case oi.TIMEOUT:ki("Connection",'RPC "'+t+'" timed out'),o(new Gi(qi.DEADLINE_EXCEEDED,"Request time out"));break;case oi.HTTP_ERROR:var n=s.getStatus();if(ki("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(qi).indexOf(e)>=0?e:qi.UNKNOWN}(r.status);o(new Gi(a,r.message))}else o(new Gi(qi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Gi(qi.UNAVAILABLE,"Connection failed."));break;default:Ci()}}finally{ki("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n,r,i=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ri(),s=ii(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())||"object"==typeof navigator&&"ReactNative"===navigator.product||l().indexOf("Electron/")>=0||((r=l()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||l().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");ki("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),h=!1,f=!1,p=new Gh({fu:function(t){f?ki("Connection","Not sending because WebChannel is closed:",t):(h||(ki("Connection","Opening WebChannel transport."),c.open(),h=!0),ki("Connection","WebChannel sending:",t),c.send(t))},du:function(){return c.close()}}),d=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return d(c,ci.EventType.OPEN,(function(){f||ki("Connection","WebChannel transport opened.")})),d(c,ci.EventType.CLOSE,(function(){f||(f=!0,ki("Connection","WebChannel transport closed"),p.Ru())})),d(c,ci.EventType.ERROR,(function(t){f||(f=!0,Di("Connection","WebChannel transport errored:",t),p.Ru(new Gi(qi.UNAVAILABLE,"The operation could not be completed")))})),d(c,ci.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];xi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ki("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=ta[t];if(void 0!==e)return sa(e)}(o),a=i.message;void 0===s&&(s=qi.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),f=!0,p.Ru(new Gi(s,a)),c.close()}else ki("Connection","WebChannel received:",n),p.Pu(n)}})),d(s,ai.STAT_EVENT,(function(t){t.stat===ui.PROXY?ki("Connection","Detected buffering proxy"):t.stat===ui.NOPROXY&&ki("Connection","Detected no buffering proxy")})),setTimeout((function(){p.Au()}),0),p},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);ki("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return ki("RestConnection","Received: ",t),t}),(function(e){throw Di("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=qh[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function zh(){return"undefined"!=typeof window?window:null}function Hh(){return"undefined"!=typeof document?document:null}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Kh(t){return new Va(t,!0)}var Xh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&ki("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Yh=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Xh(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===qi.RESOURCE_EXHAUSTED?(Oi(e.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===qi.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Gi(qi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return i(t,void 0,void 0,(function(){return o(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return ki("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(ki("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Wh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return n(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ci()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(xi(void 0===e||"string"==typeof e),Fi.fromBase64String(e||"")):(xi(void 0===e||e instanceof Uint8Array),Fi.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?qi.UNKNOWN:sa(t.code);return new Gi(e,t.message||"")}(a);n=new Da(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ha(t,r.document.name),o=qa(r.document.updateTime);var a=new Co({mapValue:{fields:r.document.fields}}),u=(s=new Mo(i,o,a,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new ka(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ha(t,r.document),o=r.readTime?qa(r.readTime):$i.min(),a=new Vo(i,o),s=r.removedTargetIds||[],n=new ka([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ha(t,r.document),o=r.removedTargetIds||[],n=new ka([],o,i,null);else{if(!("filter"in e))return Ci();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ia(r),o=h.targetId,n=new Oa(o,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return $i.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?$i.min():e.readTime?qa(e.readTime):$i.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Ya(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Bo(r)?{documents:tu(t,r)}:{query:eu(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=Ua(t,e.resumeToken):e.Ot._($i.min())>0&&(n.readTime=ja(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ci()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Ya(this.Qt),e.removeTarget=t,this.th(e)},e}(Yh),Qh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return n(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(xi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(xi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?qa(t.updateTime):qa(e);n.isEqual($i.min())&&(n=qa(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Us(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=qa(t.commitTime);return this.listener.dh(n,e)}return xi(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Ya(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return $a(e.Qt,t)}))};this.th(n)},e}(Yh),Jh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return n(e,t),e.prototype.Ih=function(){if(this.Th)throw new Gi(qi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===qi.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===qi.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),$h=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Oi(e),this.Rh=!1):ki("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Zh=function(t,e,n,r,s){var a=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=s,this.Fh.ou((function(t){n.Ps((function(){return i(a,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return cf(this)?(ki("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=Ri(t)).Nh.add(4),[4,ef(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,tf(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new $h(n,r)};
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function tf(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:if(!cf(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function ef(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function nf(t,e){var n=Ri(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),uf(n)?af(n):Tf(n).Hu()&&of(n,e))}function rf(t,e){var n=Ri(t),r=Tf(n);n.xh.delete(e),r.Hu()&&sf(n,e),0===n.xh.size&&(r.Hu()?r.Xu():cf(n)&&n.Oh.set("Unknown"))}function of(t,e){t.kh.on(e.targetId),Tf(t).uh(e)}function sf(t,e){t.kh.on(e),Tf(t).hh(e)}function af(t){t.kh=new Ca({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Tf(t).start(),t.Oh.Ph()}function uf(t){return cf(t)&&!Tf(t).zu()&&t.xh.size>0}function cf(t){return 0===Ri(t).Nh.size}function hf(t){t.kh=void 0}function ff(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t.xh.forEach((function(e,n){of(t,e)})),[2]}))}))}function lf(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){return hf(t),uf(t)?(t.Oh.Vh(e),af(t)):t.Oh.set("Unknown"),[2]}))}))}function pf(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a;return o(this,(function(u){switch(u.label){case 0:if(t.Oh.set("Online"),!(e instanceof Da&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s;return o(this,(function(o){switch(o.label){case 0:n=e.cause,r=0,i=e.targetIds,o.label=1;case 1:return r<i.length?(s=i[r],t.xh.has(s)?[4,t.Dh.Mh(s,n)]:[3,3]):[3,5];case 2:o.sent(),t.xh.delete(s),t.kh.removeTarget(s),o.label=3;case 3:o.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),ki("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,df(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ka?t.kh.dn(e):e instanceof Oa?t.kh.Pn(e):t.kh.Tn(e),n.isEqual($i.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,ah(t.bh)];case 8:return s=u.sent(),n._(s)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Fi.T,n.Ot)),sf(t,e);var r=new Es(n.target,e,1,n.sequenceNumber);of(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return ki("RemoteStore","Failed to raise snapshot:",a=u.sent()),[4,df(t,a)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function df(t,e,n){return i(this,void 0,void 0,(function(){var r=this;return o(this,(function(s){switch(s.label){case 0:if(!wu(e))throw e;return t.Nh.add(1),[4,ef(t)];case 1:return s.sent(),t.Oh.set("Offline"),n||(n=function(){return ah(t.bh)}),t._s.po((function(){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return ki("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,tf(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function vf(t,e){return e().catch((function(n){return df(t,n,e)}))}function yf(t){return i(this,void 0,void 0,(function(){var e,n,r,i,s;return o(this,(function(o){switch(o.label){case 0:e=Ri(t),n=Af(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,o.label=1;case 1:if(!function(t){return cf(t)&&t.Ch.length<10}(e))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,hh(e.bh,r)];case 3:return null===(i=o.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=Af(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return s=o.sent(),[4,df(e,s)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return mf(e)&&gf(e),[2]}}))}))}function mf(t){return cf(t)&&!Af(t).zu()&&t.Ch.length>0}function gf(t){Af(t).start()}function bf(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return Af(t).Eh(),[2]}))}))}function wf(t){return i(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){for(e=Af(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function If(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Zu.from(r,e,n),[4,vf(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,yf(t)];case 2:return o.sent(),[2]}}))}))}function Ef(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return e&&Af(t)._h?[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return oa(r=e.code)&&r!==qi.ABORTED?(n=t.Ch.shift(),Af(t).Yu(),[4,vf(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,yf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return mf(t)&&gf(t),[2]}}))}))}function _f(t,e){return i(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=Ri(t),e?(n.Nh.delete(2),[4,tf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,ef(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Tf(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Ri(t);return r.Ih(),new Wh(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:ff.bind(null,t),Tu:lf.bind(null,t),ah:pf.bind(null,t)}),t.$h.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),uf(t)?af(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),hf(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function Af(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Ri(t);return r.Ih(),new Qh(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:bf.bind(null,t),Tu:Ef.bind(null,t),wh:wf.bind(null,t),dh:If.bind(null,t)}),t.$h.push((function(n){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,yf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(ki("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh}var Nf=function(){this.Kh=void 0,this.listeners=[]},Sf=function(){this.queries=new Ic((function(t){return ms(t)}),ys),this.onlineState="Unknown",this.Wh=new Set};function kf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:if(n=Ri(t),r=e.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new Nf),!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),a=s,[4,n.jh(r)];case 2:return a.Kh=o.sent(),[3,4];case 3:return u=o.sent(),c=Nu(u,"Initialization of query '"+gs(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.Gh(n.onlineState),s.Kh&&e.zh(s.Kh)&&Cf(n),[2]}}))}))}function Of(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){return n=Ri(t),r=e.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function Df(t,e){for(var n=Ri(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].zh(s)&&(r=!0);u.Kh=s}}r&&Cf(n)}function Pf(t,e,n){var r=Ri(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Cf(t){t.Wh.forEach((function(t){t.next()}))}var xf=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Aa(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Aa.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Rf=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),Lf=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Ha(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Ja(this.Qt,t.document,!1):new Vo(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return qa(t)},t}();
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=Mf(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new Lf(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||wa()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,mh(this.bh,new Lf(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,gh(this.bh,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Zc(Object.assign({},this.progress),t))]}}))}))}}();function Mf(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Vf=function(t){this.key=t},jf=function(t){this.key=t},Uf=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=wa(),this.De=wa(),this.hl=ws(t),this.ll=new _a(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Ta,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=us(this.query)&&i.size===this.query.limit?i.last():null,c=cs(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var h=i.get(t),f=e instanceof Mo?e:null;f&&(f=bs(n.query,f)?f:null);var l=!!h&&n.De.has(h.key),p=!!f&&(f.Vt||n.De.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.wl(h,f)||(r.track({type:2,doc:f}),d=!0,(u&&n.hl(f,u)>0||c&&n.hl(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),us(this.query)||cs(this.query))for(;s.size>this.query.limit;){var h=us(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ci()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new Aa(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Ta,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=wa(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new jf(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new Vf(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=wa();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Aa.Ne(this.query,this.ll,this.De,0===this.al)},t}(),Ff=function(t,e,n){this.query=t,this.targetId=e,this.view=n},qf=function(t){this.key=t,this.Pl=!1},Gf=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Ic((function(t){return ms(t)}),ys),this.Sl=new Map,this.Dl=new Set,this.Cl=new aa(ro.H),this.xl=new Map,this.Nl=new wh,this.$l={},this.Fl=new Map,this.Ol=Dc.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Bf(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=gl(t),(s=n.vl.get(e))?(r=s.targetId,n.Vl.Fa(r),i=s.view.Rl(),[3,4]):[3,1];case 1:return[4,fh(n.bh,ds(e))];case 2:return a=o.sent(),u=n.Vl.Fa(a.targetId),r=a.targetId,[4,zf(n,e,r,"current"===u)];case 3:i=o.sent(),n.Ml&&nf(n.yl,a),o.label=4;case 4:return[2,i]}}))}))}function zf(t,e,n,r){return i(this,void 0,void 0,(function(){var s,a,u,c,h,f;return o(this,(function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=e.view.fl(n)).lc?[4,ph(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return s=r&&r.$e.get(e.targetId),a=e.view.wi(i,t.Ml,s),[2,(rl(t,e.targetId,a.Il),a.snapshot)]}}))}))}(t,e,n,r)},[4,ph(t.bh,e,!0)];case 1:return s=l.sent(),a=new Uf(e,s.Rc),u=a.fl(s.documents),c=Sa.Le(n,r&&"Offline"!==t.onlineState),h=a.wi(u,t.Ml,c),rl(t,n,h.Il),f=new Ff(e,n,a),[2,(t.vl.set(e,f),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),h.snapshot)]}}))}))}function Hf(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!ys(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,lh(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),rf(n.yl,r.targetId),el(n,r.targetId)})).catch(wc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return el(n,r.targetId),[4,lh(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Kf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a;return o(this,(function(o){switch(o.label){case 0:r=bl(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ri(t),i=Ji.now(),o=e.reduce((function(t,e){return t.add(e.key)}),wa());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Hs(c,n.get(c.key));null!=h&&s.push(new Ws(c.key,h,Ro(h.proto.mapValue),Fs.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=o.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new aa(Vi)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,sl(r,i.ri)];case 3:return o.sent(),[4,yf(r.yl)];case 4:return o.sent(),[3,6];case 5:return s=o.sent(),a=Nu(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Xf(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:n=Ri(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,uh(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(xi(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?xi(r.Pl):t.Qe.size>0&&(xi(r.Pl),r.Pl=!1))})),[4,sl(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,wc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Yf(t,e,n){var r=Ri(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ri(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Cf(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Wf(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c;return o(this,(function(o){switch(o.label){case 0:return(r=Ri(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(s=i&&i.key)?(a=(a=new aa(ro.H)).zt(s,new Vo(s,$i.min())),u=wa().add(s),c=new Na($i.min(),new Map,new ha(Vi),a,u),[4,Xf(r,c)]):[3,2];case 1:return o.sent(),r.Cl=r.Cl.remove(s),r.xl.delete(e),ol(r),[3,4];case 2:return[4,lh(r.bh,e,!1).then((function(){return el(r,e,n)})).catch(wc)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))}function Qf(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:n=Ri(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,sh(n.bh,e)];case 2:return i=o.sent(),tl(n,r,null),Zf(n,r),n.Vl.Na(r,"acknowledged"),[4,sl(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,wc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Jf(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:r=Ri(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ri(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return xi(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),tl(r,e,n),Zf(r,e),r.Vl.Na(e,"rejected",n),[4,sl(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,wc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function $f(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:cf((n=Ri(t)).yl)||ki("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(t){var e=Ri(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return s=o.sent(),a=Nu(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Zf(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function tl(t,e,n){var r=Ri(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function el(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||nl(t,e)}))}function nl(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(rf(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),ol(t))}function rl(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Vf?(t.Nl.nr(o.key,e),il(t,o)):o instanceof jf?(ki("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||nl(t,o.key)):Ci()}}function il(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(ki("SyncEngine","New document in limbo: "+n),t.Dl.add(r),ol(t))}function ol(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new ro(to.ot(e)),r=t.Ol.next();t.xl.set(r,new qf(n)),t.Cl=t.Cl.zt(n,r),nf(t.yl,new Es(ds(as(n.path)),r,2,Qi.q))}}function sl(t,e,n){return i(this,void 0,void 0,(function(){var r,s,a,u;return o(this,(function(c){switch(c.label){case 0:return r=Ri(t),s=[],a=[],u=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,i){u.push(r.Ll(i,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(i.targetId,t.fromCache?"not-current":"current"),s.push(t);var e=eh.oc(i.targetId,t);a.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.bl.ah(s),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f;return o(this,(function(o){switch(o.label){case 0:n=Ri(t),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return vu.forEach(e,(function(e){return vu.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return vu.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return o.sent(),[3,4];case 3:if(!wu(r=o.sent()))throw r;return ki("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,s=e;i<s.length;i++)a=s[i],u=a.targetId,a.fromCache||(c=n.fc.get(u),h=c.Ot,f=c.Lt(h),n.fc=n.fc.zt(u,f));return[2]}}))}))}(r.bh,a)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function al(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=Ri(t)).currentUser.isEqual(e)?[3,3]:(ki("SyncEngine","User change. New user:",e.A()),[4,oh(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Gi(qi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,sl(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ul(t,e){var n=Ri(t),r=n.xl.get(e);if(r&&r.Pl)return wa().add(r.key);var i=wa(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.vl.get(u);i=i.Pe(c.view._l)}return i}function cl(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,ph((n=Ri(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&rl(n,e.targetId,i.Il),i)]}}))}))}function hl(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){return[2,vh((e=Ri(t)).bh).then((function(t){return sl(e,t)}))]}))}))}function fl(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s;return o(this,(function(o){switch(o.label){case 0:return[4,function(t,e){var n=Ri(t),r=Ri(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):vu.resolve(null)}))}))}((i=Ri(t)).bh,e)];case 1:return null===(s=o.sent())?[3,6]:"pending"!==n?[3,3]:[4,yf(i.yl)];case 2:return o.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(tl(i,e,r||null),Zf(i,e),function(t,e){Ri(Ri(t).zo).xi(e)}(i.bh,e)):Ci(),o.label=4;case 4:return[4,sl(i,s)];case 5:return o.sent(),[3,7];case 6:ki("SyncEngine","Cannot apply mutation batch with id: "+e),o.label=7;case 7:return[2]}}))}))}function ll(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h;return o(this,(function(o){switch(o.label){case 0:return gl(n=Ri(t)),bl(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,pl(n,r.it())]);case 1:return i=o.sent(),n.kl=!0,[4,_f(n.yl,!0)];case 2:for(o.sent(),s=0,a=i;s<a.length;s++)u=a[s],nf(n.yl,u);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(c=[],h=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?c.push(e):h=h.then((function(){return el(n,e),lh(n.bh,e,!0)})),rf(n.yl,e)})),[4,h]);case 4:return o.sent(),[4,pl(n,c)];case 5:return o.sent(),function(t){var e=Ri(t);e.xl.forEach((function(t,n){rf(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new aa(ro.H)}(n),n.kl=!1,[4,_f(n.yl,!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))}function pl(t,e,n){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,f,l,p,d,v,y;return o(this,(function(o){switch(o.label){case 0:n=Ri(t),r=[],i=[],s=0,a=e,o.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.Sl.get(u))&&0!==h.length?[4,fh(n.bh,ds(h[0]))]:[3,7]):[3,13];case 2:c=o.sent(),f=0,l=h,o.label=3;case 3:return f<l.length?(p=l[f],d=n.vl.get(p),[4,cl(n,d)]):[3,6];case 4:(v=o.sent()).snapshot&&i.push(v.snapshot),o.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,dh(n.bh,u)];case 8:return y=o.sent(),[4,fh(n.bh,y)];case 9:return c=o.sent(),[4,zf(n,dl(y),u,!1)];case 10:o.sent(),o.label=11;case 11:r.push(c),o.label=12;case 12:return s++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function dl(t){return ss(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vl(t){var e=Ri(t);return Ri(Ri(e.bh).persistence).Uo()}function yl(t,e,n,r){return i(this,void 0,void 0,(function(){var i,s,a;return o(this,(function(o){switch(o.label){case 0:return(i=Ri(t)).kl?(ki("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,vh(i.bh)];case 3:return s=o.sent(),a=Na.Me(e,"current"===n),[4,sl(i,s,a)];case 4:return o.sent(),[3,8];case 5:return[4,lh(i.bh,e,!0)];case 6:return o.sent(),el(i,e,r),[3,8];case 7:Ci(),o.label=8;case 8:return[2]}}))}))}function ml(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u,c,h,f,l,p;return o(this,(function(d){switch(d.label){case 0:if(!(r=gl(t)).kl)return[3,10];i=0,s=e,d.label=1;case 1:return i<s.length?(a=s[i],r.Sl.has(a)?(ki("SyncEngine","Adding an already active target "+a),[3,5]):[4,dh(r.bh,a)]):[3,6];case 2:return u=d.sent(),[4,fh(r.bh,u)];case 3:return c=d.sent(),[4,zf(r,dl(u),c.targetId,!1)];case 4:d.sent(),nf(r.yl,c),d.label=5;case 5:return i++,[3,1];case 6:h=function(t){return o(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,lh(r.bh,t,!1).then((function(){rf(r.yl,t),el(r,t)})).catch(wc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=n,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function gl(t){var e=Ri(t);return e.yl.Dh.Lh=Xf.bind(null,e),e.yl.Dh.vn=ul.bind(null,e),e.yl.Dh.Mh=Wf.bind(null,e),e.bl.ah=Df.bind(null,e.gl),e.bl.Bl=Pf.bind(null,e.gl),e}function bl(t){var e=Ri(t);return e.yl.Dh.Bh=Qf.bind(null,e),e.yl.Dh.qh=Jf.bind(null,e),e}var wl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.Qt=Kh(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return ih(this.persistence,new nh,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Nh(kh.ia,this.Qt)},t.prototype.Wl=function(t){return new jh},t.prototype.terminate=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),Il=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return n(e,t),e.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,yh(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,bl(this.Yl._a)];case 4:return n.sent(),[4,yf(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return ih(this.persistence,new nh,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new Vc(e,t._s)},e.prototype.jl=function(t){var e=$c(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?bc.Ys(this.cacheSizeBytes):bc.ti;return new Wc(this.synchronizeTabs,e,t.clientId,n,t._s,zh(),Hh(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new jh},e}(wl),El=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return n(e,t),e.prototype.initialize=function(e){return i(this,void 0,void 0,(function(){var n,r=this;return o(this,(function(s){switch(s.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return s.sent(),n=this.Yl._a,this.Vl instanceof Vh?(this.Vl._a={eu:fl.bind(null,n),nu:yl.bind(null,n),su:ml.bind(null,n),Uo:vl.bind(null,n),tu:hl.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.Ro((function(t){return i(r,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,ll(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return s.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=zh();if(!Vh.Kn(e))throw new Gi(qi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=$c(t.yu.t,t.yu.persistenceKey);return new Vh(e,t._s,n,t.clientId,t.Jl)},e}(Il),_l=function(){function t(){}return t.prototype.initialize=function(t,e){return i(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Yf(n._a,t,1)},this.yl.Dh.n_=al.bind(null,this._a),[4,_f(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Sf},t.prototype.Xl=function(t){var e,n=Kh(t.yu.t),r=(e=t.yu,new Bh(e));return function(t,e,n){return new Jh(t,e,n)}(t.credentials,r,n)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Yf(s._a,t,0)},o=Fh.Kn()?new Fh:new Uh,new Zh(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Gf(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Ri(t),ki("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,ef(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}();
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
var Tl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Al=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new du,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return i(this,void 0,void 0,(function(){var t,e,n,r;return o(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new Rf(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return i(this,void 0,void 0,(function(){var t,e;return o(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Gi(qi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new no(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),Nl=function(t){this._methodName=t},Sl=function(t){this.d_=t};
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function kl(t,e,n){if(!n)throw new Gi(qi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ol(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Gi(qi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Dl(t,e,n,r){if(!0===e&&!0===r)throw new Gi(qi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Pl(t){if(!ro.wt(t))throw new Gi(qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Cl(t){if(ro.wt(t))throw new Gi(qi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ci()}function Rl(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Gi(qi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xl(t);throw new Gi(qi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ll(t,e){if(e<=0)throw new Gi(qi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Ml=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Gi(qi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Gi(qi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Dl("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Vl=new Map,jl=function(){function t(t,e){this.w_="(lite)",this.E_=new Ml({}),this.T_=!1,t instanceof Ai?(this.I_=t,this.m_=new Ki):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Gi(qi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ai(t.options.projectId)}(t),this.m_=new Xi(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Gi(qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Gi(qi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Ml(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ki;switch(t.type){case"gapi":var e=t.client;return xi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Gi(qi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=Vl.get(this))&&(ki("ComponentProvider","Removing Datastore"),Vl.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ul=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ql(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Fl=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),ql=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,as(r))||this).firestore=e,i.D_=r,i.type="collection",i}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Ul(this.firestore,null,new ro(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Fl);
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Gl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Sl&&(t=t.d_),kl("collection","path",e),t instanceof jl)return Cl(n=to.ot.apply(to,u([e],r))),new ql(t,null,n);if(!(t instanceof Ul||t instanceof ql))throw new Gi(qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Cl(n=to.ot.apply(to,u([t.path],r)).child(to.ot(e))),new ql(t.firestore,null,n)}function Bl(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Sl&&(t=t.d_),1===arguments.length&&(e=Mi.u()),kl("doc","path",e),t instanceof jl)return Pl(n=to.ot.apply(to,u([e],r))),new Ul(t,null,new ro(n));if(!(t instanceof Ul||t instanceof ql))throw new Gi(qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Pl(n=t.D_.child(to.ot.apply(to,u([e],r)))),new Ul(t.firestore,t instanceof ql?t.v_:null,new ro(n))}function zl(t,e){return t instanceof Sl&&(t=t.d_),e instanceof Sl&&(e=e.d_),(t instanceof Ul||t instanceof ql)&&(e instanceof Ul||e instanceof ql)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Hl(t,e){return t instanceof Sl&&(t=t.d_),e instanceof Sl&&(e=e.d_),t instanceof Fl&&e instanceof Fl&&t.firestore===e.firestore&&ys(t.C_,e.C_)&&t.v_===e.v_}var Kl=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Gi(qi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Gi(qi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Vi(this.x_,t.x_)||Vi(this.N_,t.N_)},t}(),Xl=/^__.*__$/,Yl=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Ws(t,this.data,this.Gt,e,this.fieldTransforms):new Ys(t,this.data,e,this.fieldTransforms)},t}(),Wl=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Ws(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Ql(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ci()}}var Jl=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return mp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Ql(this.k_)&&Xl.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),$l=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Kh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Jl({k_:t,methodName:e,j_:n,path:no.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Zl(t){var e=t.p_(),n=Kh(t.I_);return new $l(t.I_,!!e.ignoreUndefinedProperties,n)}function tp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);pp("Data must be an object, but it was:",s,r);var a,u,c=fp(r,s);if(o.merge)a=new ao(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=dp(e,l[f],n);if(!s.contains(p))throw new Gi(qi.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");gp(h,p)||h.push(p)}a=new ao(h),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new Yl(new Co(c),a,u)}var ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Nl);function np(t,e,n){return new Jl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var rp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.z_=function(t){return new js(t.path,new Ds)},e.prototype.isEqual=function(t){return t instanceof e},e}(Nl),ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return n(e,t),e.prototype.z_=function(t){var e=np(this,t,!0),n=this.H_.map((function(t){return hp(t,e)})),r=new Ps(n);return new js(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nl),op=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return n(e,t),e.prototype.z_=function(t){var e=np(this,t,!0),n=this.H_.map((function(t){return hp(t,e)})),r=new xs(n);return new js(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Nl),sp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return n(e,t),e.prototype.z_=function(t){var e=new Ls(t.Qt,As(t.Qt,this.J_));return new js(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Nl);function ap(t,e,n,r){var i=t.G_(1,e,n);pp("Data must be an object, but it was:",i,r);var o=[],s=new xo;oo(r,(function(t,r){var a=yp(e,t,n);r instanceof Sl&&(r=r.d_);var u=i.U_(a);if(r instanceof ep)o.push(a);else{var c=hp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new ao(o);return new Wl(s.Pt(),a,i.fieldTransforms)}function up(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[dp(e,r,n)],u=[i];if(o.length%2!=0)throw new Gi(qi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(dp(e,o[c])),u.push(o[c+1]);for(var h=[],f=new xo,l=a.length-1;l>=0;--l)if(!gp(h,a[l])){var p=a[l],d=u[l];d instanceof Sl&&(d=d.d_);var v=s.U_(p);if(d instanceof ep)h.push(p);else{var y=hp(d,v);null!=y&&(h.push(p),f.set(p,y))}}var m=new ao(h);return new Wl(f.Pt(),m,s.fieldTransforms)}function cp(t,e,n,r){return void 0===r&&(r=!1),hp(n,t.G_(r?4:3,e))}function hp(t,e){if(t instanceof Sl&&(t=t.d_),lp(t))return pp("Unsupported field value:",e,t),fp(t,e);if(t instanceof Nl)return function(t,e){if(!Ql(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=hp(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Sl&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return As(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ji.fromDate(t);return{timestampValue:ja(e.Qt,n)}}if(t instanceof Ji)return n=new Ji(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ja(e.Qt,n)};if(t instanceof Kl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bi)return{bytesValue:Ua(e.Qt,t.I)};if(t instanceof Ul){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ga(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+xl(t))}(t,e)}function fp(t,e){var n={};return so(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):oo(t,(function(t,r){var i=hp(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function lp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ji||t instanceof Kl||t instanceof Bi||t instanceof Ul||t instanceof Nl)}function pp(t,e,n){if(!lp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xl(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function dp(t,e,n){if(e instanceof Sl&&(e=e.d_),e instanceof Al)return e.f_;if("string"==typeof e)return yp(t,e);throw mp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var vp=new RegExp("[~\\*/\\[\\]]");function yp(t,e,n){if(e.search(vp)>=0)throw mp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Al.bind.apply(Al,u([void 0],e.split("."))))).f_}catch(r){throw mp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function mp(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Gi(qi.INVALID_ARGUMENT,(a+=". ")+t+u)}function gp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var bp=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return i(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Gi(qi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=Ya(n.Qt)+"/documents",i={documents:e.map((function(t){return za(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return s=o.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){xi(!!e.found),e.found.name,e.found.updateTime;var n=Ha(t,e.found.name),r=qa(e.found.updateTime),i=new Co({mapValue:{fields:e.found.fields}});return new Mo(n,r,i,{})}(t,e):"missing"in e?function(t,e){xi(!!e.missing),xi(!!e.readTime);var n=Ha(t,e.missing),r=qa(e.readTime);return new Vo(n,r)}(t,e):Ci()}(n.Qt,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());xi(!!e),u.push(e)})),u)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Vo||t instanceof Mo?n.sf(t):Ci()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new na(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ro._t(n);e.mutations.push(new ra(r,e.jt(r)))})),[4,function(t,e){return i(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return n=Ri(t),r=Ya(n.Qt)+"/documents",i={writes:e.map((function(t){return $a(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Mo)e=t.version;else{if(!(t instanceof Vo))throw Ci();e=$i.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Gi(qi.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Fs.updateTime(e):Fs.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual($i.min()))throw new Gi(qi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fs.updateTime(e)}return Fs.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),wp=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Xh(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return i(t,void 0,void 0,(function(){var t,e,n=this;return o(this,(function(r){return t=new bp(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!yo(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!oa(e)}return!1},t}(),Ip=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=zi.UNAUTHENTICATED,this.clientId=Mi.u(),this._f=function(){},this.C=new du,this.credentials.v((function(t){ki("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Gi(qi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new du;return this._s.Tf((function(){return i(t,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Nu(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
  * @license
  * Copyright 2019 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Ep(t,e){return i(this,void 0,void 0,(function(){var n,r,s=this;return o(this,(function(a){switch(a.label){case 0:return t._s.Af(),ki("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=a.sent(),[4,e.initialize(n)];case 2:return a.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return i(s,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,oh(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function _p(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(s){switch(s.label){case 0:return t._s.Af(),[4,Tp(t)];case 1:return n=s.sent(),ki("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=s.sent(),[4,e.initialize(n,r)];case 3:return s.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return i(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){switch(i.label){case 0:return(n=Ri(t))._s.Af(),ki("RemoteStore","RemoteStore received new credentials"),r=cf(n),n.Nh.add(3),[4,ef(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,tf(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Tp(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(ki("FirestoreClient","Using default OfflineComponentProvider"),[4,Ep(t,new wl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Ap(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(ki("FirestoreClient","Using default OnlineComponentProvider"),[4,_p(t,new _l)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Np(t){return Tp(t).then((function(t){return t.persistence}))}function Sp(t){return Tp(t).then((function(t){return t.bh}))}function kp(t){return Ap(t).then((function(t){return t.yl}))}function Op(t){return Ap(t).then((function(t){return t._a}))}function Dp(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Ap(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Bf.bind(null,e._a),n.Hh=Hf.bind(null,e._a),n)]}}))}))}function Pp(t,e,n){var r=this;void 0===n&&(n={});var s=new du;return t._s.Ps((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Tl({next:function(o){e.Ps((function(){return Of(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Gi(qi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Gi(qi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new xf(as(n.path),o,{includeMetadataChanges:!0,nl:!0});return kf(t,s)},[4,Dp(t)];case 1:return[2,r.apply(void 0,[i.sent(),t._s,e,n,s])]}}))}))})),s.promise}function Cp(t,e,n){var r=this;void 0===n&&(n={});var s=new du;return t._s.Ps((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new Tl({next:function(n){e.Ps((function(){return Of(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Gi(qi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new xf(n,o,{includeMetadataChanges:!0,nl:!0});return kf(t,s)},[4,Dp(t)];case 1:return[2,r.apply(void 0,[i.sent(),t._s,e,n,s])]}}))}))})),s.promise}var xp=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Xh(this,"async_queue_retry"),this.vf=function(){var e=Hh();e&&ki("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=Hh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=Hh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return i(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!wu(t=n.sent()))throw t;return ki("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Oi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Au.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Ci()},t.prototype.Af=function(){},t.prototype.Nf=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Rp(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new du,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Lp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new xp,r.w_="name"in e?e.name:"[DEFAULT]",r}return n(e,t),e.prototype.b_=function(){return this.qf||Vp(this),this.qf.terminate()},e}(jl);function Mp(t){return t.qf||Vp(t),t.qf.df(),t.qf}function Vp(t){var e=t.p_(),n=function(t,e,n){return new Ti(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new Ip(t.m_,t.Bf,n)}function jp(t,e,n){var r=this,s=new du;return t._s.enqueue((function(){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Ep(t,n)];case 1:return i.sent(),[4,_p(t,e)];case 2:return i.sent(),s.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===qi.FAILED_PRECONDITION||t.code===qi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),s.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return s.promise}))}function Up(t){if(t.R_||t.P_)throw new Gi(qi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Fp=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ho(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(fo(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Ci()}},t.prototype.Hf=function(t,e){var n=this,r={};return oo(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Kl(ho(t.latitude),ho(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=po(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(vo(t));default:return null}},t.prototype.Qf=function(t){var e=co(t);return new Ji(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=to.ot(t);xi(pu(n));var r=new Ai(n.get(1),n.get(3)),i=new ro(n.Y(5));return r.isEqual(e)||Oi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),qp=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ul(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new Gp(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Bp("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),Gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(qp);
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function Bp(t,e){return"string"==typeof e?yp(t,e):e instanceof Sl?e.d_.f_:e.f_}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function zp(t){if(cs(t)&&0===t.xt.length)throw new Gi(qi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hp=function(){};function Kp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Xp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return n(e,t),e.prototype.td=function(t){var e=Zl(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Gi(qi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){td(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var f=h[c];u.push(Zp(r,t,f))}a={arrayValue:{values:u}}}else a=Zp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||td(s,o),a=cp(n,"where",s,"in"===o||"not-in"===o);var l=zo.create(i,o,a);return function(t,e){if(e.Ct()){var n=fs(t);if(null!==n&&!n.isEqual(e.field))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=hs(t);null!==r&&ed(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Gi(qi.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Gi(qi.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new Fl(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new os(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Hp),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return n(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new es(e,n);return function(t,e){if(null===hs(t)){var n=fs(t);null!==n&&ed(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Fl(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new os(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Hp),Wp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return n(e,t),e.prototype.td=function(t){return new Fl(t.firestore,t.v_,vs(t.C_,this.od,this.ad))},e}(Hp),Qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return n(e,t),e.prototype.td=function(t){var e=$p(t,this.type,this.ud,this.hd);return new Fl(t.firestore,t.v_,function(t,e){return new os(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Hp),Jp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return n(e,t),e.prototype.td=function(t){var e=$p(t,this.type,this.ud,this.hd);return new Fl(t.firestore,t.v_,function(t,e){return new os(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Hp);function $p(t,e,n,r){if(n[0]instanceof Sl&&(n[0]=n[0].d_),n[0]instanceof qp)return function(t,e,n,r,i){if(!r)throw new Gi(qi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ps(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(No(e,r.key));else{var c=r.field(u.field);if(lo(c))throw new Gi(qi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.rt();throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Zo(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Zl(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Gi(qi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ls(t)&&-1!==c.indexOf("/"))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(to.ot(c));if(!ro.wt(h))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new ro(h);a.push(No(e,f))}else{var l=cp(n,r,c);a.push(l)}}return new Zo(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Zp(t,e,n){if(n instanceof Sl&&(n=n.d_),"string"==typeof n){if(""===n)throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ls(e)&&-1!==n.indexOf("/"))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(to.ot(n));if(!ro.wt(r))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return No(t,new ro(r))}if(n instanceof Ul)return No(t,n.S_);throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xl(n)+".")}function td(t,e){if(!Array.isArray(t)||0===t.length)throw new Gi(qi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Gi(qi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function ed(t,e,n){if(!n.isEqual(e))throw new Gi(qi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function nd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var rd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Wf=function(t){return new Bi(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Ul(this.firestore,null,e)},e}(Fp),id=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),od=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return n(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new sd(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Bp("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(qp),sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(od),ad=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new id(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new sd(n.Yf,n.Xf,r.key,r,new id(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Gi(qi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new sd(t.Yf,t.Xf,e.doc.key,e.doc,new id(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new sd(t.Yf,t.Xf,e.doc.key,e.doc,new id(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:ud(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function ud(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ci()}}function cd(t,e){return t instanceof od&&e instanceof od?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof ad&&e instanceof ad&&t.Yf===e.Yf&&Hl(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var hd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Wf=function(t){return new Bi(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Ul(this.firestore,null,e)},e}(Fp);function fd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Rl(t,Ul);var o=Rl(t.firestore,Lp),s=Zl(o);return e instanceof Sl&&(e=e.d_),pd(o,[("string"==typeof e||e instanceof Al?up(s,"updateDoc",t.S_,e,n,r):ap(s,"updateDoc",t.S_,e)).F_(t.S_,Fs.exists(!0))])}function ld(t){for(var e,n,r,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t instanceof Sl&&(t=t.d_);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Rp(s[c])||(u=s[c],c++);var h,f,l,p={includeMetadataChanges:u.includeMetadataChanges};if(Rp(s[c])){var d=s[c];s[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),s[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),s[c+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof Ul)f=Rl(t.firestore,Lp),l=as(t.S_.path),h={next:function(e){s[c]&&s[c](dd(f,t,e))},error:s[c+1],complete:s[c+2]};else{var v=Rl(t,Fl);f=Rl(v.firestore,Lp),l=v.C_;var y=new hd(f);h={next:function(t){s[c]&&s[c](new ad(f,y,v,t))},error:s[c+1],complete:s[c+2]},zp(t.C_)}return function(t,e,n,r){var s=this,a=new Tl(r),u=new xf(e,a,n);return t._s.Ps((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=kf,[4,Dp(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){a.i_(),t._s.Ps((function(){return i(s,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=Of,[4,Dp(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(Mp(f),l,p,h)}function pd(t,e){return function(t,e){var n=this,r=new du;return t._s.Ps((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return n=Kf,[4,Op(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Mp(t),e)}function dd(t,e,n){var r=n.docs.get(e.S_),i=new hd(t);return new od(t,i,e.S_,r,new id(n.hasPendingWrites,n.fromCache),e.v_)}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var vd=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Zl(t)}return t.prototype.set=function(t,e,n){this.md();var r=yd(t,this.Yf),i=nd(r.v_,e,n),o=tp(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Fs.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=yd(t,this.Yf);return e instanceof Sl&&(e=e.d_),o="string"==typeof e||e instanceof Al?up(this.Id,"WriteBatch.update",s.S_,e,n,r):ap(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Fs.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=yd(t,this.Yf);return this.Ed=this.Ed.concat(new na(e.S_,Fs.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Gi(qi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function yd(t,e){if(t instanceof Sl&&(t=t.d_),t.firestore!==e)throw new Gi(qi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return n(e,t),e.prototype.get=function(e){var n=this,r=yd(e,this.Yf),i=new hd(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new od(n.Yf,i,r.S_,t.Zf,new id(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Zl(t)}return t.prototype.get=function(t){var e=this,n=yd(t,this.Yf),r=new rd(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return Ci();var i=t[0];if(i instanceof Vo)return new qp(e.Yf,r,n.S_,null,n.v_);if(i instanceof Mo)return new qp(e.Yf,r,i.key,i,n.v_);throw Ci()}))},t.prototype.set=function(t,e,n){var r=yd(t,this.Yf),i=nd(r.v_,e,n),o=tp(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=yd(t,this.Yf);return e instanceof Sl&&(e=e.d_),o="string"==typeof e||e instanceof Al?up(this.Id,"Transaction.update",s.S_,e,n,r):ap(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=yd(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */function gd(){if("undefined"==typeof Uint8Array)throw new Gi(qi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function bd(){if("undefined"==typeof atob)throw new Gi(qi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.fromBase64String=function(t){return bd(),new e(Bi.fromBase64String(t))},e.fromUint8Array=function(t){return gd(),new e(Bi.fromUint8Array(t))},e.prototype.toBase64=function(){return bd(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return gd(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Sl),Id=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Up(t=Rl(t,Lp));var n=Mp(t),r=t.p_(),i=new _l;return jp(n,i,new Il(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Up(t=Rl(t,Lp));var e=Mp(t),n=t.p_(),r=new _l;return jp(e,r,new El(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Gi(qi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new du;return t.Bf.Tf((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return mu.Kn()?(e=t+"main",[4,mu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}($c(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Ai||(i.Pd=e),i}return n(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Rl(t,jl)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Di("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Np(t)];case 1:return e=r.sent(),[4,kp(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Ri(t);return e.Nh.delete(0),tf(e)}(n))]}}))}))}))}(Mp(Rl(this.d_,Lp)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return i(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,Np(t)];case 1:return e=r.sent(),[4,kp(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return i(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=Ri(t)).Nh.add(0),[4,ef(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Mp(Rl(this.d_,Lp)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Dl("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new du;return t._s.Ps((function(){return i(e,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e=$f,[4,Op(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Mp(Rl(this.d_,Lp)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Tl(e);return t._s.Ps((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ri(t).Wh.add(e),e.next()},[4,Dp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return i(n,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ri(t).Wh.delete(e)},[4,Dp(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Mp(t=Rl(t,Lp)),Rp(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Gi(qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Md(this,Gl(this.d_,t))}catch(t){throw kd(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Sd(this,Bl(this.d_,t))}catch(t){throw kd(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new xd(this,function(t,e){if(t=Rl(t,jl),kl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Gi(qi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Fl(t,null,function(t){return new os(to.ct(),t)}(e))}(this.d_,t))}catch(t){throw kd(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new du;return t._s.Ps((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,function(t){return Ap(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new wp(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(Mp(t),(function(n){return e(new md(t,n))}))}(this.d_,(function(n){return t(new Td(e,n))}))},e.prototype.batch=function(){var t=this;return Mp(this.d_),new Ad(new vd(this.d_,(function(e){return pd(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Gi(qi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Gi(qi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Sl),_d=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return n(e,t),e.prototype.Wf=function(t){return new wd(new Bi(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Sd.yd(e,this.firestore,null)},e}(Fp);var Td=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new _d(e),r}return n(e,t),e.prototype.get=function(t){var e=this,n=Vd(t);return this.d_.get(n).then((function(t){return new Pd(e.Yf,new od(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Vd(t);return n?(Ol("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Vd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,u([s,e,n],i)),this},e.prototype.delete=function(t){var e=Vd(t);return this.d_.delete(e),this},e}(Sl),Ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.set=function(t,e,n){var r=Vd(t);return n?(Ol("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Vd(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,u([s,e,n],i)),this},e.prototype.delete=function(t){var e=Vd(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Sl),Nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return n(e,t),e.prototype.fromFirestore=function(t,e){var n=new sd(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Cd(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new _d(t),n),i.set(n,o)),o},e}(Sl);Nd.Vd=new WeakMap;var Sd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new _d(e),r}return n(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Gi(qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Ul(n.d_,r,new ro(t)))},e.yd=function(t,n,r){return new e(n,new Ul(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Md(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Md(this.firestore,Gl(this.d_,t))}catch(t){throw kd(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Sl&&(t=t.d_),t instanceof Ul&&zl(this.d_,t)},e.prototype.set=function(t,e){e=Ol("DocumentReference.set",e);try{return function(t,e,n){t=Rl(t,Ul);var r=Rl(t.firestore,Lp),i=nd(t.v_,e,n);return pd(r,[tp(Zl(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Fs.Kt())])}(this.d_,t,e)}catch(t){throw kd(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?fd(this.d_,t):fd.apply(void 0,u([this.d_,t,e],n))}catch(t){throw kd(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return pd(Rl((t=this.d_).firestore,Lp),[new na(t.S_,Fs.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Od(e),i=Dd(e,(function(e){return new Pd(t.firestore,new od(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return ld(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rl(t,Ul);var e=Rl(t.firestore,Lp),n=Mp(e),r=new hd(e);return function(t,e){var n=this,r=new du;return t._s.Ps((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ri(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof Mo?n.resolve(i):i instanceof Vo?n.resolve(null):n.reject(new Gi(qi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Nu(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Sp(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new od(e,r,t.S_,n,new id(n instanceof Mo&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Rl(t,Ul);var e=Rl(t.firestore,Lp);return Pp(Mp(e),t.S_,{source:"server"}).then((function(n){return dd(e,t,n)}))}(this.d_):function(t){t=Rl(t,Ul);var e=Rl(t.firestore,Lp);return Pp(Mp(e),t.S_).then((function(n){return dd(e,t,n)}))}(this.d_)).then((function(t){return new Pd(e.firestore,new od(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,t)))},e}(Sl);function kd(t,e,n){return t.message=t.message.replace(e,n),t}function Od(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Rp(r))return r}return{}}function Dd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Rp(t[0])?t[0]:Rp(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return n(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Sd(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return cd(this.d_,t.d_)},e}(Sl),Cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Pd),xd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new _d(e),r}return n(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Kp(this.d_,function(t,e,n){var r=e,i=Bp("where",t);return new Xp(i,r,n)}(t,n,r)))}catch(t){throw kd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Kp(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Bp("orderBy",t);return new Yp(r,n)}(t,n)))}catch(t){throw kd(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Kp(this.d_,function(t){return Ll("limit",t),new Wp("limit",t,"F")}(t)))}catch(t){throw kd(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Kp(this.d_,function(t){return Ll("limitToLast",t),new Wp("limitToLast",t,"L")}(t)))}catch(t){throw kd(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qp("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw kd(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qp("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw kd(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw kd(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Kp(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jp("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw kd(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Hl(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Rl(t,Fl);var e=Rl(t.firestore,Lp),n=Mp(e),r=new hd(e);return function(t,e){var n=this,r=new du;return t._s.Ps((function(){return i(n,void 0,void 0,(function(){var n;return o(this,(function(s){switch(s.label){case 0:return n=function(t,e,n){return i(this,void 0,void 0,(function(){var r,i,s,a,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,ph(t,e,!0)];case 1:return u=o.sent(),r=new Uf(e,u.Rc),i=r.fl(u.documents),s=r.wi(i,!1),n.resolve(s.snapshot),[3,3];case 2:return a=o.sent(),u=Nu(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Sp(t)];case 1:return[2,n.apply(void 0,[s.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new ad(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Rl(t,Fl);var e=Rl(t.firestore,Lp),n=Mp(e),r=new hd(e);return Cp(n,t.C_,{source:"server"}).then((function(n){return new ad(e,r,t,n)}))}(this.d_):function(t){t=Rl(t,Fl);var e=Rl(t.firestore,Lp),n=Mp(e),r=new hd(e);return zp(t.C_),Cp(n,t.C_).then((function(n){return new ad(e,r,t,n)}))}(this.d_)).then((function(t){return new Ld(e.firestore,new ad(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Od(e),i=Dd(e,(function(e){return new Ld(t.firestore,new ad(t.firestore.d_,t.Xf,t.d_,e._d))}));return ld(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,t)))},e}(Sl),Rd=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return n(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Cd(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Sl),Ld=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return n(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new xd(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new Cd(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new Rd(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new Cd(n.Yf,r))}))},e.prototype.isEqual=function(t){return cd(this.d_,t.d_)},e}(Sl),Md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return n(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Sd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Sd(this.firestore,void 0===t?Bl(this.d_):Bl(this.d_,t))}catch(t){throw kd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Rl(t.firestore,Lp),r=Bl(t),i=nd(t.v_,e);return pd(n,[tp(Zl(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Fs.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new Sd(e.firestore,t)}))},e.prototype.isEqual=function(t){return zl(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,t)))},e}(xd);function Vd(t){return t instanceof Sl&&(t=t.d_),Rl(t,Ul)}
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var jd=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Al.bind.apply(Al,u([void 0],e))))||this}return n(e,t),e.documentId=function(){return new e(no.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Sl&&(t=t.d_),t instanceof Al&&this.d_.f_.isEqual(t.f_)},e}(Sl),Ud=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.serverTimestamp=function(){var t=new rp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ep("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new sp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Sl);
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var Fd,qd={Firestore:Ed,GeoPoint:Kl,Timestamp:Ji,Blob:wd,Transaction:Td,WriteBatch:Ad,DocumentReference:Sd,DocumentSnapshot:Pd,Query:xd,QueryDocumentSnapshot:Cd,QuerySnapshot:Ld,CollectionReference:Md,FieldPath:jd,FieldValue:Ud,setLogLevel:function(t){var e;e=t,Ni.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
  * @license
  * Copyright 2017 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */(function(t,e){t.INTERNAL.registerComponent(new E("firestore",(function(t){return function(t,e){return new Ed(t,new Lp(t,e),new Id)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},qd)))})(Fd=Z),Fd.registerVersion("@firebase/firestore","2.1.7");Z.initializeApp({apiKey:"AIzaSyD4uk8sIlNSznve9Ath-T8I3qYEPq6YBwE",authDomain:"fir-workbench-d5b34.firebaseapp.com",projectId:"fir-workbench-d5b34",storageBucket:"fir-workbench-d5b34.appspot.com",messagingSenderId:"1061987155341",appId:"1:1061987155341:web:7eb4e1c4416715e6a011c4",measurementId:"G-PL20HH5CK8"});var Gd=Z.firestore(),Bd="Authors",zd="success",Hd="error",Kd="info";function Xd(t){t.remove()}function Yd(t,e){var n=document.createTextNode(t),r=document.createElement("p");r.appendChild(n);var i=document.createElement("div");i.appendChild(r),i.classList.add("alertbox__item");var o="alertbox__item--".concat(e);i.classList.add(o),i.addEventListener("click",(function(t){Xd(t.currentTarget)})),document.querySelector("#alertbox").appendChild(i),setTimeout((function(){Xd(i)}),5e3)}function Wd(){document.querySelector(".button--signout").classList.remove("button--hidden"),document.querySelector(".button--redirect").classList.add("button--hidden"),document.querySelector(".button--popup").classList.add("button--hidden"),document.querySelector(".button--anonymously").classList.add("button--hidden")}function Qd(){document.querySelector(".button--signout").classList.add("button--hidden"),document.querySelector(".button--redirect").classList.remove("button--hidden"),document.querySelector(".button--popup").classList.remove("button--hidden"),document.querySelector(".button--anonymously").classList.remove("button--hidden")}function Jd(t){var e=document.querySelector(".content__data");e.innerHTML="",t.forEach((function(n){var r=document.createElement("p"),i=document.createTextNode(t);r.appendChild(i),r.classList.add("content__item"),e.appendChild(r)}))}Z.auth().onAuthStateChanged((function(t){t?Wd():Qd()})),document.querySelector(".button--redirect").addEventListener("click",(function(){Z.auth().useDeviceLanguage();var t=new Z.auth.GoogleAuthProvider;Z.auth().signInWithRedirect(t).then((function(t){console.log(t);Yd("Signed In With Redirect",Kd),Wd()})).catch((function(t){var e=t.code,n=t.message;console.log("Error code: ".concat(e," /n Error Message: ").concat(n)),Yd("Error code: ".concat(e," /n Error Message: ").concat(n),Hd)}))})),document.querySelector(".button--popup").addEventListener("click",(function(){Z.auth().useDeviceLanguage();var t=new Z.auth.GoogleAuthProvider;Z.auth().signInWithPopup(t).then((function(t){console.log(t);Yd("Signed In With Popup",Kd),Wd()})).catch((function(t){var e=t.code,n=t.message;console.log("Error code: ".concat(e," /n Error Message: ").concat(n)),Yd("Error code: ".concat(e," /n Error Message: ").concat(n),Hd)}))})),document.querySelector(".button--anonymously").addEventListener("click",(function(){Z.auth().useDeviceLanguage(),Z.auth().signInAnonymously().then((function(){Yd("Signed In Anonymously",Kd),Wd()})).catch((function(t){var e=t.code,n=t.message;console.log("Error code: ".concat(e," /n Error Message: ").concat(n)),Yd("Error code: ".concat(e," /n Error Message: ").concat(n),Hd)}))})),document.querySelector(".button--signout").addEventListener("click",(function(){Z.auth().signOut().then((function(){Yd("Signed Out",Kd),Qd()})).catch((function(t){Yd("Error code: ".concat(errorCode," /n Error Message: ").concat(errorMessage),Hd)}))})),document.querySelector(".button--request-all").addEventListener("click",(function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd;Gd.collection(t).get().then((function(t){var e=[];t.forEach((function(t){console.log(JSON.stringify(t.data())),e.push(JSON.stringify(t.data()))})),Yd("Data Received",zd),Jd(e)})).catch((function(t){var e=Hd;Yd(t.message,e)}))}()})),document.querySelector(".button--request-specific").addEventListener("click",(function(t){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bd,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"KGi8sT2VLjPmYpTqZd2s";console.log(e),Gd.collection(t).doc(e).get().then((function(t){t.exists?console.log(JSON.stringify(t.data())):console.log("There is no document matching the id!");var e=[JSON.stringify(t.data())];Yd("Data Received",zd),Jd(e)})).catch((function(t){var e=Hd;Yd(t.message,e)}))}()})),document.querySelector(".back-top-button").addEventListener("click",(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}))}();
//# sourceMappingURL=index.36ec1130.js.map
